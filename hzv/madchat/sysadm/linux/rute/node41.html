<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.2beta8 (1.46)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>38. postgres SQL Server</TITLE>
<META NAME="description" CONTENT="38. postgres SQL Server">
<META NAME="keywords" CONTENT="rute">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.2beta8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="rute.css">

<LINK REL="next" HREF="node42.html">
<LINK REL="previous" HREF="node40.html">
<LINK REL="up" HREF="rute.html">
<LINK REL="next" HREF="node42.html">
</HEAD>

<BODY BGCOLOR=#FFFFFF >
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TR><TD align=left bgcolor="#000000">
<FONT COLOR=white>
&nbsp;<A HREF="http://www.icon.co.za/~psheer/rute-purchase.html"><FONT COLOR=white>Purchase</FONT></A>&nbsp;
</FONT>
</TD><TD align=center bgcolor="#000000">
<FONT COLOR=white>
Copyright&nbsp;&#169;&nbsp;2002&nbsp;Paul Sheer. <A HREF="copying.html"><FONT COLOR=white>Click here for copying permissions.</FONT></A>
</FONT>
</TD><TD align=right bgcolor="#000000">
<FONT COLOR=white>
&nbsp;<A HREF="http://www.icon.co.za/~psheer/rute-home.html"><FONT COLOR=white>Home</FONT></A>&nbsp;
</FONT>
</TD></TR>
<TR><TD colspan=2 align=left bgcolor="#ECEBF4">
<IMG SRC="va-btn-small-light-60.png">
</TD><TD align=right bgcolor="#ECEBF4">
<IMG SRC="sflogo2-steel-60.png">
</TD></TR>
</TABLE><BR>

<!--Navigation Panel-->
<A NAME="tex2html2707"
  HREF="node42.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2703"
  HREF="rute.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2697"
  HREF="node40.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2705"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2708"
  HREF="node42.html">39. smbd  </A>
<B> Up:</B> <A NAME="tex2html2704"
  HREF="rute.html">rute</A>
<B> Previous:</B> <A NAME="tex2html2698"
  HREF="node40.html">37. crond and atd</A>
 &nbsp <B>  <A NAME="tex2html2706"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html2709"
  HREF="#SECTION004110000000000000000">38.1 Structured Query Language</A>
<LI><A NAME="tex2html2710"
  HREF="#SECTION004120000000000000000">38.2 <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT></A>
<LI><A NAME="tex2html2711"
  HREF="#SECTION004130000000000000000">38.3 <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> Package Content</A>
<LI><A NAME="tex2html2712"
  HREF="#SECTION004140000000000000000">38.4 Installing and Initializing <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT></A>
<LI><A NAME="tex2html2713"
  HREF="#SECTION004150000000000000000">38.5 Database Queries with <TT>
<FONT COLOR="#0000ff">psql</FONT></TT></A>
<LI><A NAME="tex2html2714"
  HREF="#SECTION004160000000000000000">38.6 Introduction to SQL</A>
<UL>
<LI><A NAME="tex2html2715"
  HREF="#SECTION004161000000000000000">38.6.1 Creating tables</A>
<LI><A NAME="tex2html2716"
  HREF="#SECTION004162000000000000000">38.6.2 Listing a table</A>
<LI><A NAME="tex2html2717"
  HREF="#SECTION004163000000000000000">38.6.3 Adding a column</A>
<LI><A NAME="tex2html2718"
  HREF="#SECTION004164000000000000000">38.6.4 Deleting (dropping) a column</A>
<LI><A NAME="tex2html2719"
  HREF="#SECTION004165000000000000000">38.6.5 Deleting (dropping) a table</A>
<LI><A NAME="tex2html2720"
  HREF="#SECTION004166000000000000000">38.6.6 Inserting rows, ``object relational''</A>
<LI><A NAME="tex2html2721"
  HREF="#SECTION004167000000000000000">38.6.7 Locating rows</A>
<LI><A NAME="tex2html2722"
  HREF="#SECTION004168000000000000000">38.6.8 Listing selected columns, and the <TT>
<FONT COLOR="#0000ff">oid</FONT></TT> column</A>
<LI><A NAME="tex2html2723"
  HREF="#SECTION004169000000000000000">38.6.9 Creating tables from other tables</A>
<LI><A NAME="tex2html2724"
  HREF="#SECTION0041610000000000000000">38.6.10 Deleting rows</A>
<LI><A NAME="tex2html2725"
  HREF="#SECTION0041611000000000000000">38.6.11 Searches</A>
<LI><A NAME="tex2html2726"
  HREF="#SECTION0041612000000000000000">38.6.12 Migrating from another database; dumping and restoring tables as plain text</A>
<LI><A NAME="tex2html2727"
  HREF="#SECTION0041613000000000000000">38.6.13 Dumping an entire database</A>
<LI><A NAME="tex2html2728"
  HREF="#SECTION0041614000000000000000">38.6.14 More advanced searches</A>
</UL>
<LI><A NAME="tex2html2729"
  HREF="#SECTION004170000000000000000">38.7 Real Database Projects</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION004100000000000000000">
38. <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> SQL Server</A>
</H1>

<P>
<A NAME="chap:postgres"></A>
<P>
This chapter will show you how to set up an SQL server for free.

<P>

<H1><A NAME="SECTION004110000000000000000">
38.1 Structured Query Language</A>
</H1>

<P>

<I>Structured Query Language</I> (SQL) is a programming language developed
specifically to access data arranged in tables of rows and
columns--as in a database--as well as do searching,
sorting and cross-referencing of that data.

<P>
Typically, the database tables will sit in files managed
by an <I>SQL server</I> daemon process. The
SQL server will listen on a TCP socket for incoming requests from
client machines and will service those requests.

<P>
SQL has become a de facto industry standard. However,
the protocols (over TCP/IP) by which those SQL requests are sent are
different from implementation to implementation.

<P>
SQL requests can usually be typed in manually from
a command-line interface. This is difficult for most users, so a
GUI interface will usually hide this process from
the user.

<P>
SQL servers and SQL support software is major institution.
Management of database tables is actually a complicated affair. A
good SQL server will properly streamline multiple simultaneous
requests that may access and modify rows in the same table. Doing
this efficiently, along with the many types of complex searches and
cross-referencing, while also ensuring data integrity, is a complex task.

<P>

<H1><A NAME="SECTION004120000000000000000">
38.2 <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT></A>
</H1>

<P>
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> (<I>PostGreSQL</I>) is a free
SQL server written under the BSD
license. <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> supports an extended
subset of SQL92. <FONT COLOR="#ffa500">[The definitive SQL
standard.]</FONT> It does a <I>lot</I> of very nifty things
that no other database can (it seems). About the only commercial
equivalent worth buying over
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> is a certain very expensive industry leader.
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> runs on every flavor of U<SMALL>NIX</SMALL> and also on Windows NT.

<P>
The <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> documentation proudly states:
<BLOCKQUOTE>
The Object-Relational Database Management System now known
as PostgreSQL (and briefly called Postgres95) is derived from the
Postgres package written at Berkeley. With over a decade of
development behind it, PostgreSQL is the most advanced
open-source database available anywhere, offering multi-version
concurrency control, supporting almost all SQL constructs (including
subselects, transactions, and
user-defined types and functions),
and having a wide range of language bindings available (including
C, C++, Java, Perl, Tcl, and Python). 

</BLOCKQUOTE>

<P>
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> is also fairly dry. Most people ask why it doesn't
have a graphical frontend. Considering that it runs on so many
different platforms, it makes sense for it to be purely a back-end
engine. A graphical interface is a different kind of software project
that would probably support more than one type of database server
at the back and possibly run under only one kind of graphical
interface.

<P>
The <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> package consists of the files
described in the next two sections:

<P>

<H1><A NAME="SECTION004130000000000000000">
38.3 <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> Package Content</A>
</H1>

<P>
The <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> packages consists of the user programs


<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>createdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pg_dump&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;psql</code><br>
<code>createlang&nbsp;&nbsp;&nbsp;&nbsp;droplang&nbsp;&nbsp;&nbsp;&nbsp;pg_dumpall&nbsp;&nbsp;&nbsp;vacuumdb</code><br>
<code>createuser&nbsp;&nbsp;&nbsp;&nbsp;dropuser&nbsp;&nbsp;&nbsp;&nbsp;pg_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>
and the server programs


<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>initdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pg_ctl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pg_upgrade&nbsp;&nbsp;&nbsp;postgresql-dump</code><br>
<code>initlocation&nbsp;&nbsp;&nbsp;pg_encoding&nbsp;&nbsp;&nbsp;pg_version&nbsp;&nbsp;&nbsp;postmaster</code><br>
<code>ipcclean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pg_passwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postgres</code><br>
</FONT></TD></TR></TABLE><P>
Each of these programs has a man page which you should get an inkling of.

<P>
Further man pages provide references to actual SQL commands.
Try <TT>
<FONT COLOR="#0000ff">man l select</FONT></TT> (explained further on):

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>SELECT(l)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT(l)</code><br>
<code>&nbsp;</code><br>
<code>NAME</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;-&nbsp;Retrieve&nbsp;rows&nbsp;from&nbsp;a&nbsp;table&nbsp;or&nbsp;view.</code><br>
<code>&nbsp;</code><br>
<code>SYNOPSIS</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;[&nbsp;ALL&nbsp;|&nbsp;DISTINCT&nbsp;[&nbsp;ON&nbsp;(&nbsp;expression&nbsp;[,&nbsp;...]&nbsp;)&nbsp;]&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expression&nbsp;[&nbsp;AS&nbsp;name&nbsp;]&nbsp;[,&nbsp;...]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;INTO&nbsp;[&nbsp;TEMPORARY&nbsp;|&nbsp;TEMP&nbsp;]&nbsp;[&nbsp;TABLE&nbsp;]&nbsp;new_table&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;FROM&nbsp;table&nbsp;[&nbsp;alias&nbsp;]&nbsp;[,&nbsp;...]&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;WHERE&nbsp;condition&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;GROUP&nbsp;BY&nbsp;column&nbsp;[,&nbsp;...]&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;HAVING&nbsp;condition&nbsp;[,&nbsp;...]&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;{&nbsp;UNION&nbsp;[&nbsp;ALL&nbsp;]&nbsp;|&nbsp;INTERSECT&nbsp;|&nbsp;EXCEPT&nbsp;}&nbsp;select&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;ORDER&nbsp;BY&nbsp;column&nbsp;[&nbsp;ASC&nbsp;|&nbsp;DESC&nbsp;|&nbsp;USING&nbsp;operator&nbsp;]&nbsp;[,&nbsp;...]&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;FOR&nbsp;UPDATE&nbsp;[&nbsp;OF&nbsp;class_name&nbsp;[,&nbsp;...]&nbsp;]&nbsp;]</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LIMIT&nbsp;{&nbsp;count&nbsp;|&nbsp;ALL&nbsp;}&nbsp;[&nbsp;{&nbsp;OFFSET&nbsp;|&nbsp;,&nbsp;}&nbsp;start&nbsp;]</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Most important is the enormous amount of HTML documentation
that comes with <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT>. Point your web browser to
<TT>
<FONT COLOR="#0000ff">/usr/doc/postgresql-</FONT></TT><I>?</I><TT>
<FONT COLOR="#0000ff">.</FONT></TT><I>?</I><TT>
<FONT COLOR="#0000ff">.</FONT></TT><I>?</I>
(or <TT>
<FONT COLOR="#0000ff">/usr/share/doc/</FONT></TT>...),
then dive into the <TT>
<FONT COLOR="#0000ff">admin</FONT></TT>, <TT>
<FONT COLOR="#0000ff">user</FONT></TT>, <TT>
<FONT COLOR="#0000ff">programmer</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">tutorial</FONT></TT>, and <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> directories.

<P>
Finally, there are the start and stop scripts in <TT>
<FONT COLOR="#0000ff">/etc/rc.d/init.d/</FONT></TT>
(or <TT>
<FONT COLOR="#0000ff">/etc/init.d/</FONT></TT>)
and the directory in which the database tables themselves are stored: <TT>
<FONT COLOR="#0000ff">/var/lib/pgsql/</FONT></TT>.

<P>

<H1><A NAME="SECTION004140000000000000000">
38.4 Installing and Initializing <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT></A>
</H1>

<P>
<A NAME="sec:instinitpostgres"></A>
<P>

<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> can be gotten prepackaged for your favorite
distribution. Simply install the package using <TT>
<FONT COLOR="#0000ff">rpm</FONT></TT> or <TT>
<FONT COLOR="#0000ff">dpkg</FONT></TT>
and then follow the instructions given below.

<P>
Stop the <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> server if it is running; the <TT>
<FONT COLOR="#0000ff">init.d</FONT></TT>
script may be called <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> or <TT>
<FONT COLOR="#0000ff">postgresql</FONT></TT> (Debian
commands in parentheses):

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/etc/rc.d/init.d/postgres&nbsp;stop</code><br>
<code>(&nbsp;/etc/init.d/postgresql&nbsp;stop&nbsp;)</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Edit the <TT>
<FONT COLOR="#0000ff">init.d</FONT></TT> script to support TCP requests. There
will
be a line like the following to which you can add the <TT>
<FONT COLOR="#0000ff">-i</FONT></TT> option.
Mine looks like:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>su&nbsp;-l&nbsp;postgres&nbsp;-c&nbsp;"/usr/bin/pg_ctl&nbsp;-D&nbsp;$PGDATA&nbsp;\</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;/usr/bin/postmaster&nbsp;-o&nbsp;'-i&nbsp;-o&nbsp;-e'&nbsp;start&nbsp;&#062;/dev/null&nbsp;2&#062;&#038;1"</code><br>
</FONT></TD></TR></TABLE><P>
which also (with the <TT>
<FONT COLOR="#0000ff">-o -e</FONT></TT> option) forces European
date
formats (28/4/1984 instead of 4/28/1984). Note that hosts
will not be able to connect unless you edit your <TT>
<FONT COLOR="#0000ff">/var/lib/pgsql/data/pg_hba.conf</FONT></TT>
(<TT>
<FONT COLOR="#0000ff">/etc/postgresql/pg_hba.conf</FONT></TT> on Debian) file, and add lines
like

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>host&nbsp;&nbsp;&nbsp;&nbsp;mydatabase&nbsp;&nbsp;&nbsp;192.168.4.7&nbsp;&nbsp;&nbsp;255.255.255.255&nbsp;&nbsp;&nbsp;trust</code><br>
</FONT></TD></TR></TABLE><P>
In either case, you should check this file to ensure that
only trusted hosts can connect to your database, or remove the <TT>
<FONT COLOR="#0000ff">-i</FONT></TT>
option altogether if you are only connecting from the local machine.
To a limited extent, you can also limit what users can connect within
this file.

<P>
It would be nice if the U<SMALL>NIX</SMALL> domain socket that
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> listens on (i.e., <TT>
<FONT COLOR="#0000ff">/tmp/.s.PGSQL.5432</FONT></TT>) had
permissions 0770 instead of 0777. That way, you could limit connections
to only those users belonging to the <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> group. You can add
this feature by searching for the <B>C</B> <TT>
<FONT COLOR="#0000ff">chmod</FONT></TT> command within
<TT>
<FONT COLOR="#0000ff">src/backend/libpq/pqcomm.c</FONT></TT> inside the <TT>
<FONT COLOR="#0000ff">postgres-7.0</FONT></TT>
sources. Later versions may have added a feature to set the permissions
on this socket.

<P>
To run <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT>, you need a user of that name.
If you do not already have one then enter

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/sbin/useradd&nbsp;postgres</code><br>
</FONT></TD></TR></TABLE><P>
and restart the server with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/etc/rc.d/init.d/postgresql&nbsp;restart</code><br>
</FONT></TD></TR></TABLE><P>
The <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> <TT>
<FONT COLOR="#0000ff">init.d</FONT></TT> script initializes a template database
on
first run, so you may have to start it twice.

<P>
Now you can create your own database. The following example
creates a database <TT>
<FONT COLOR="#0000ff">finance</FONT></TT> as well as a <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> user
<TT>
<FONT COLOR="#0000ff">finance</FONT></TT>. It does these creations while being user
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> (this is what the <TT>
<FONT COLOR="#0000ff">-U</FONT></TT> option is for). You should
run these commands as user <TT>
<FONT COLOR="#0000ff">root</FONT></TT> or as user <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT>
without the <TT>
<FONT COLOR="#0000ff">-U postgres</FONT></TT>.

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>[root@cericon]#&nbsp;<font color="navy"><B>/usr/sbin/useradd&nbsp;finance</B></font></code><br>
<code>[root@cericon]#&nbsp;<font color="navy"><B>createuser&nbsp;-U&nbsp;postgres&nbsp;--adduser&nbsp;--createdb&nbsp;finance</B></font></code><br>
<code>CREATE&nbsp;USER</code><br>
<code>[root@cericon]#&nbsp;<font color="navy"><B>createdb&nbsp;-U&nbsp;finance&nbsp;finance</B></font></code><br>
<code>CREATE&nbsp;DATABASE</code><br>
<code>[root@cericon]#&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H1><A NAME="SECTION004150000000000000000">
38.5 Database Queries with <TT>
<FONT COLOR="#0000ff">psql</FONT></TT></A>
</H1>

<P>
Now that the database exists, you can begin running SQL queries.

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>20</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>25</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>30</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>35</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>40</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>[root@cericon]#&nbsp;<font color="navy"><B>psql&nbsp;-U&nbsp;finance</B></font></code><br>
<code>Welcome&nbsp;to&nbsp;psql,&nbsp;the&nbsp;PostgreSQL&nbsp;interactive&nbsp;terminal.</code><br>
<code>&nbsp;</code><br>
<code>Type:&nbsp;&nbsp;\copyright&nbsp;for&nbsp;distribution&nbsp;terms</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\h&nbsp;for&nbsp;help&nbsp;with&nbsp;SQL&nbsp;commands</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\?&nbsp;for&nbsp;help&nbsp;on&nbsp;internal&nbsp;slash&nbsp;commands</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\g&nbsp;or&nbsp;terminate&nbsp;with&nbsp;semicolon&nbsp;to&nbsp;execute&nbsp;query</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\q&nbsp;to&nbsp;quit</code><br>
<code>&nbsp;</code><br>
<code>finance=#&nbsp;<font color="navy"><B>select&nbsp;*&nbsp;from&nbsp;pg&#95;tables&#059;</B></font></code><br>
<code>&nbsp;&nbsp;&nbsp;tablename&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;tableowner&nbsp;|&nbsp;hasindexes&nbsp;|&nbsp;hasrules&nbsp;|&nbsp;hastriggers&nbsp;</code><br>
<code>----------------+------------+------------+----------+-------------</code><br>
<code>&nbsp;pg_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_attribute&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_proc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_group&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_database&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_variable&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_xactlock&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_attrdef&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_relcheck&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_trigger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_inherits&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_statistic&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_operator&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_opclass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_am&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_amop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_amproc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_language&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_aggregate&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_ipl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_inheritproc&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_rewrite&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_listener&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_description&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f</code><br>
<code>&nbsp;pg_shadow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;postgres&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;f&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;t</code><br>
<code>(28&nbsp;rows)</code><br>
</FONT></TD></TR></TABLE><P>

<P>
The preceeding rows are <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT>'s internal
tables. Some are actual
tables, and some are <I>views</I>
of tables. <FONT COLOR="#ffa500">[A selective representation of an actual table.]</FONT>
<P>
To get a list of databases, try:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>finance=#&nbsp;<font color="navy"><B>select&nbsp;*&nbsp;from&nbsp;pg&#95;database&#059;</B></font></code><br>
<code>&nbsp;&nbsp;datname&nbsp;&nbsp;|&nbsp;datdba&nbsp;|&nbsp;encoding&nbsp;|&nbsp;&nbsp;datpath&nbsp;&nbsp;</code><br>
<code>-----------+--------+----------+-----------</code><br>
<code>&nbsp;template1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;24&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;|&nbsp;template1</code><br>
<code>&nbsp;finance&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;26&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;|&nbsp;finance</code><br>
<code>(2&nbsp;rows)</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H1><A NAME="SECTION004160000000000000000">
38.6 Introduction to SQL</A>
</H1>

<P>
The following are 99% of the commands you are ever going to use.
(Note that all SQL commands require a semicolon at the end--you
won't be the first person to ask why nothing happens when you
press <IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-enter.png" ALT="Enter"> without the semicolon.)

<P>

<H2><A NAME="SECTION004161000000000000000">
38.6.1 Creating tables</A>
</H2>

<P>
To create a table called <TT>
<FONT COLOR="#0000ff">people</FONT></TT>, with three columns:


<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>CREATE&nbsp;TABLE&nbsp;people&nbsp;(&nbsp;name&nbsp;text,&nbsp;gender&nbsp;bool,&nbsp;address&nbsp;text&nbsp;)&#059;</code><br>
</FONT></TD></TR></TABLE><P>
The created table will title the columns, <TT>
<FONT COLOR="#0000ff">name</FONT></TT>, <TT>
<FONT COLOR="#0000ff">gender</FONT></TT>,
and <TT>
<FONT COLOR="#0000ff">address</FONT></TT>. Columns are
<I>typed</I>. This means
that only the kind of data that was specified at the time of creation
can go in that column. In the case of <TT>
<FONT COLOR="#0000ff">gender</FONT></TT>, it can only
be <I>true</I> or <I>false</I> for the
<TT>
<FONT COLOR="#0000ff">bool</FONT></TT>ean type, which
we will associate to the male and female genders. There is probably no
reason to use the boolean value here: using an integer or text field
can often be far more descriptive and flexible. In the case of
<TT>
<FONT COLOR="#0000ff">name</FONT></TT> and <TT>
<FONT COLOR="#0000ff">address</FONT></TT>, these can hold anything, since
they are of the <TT>
<FONT COLOR="#0000ff">text</FONT></TT> type, which is the most encompassing type
of all.

<P>
<I>Note that in the <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> documentation, a ``column'' is
called an ``attribute'' for historical reasons.</I>

<P>
You should try to choose types according to the kind of
<I>searches</I> you are going to do and <I>not</I> according
to the data it holds. Table <A HREF="node41.html#tab:sqltypes">38.1</A> lists the
most of the useful types as well as their SQL92 equivalents. The types in bold
are to be used in preference to other similar types for greater
range or precision:

<P>

<P>

<A NAME="66104"></A>
<TABLE CELLPADDING=1 BORDER="1">
<CAPTION><STRONG>Table:</STRONG>
Common <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> types</CAPTION>
<TR><TD ALIGN="LEFT"><A NAME="tab:sqltypes"></A><B>Postgres Type</B></TD>
<TH ALIGN="LEFT"><B>SQL92 or SQL3 Type</B></TH>
<TH ALIGN="LEFT"><B>Description</B></TH>
</TR>
<TR><TD ALIGN="LEFT">bool</TD>
<TD ALIGN="LEFT">boolean</TD>
<TD ALIGN="LEFT">logical boolean (true/false)</TD>
</TR>
<TR><TD ALIGN="LEFT">box</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">rectangular box in 2D plane</TD>
</TR>
<TR><TD ALIGN="LEFT">char(n)</TD>
<TD ALIGN="LEFT">character(n)</TD>
<TD ALIGN="LEFT">fixed-length character string</TD>
</TR>
<TR><TD ALIGN="LEFT">cidr</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">IP version 4 network or host address</TD>
</TR>
<TR><TD ALIGN="LEFT">circle</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">circle in 2D plane</TD>
</TR>
<TR><TD ALIGN="LEFT">date</TD>
<TD ALIGN="LEFT">date</TD>
<TD ALIGN="LEFT">calendar date without time of day</TD>
</TR>
<TR><TD ALIGN="LEFT">decimal</TD>
<TD ALIGN="LEFT">decimal(p,s)</TD>
<TD ALIGN="LEFT">exact numeric for p &lt;= 9, s = 0</TD>
</TR>
<TR><TD ALIGN="LEFT">float4</TD>
<TD ALIGN="LEFT">float(p), p &lt; 7</TD>
<TD ALIGN="LEFT">floating-point number with precision p</TD>
</TR>
<TR><TD ALIGN="LEFT">float8</TD>
<TD ALIGN="LEFT">float(p), 7 &lt;= p &lt; 16</TD>
<TD ALIGN="LEFT">floating-point number with precision p</TD>
</TR>
<TR><TD ALIGN="LEFT">inet</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">IP version 4 network or host address</TD>
</TR>
<TR><TD ALIGN="LEFT">int2</TD>
<TD ALIGN="LEFT">smallint</TD>
<TD ALIGN="LEFT">signed 2-byte integer</TD>
</TR>
<TR><TD ALIGN="LEFT">int4</TD>
<TD ALIGN="LEFT">int, integer</TD>
<TD ALIGN="LEFT">signed 4-byte integer</TD>
</TR>
<TR><TH ALIGN="LEFT"><B>int8</B></TH>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">signed 8-byte integer</TD>
</TR>
<TR><TD ALIGN="LEFT">interval</TD>
<TD ALIGN="LEFT">interval</TD>
<TD ALIGN="LEFT">general-use time span</TD>
</TR>
<TR><TD ALIGN="LEFT">line</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">infinite line in 2D plane</TD>
</TR>
<TR><TD ALIGN="LEFT">lseg</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">line segment in 2D plane</TD>
</TR>
<TR><TH ALIGN="LEFT"><B>money</B></TH>
<TD ALIGN="LEFT">decimal(9,2)</TD>
<TD ALIGN="LEFT">U.S.-style currency</TD>
</TR>
<TR><TD ALIGN="LEFT">numeric</TD>
<TD ALIGN="LEFT">numeric(p,s)</TD>
<TD ALIGN="LEFT">exact numeric for p == 9, s = 0</TD>
</TR>
<TR><TD ALIGN="LEFT">path</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">open and closed geometric path in 2D plane</TD>
</TR>
<TR><TD ALIGN="LEFT">point</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">geometric point in 2D plane</TD>
</TR>
<TR><TD ALIGN="LEFT">polygon</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">closed geometric path in 2D plane</TD>
</TR>
<TR><TD ALIGN="LEFT">serial</TD>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">unique ID for indexing and cross-reference</TD>
</TR>
<TR><TD ALIGN="LEFT">time</TD>
<TD ALIGN="LEFT">time</TD>
<TD ALIGN="LEFT">time of day</TD>
</TR>
<TR><TH ALIGN="LEFT"><B>text</B></TH>
<TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">arbitrary length text (up to 8k for <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> 7)</TD>
</TR>
<TR><TD ALIGN="LEFT">timetz</TD>
<TD ALIGN="LEFT">time with time zone</TD>
<TD ALIGN="LEFT">time of day, including time zone</TD>
</TR>
<TR><TH ALIGN="LEFT"><B>timestamp</B></TH>
<TD ALIGN="LEFT">timestamp with time zone</TD>
<TD ALIGN="LEFT">accurate high range, high precision date/time with zone</TD>
</TR>
<TR><TD ALIGN="LEFT">varchar(n)</TD>
<TD ALIGN="LEFT">character varying(n)</TD>
<TD ALIGN="LEFT">variable-length character string</TD>
</TR>
</TABLE>

<P>

<H2><A NAME="SECTION004162000000000000000">
38.6.2 Listing a table</A>
</H2>

<P>
The <TT>
<FONT COLOR="#0000ff">SELECT</FONT></TT> statement is the most widely used statement in SQL. It
returns data from tables and can do searches:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>finance=#&nbsp;<font color="navy"><B>SELECT&nbsp;*&nbsp;FROM&nbsp;PEOPLE&#059;</B></font></code><br>
<code>&nbsp;name&nbsp;|&nbsp;gender&nbsp;|&nbsp;address&nbsp;</code><br>
<code>------+--------+---------</code><br>
<code>(0&nbsp;rows)</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004163000000000000000">
38.6.3 Adding a column</A>
</H2>

<P>
The <TT>
<FONT COLOR="#0000ff">ALTER</FONT></TT> statement changes something:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>finance=#&nbsp;<font color="navy"><B>ALTER&nbsp;TABLE&nbsp;people&nbsp;ADD&nbsp;COLUMN&nbsp;phone&nbsp;text&#059;</B></font></code><br>
<code>ALTER</code><br>
<code>finance=#&nbsp;<font color="navy"><B>SELECT&nbsp;*&nbsp;FROM&nbsp;people&#059;</B></font></code><br>
<code>&nbsp;name&nbsp;|&nbsp;gender&nbsp;|&nbsp;address&nbsp;|&nbsp;phone&nbsp;</code><br>
<code>------+--------+---------+-------</code><br>
<code>(0&nbsp;rows)</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004164000000000000000">
38.6.4 Deleting (dropping) a column</A>
</H2>

<P>
You cannot drop columns in <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT>; you must
create a new table from the old table without the column.
How to do this will become obvious further on.

<P>

<H2><A NAME="SECTION004165000000000000000">
38.6.5 Deleting (dropping) a table</A>
</H2>

<P>
Use the <TT>
<FONT COLOR="#0000ff">DROP</FONT></TT> command to delete most things:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>DROP&nbsp;TABLE&nbsp;people&#059;</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004166000000000000000">
38.6.6 Inserting rows, ``object relational''</A>
</H2>

<P>
Insert a row with (you can continue typing over multiple lines):

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>finance=#&nbsp;<font color="navy"><B>INSERT&nbsp;INTO&nbsp;people&nbsp;(name,&nbsp;gender,&nbsp;address,&nbsp;phone)</B></font></code><br>
<code>finance-#&nbsp;<font color="navy"><B>VALUES&nbsp;(&#39;Paul&nbsp;Sheer&#39;,&nbsp;true,&nbsp;&#39;Earth&#39;,&nbsp;&#39;7617224&#39;)&#059;</B></font></code><br>
<code>INSERT&nbsp;20280&nbsp;1</code><br>
</FONT></TD></TR></TABLE><P>
The return value is the <TT>
<FONT COLOR="#0000ff">oid</FONT></TT> (<I>Object ID</I>) of the row.
<TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> is an
<I>Object Relational</I> database. This term gets thrown
around a lot, but it really means that every table has a hidden column called the
<TT>
<FONT COLOR="#0000ff">oid</FONT></TT> column that stores a unique identity number for each row. The
identity number is unique across the entire database. Because it uniquely
identifies rows across all tables, you could call the rows ``objects.''
The <TT>
<FONT COLOR="#0000ff">oid</FONT></TT> feature is most useful to programmers.

<P>

<H2><A NAME="SECTION004167000000000000000">
38.6.7 Locating rows</A>
</H2>

<P>
The <TT>
<FONT COLOR="#0000ff">oid</FONT></TT> of the above row is <TT>
<FONT COLOR="#0000ff">20280</FONT></TT>. To find it:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>finance=#&nbsp;<font color="navy"><B>SELECT&nbsp;*&nbsp;FROM&nbsp;people&nbsp;WHERE&nbsp;oid&nbsp;=&nbsp;20280&#059;</B></font></code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;gender&nbsp;|&nbsp;address&nbsp;|&nbsp;&nbsp;phone&nbsp;&nbsp;</code><br>
<code>------------+--------+---------+---------</code><br>
<code>&nbsp;Paul&nbsp;Sheer&nbsp;|&nbsp;true&nbsp;&nbsp;&nbsp;|&nbsp;Earth&nbsp;&nbsp;&nbsp;|&nbsp;7617224</code><br>
<code>(1&nbsp;row)</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004168000000000000000">
38.6.8 Listing selected columns, and the <TT>
<FONT COLOR="#0000ff">oid</FONT></TT> column</A>
</H2>

<P>
To list selected columns, try:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>SELECT&nbsp;name,&nbsp;address&nbsp;FROM&nbsp;people&#059;</code><br>
<code>SELECT&nbsp;oid,&nbsp;name&nbsp;FROM&nbsp;people&#059;</code><br>
<code>SELECT&nbsp;oid,&nbsp;*&nbsp;FROM&nbsp;people&#059;</code><br>
</FONT></TD></TR></TABLE><P>
It should be obvious what these do.

<P>

<H2><A NAME="SECTION004169000000000000000">
38.6.9 Creating tables from other tables</A>
</H2>

<P>
Here we create a new table and fill two of its columns from
columns in our original table:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>finance=#&nbsp;<font color="navy"><B>CREATE&nbsp;TABLE&nbsp;sitings&nbsp;(person&nbsp;text,&nbsp;place&nbsp;text,&nbsp;siting&nbsp;text)&#059;</B></font></code><br>
<code>CREATE</code><br>
<code>finance=#&nbsp;<font color="navy"><B>INSERT&nbsp;INTO&nbsp;sitings&nbsp;(person,&nbsp;place)&nbsp;SELECT&nbsp;name,&nbsp;address&nbsp;FROM&nbsp;people&#059;</B></font></code><br>
<code>INSERT&nbsp;20324&nbsp;1</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION0041610000000000000000">
38.6.10 Deleting rows</A>
</H2>

<P>
Delete selected rows, like

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>finance=#&nbsp;<font color="navy"><B>DELETE&nbsp;FROM&nbsp;people&nbsp;WHERE&nbsp;name&nbsp;=&nbsp;&#39;Paul&nbsp;Sheer&#39;&#059;</B></font></code><br>
<code>DELETE&nbsp;1</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION0041611000000000000000">
38.6.11 Searches</A>
</H2>

<P>
About the simplest search you can do with <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> is

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>SELECT&nbsp;*&nbsp;FROM&nbsp;people&nbsp;WHERE&nbsp;name&nbsp;LIKE&nbsp;'%Paul%'&#059;</code><br>
</FONT></TD></TR></TABLE><P>
Or alternatively, case insensitively and across the <TT>
<FONT COLOR="#0000ff">address</FONT></TT> field:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>SELECT&nbsp;*&nbsp;FROM&nbsp;people&nbsp;WHERE&nbsp;lower(name)&nbsp;LIKE&nbsp;'%paul%'&nbsp;OR&nbsp;lower(address)&nbsp;LIKE&nbsp;'%paul%'&#059;</code><br>
</FONT></TD></TR></TABLE><P>
The first <TT>
<FONT COLOR="#0000ff">%</FONT></TT> is a wildcard that matches any length of text
before the <TT>
<FONT COLOR="#0000ff">Paul</FONT></TT>, and the final <TT>
<FONT COLOR="#0000ff">%</FONT></TT> matches any text after.
It is the usual way of searching with a field, instead of trying to get an
exact match.

<P>
The possibilities are endless:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>SELECT&nbsp;*&nbsp;FROM&nbsp;people&nbsp;WHERE&nbsp;gender&nbsp;=&nbsp;true&nbsp;AND&nbsp;phone&nbsp;=&nbsp;'8765432'&#059;</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION0041612000000000000000">
38.6.12 Migrating from another database; dumping and restoring tables as plain text</A>
</H2>Migrating from another database;
<BR>
dumping and restoring tables as plain text

<P>
The command

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>COPY&nbsp;people&nbsp;TO&nbsp;'/tmp/people.txt'&#059;</code><br>
</FONT></TD></TR></TABLE><P>
dumps the <TT>
<FONT COLOR="#0000ff">people</FONT></TT> table to <TT>
<FONT COLOR="#0000ff">/tmp/people.txt</FONT></TT>,
as tab delimeter, newline terminated rows.

<P>
The command,

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>COPY&nbsp;people&nbsp;WITH&nbsp;OIDS&nbsp;TO&nbsp;'/tmp/people.txt'&nbsp;DELIMITERS&nbsp;','&nbsp;WITH&nbsp;NULL&nbsp;AS&nbsp;'(null)'&#059;&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>
dumps the <TT>
<FONT COLOR="#0000ff">people</FONT></TT> table to <TT>
<FONT COLOR="#0000ff">/tmp/people.txt</FONT></TT>,
as comma-delimited, newline-terminated rows, with <TT>
<FONT COLOR="#0000ff">(null)</FONT></TT>
whereever there is supposed to be a zero byte.

<P>
Similarly, the command

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>COPY&nbsp;people&nbsp;FROM&nbsp;'/tmp/people.txt'&#059;</code><br>
</FONT></TD></TR></TABLE><P>
inserts into the table <TT>
<FONT COLOR="#0000ff">people</FONT></TT> the rows from <TT>
<FONT COLOR="#0000ff">/tmp/people.txt</FONT></TT>.
It assumes one line per row and the tab character between each
cell.

<P>
<I>Note that unprintable characters are escaped with a
backslash <TT>
<FONT COLOR="#0000ff">&nbsp;&#92;&nbsp;</FONT></TT> in both output and the interpretation of input.</I>

<P>
Hence, it is simple to get data from another database. You just have to work
out how to dump it as text.

<P>

<H2><A NAME="SECTION0041613000000000000000">
38.6.13 Dumping an entire database</A>
</H2>

<P>
The command <TT>
<FONT COLOR="#0000ff">pg_dump&nbsp;&lt;database-name&gt;</FONT></TT>
dumps your entire database as plain
text. If you try this on your database, you will notice that the output contains
straightforward SQL commands. Your database can be reconstructed from scratch
by piping this output through stdin of the <TT>
<FONT COLOR="#0000ff">psql</FONT></TT> command. In other words,
<TT>
<FONT COLOR="#0000ff">pg_dump</FONT></TT> merely produces the exact sequence of SQL commands necessary to
reproduce your database.

<P>
Sometimes a new version of <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> will switch to a database file format
that is incompatible with your previous files. In this case it is prudent to do
a <TT>
<FONT COLOR="#0000ff">pg_dumpall</FONT></TT> (and
carefully save the output) before upgrading. The output
of <TT>
<FONT COLOR="#0000ff">pg_dumpall</FONT></TT> can once again be fed through stdin of the <TT>
<FONT COLOR="#0000ff">psql</FONT></TT> command
and contains all the commands necessary to reconstruct all your databases as well
as all the data they contain.

<P>

<H2><A NAME="SECTION0041614000000000000000">
38.6.14 More advanced searches</A>
</H2>

<P>
When you have some very complicated set of tables in front of you,
you are likely to want to merge, select, search, and cross-reference
them in innumerable ways to get the information you want out of
them.

<P>
Being able to efficiently query the database in this way
is the true power of SQL, but this is about as far as I am going to go
here. The <TT>
<FONT COLOR="#0000ff">postgres</FONT></TT> documentation cited above contains
details on everything you can do.

<P>

<H1><A NAME="SECTION004170000000000000000">
38.7 Real Database Projects</A>
</H1>

<P>
University Computer Science majors learn about subjects like
<I>Entity Modeling</I>, <I>Relational Algebra</I>, and
<I>Database Normalization</I>.
These are formal academic methods according to which good databases
are designed. You should not venture into constructing any complex
database without these methods.

<P>
Most university book shops will have academic books that teach formal
database theory.

<P>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2707"
  HREF="node42.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2703"
  HREF="rute.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2697"
  HREF="node40.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2705"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2708"
  HREF="node42.html">39. smbd  </A>
<B> Up:</B> <A NAME="tex2html2704"
  HREF="rute.html">rute</A>
<B> Previous:</B> <A NAME="tex2html2698"
  HREF="node40.html">37. crond and atd</A>
 &nbsp <B>  <A NAME="tex2html2706"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->

</BODY>
</HTML>
