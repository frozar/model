<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.2beta8 (1.46)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>43. The X Window System</TITLE>
<META NAME="description" CONTENT="43. The X Window System">
<META NAME="keywords" CONTENT="rute">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.2beta8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="rute.css">

<LINK REL="next" HREF="node47.html">
<LINK REL="previous" HREF="node45.html">
<LINK REL="up" HREF="rute.html">
<LINK REL="next" HREF="node47.html">
</HEAD>

<BODY BGCOLOR=#FFFFFF >
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TR><TD align=left bgcolor="#000000">
<FONT COLOR=white>
&nbsp;<A HREF="http://www.icon.co.za/~psheer/rute-purchase.html"><FONT COLOR=white>Purchase</FONT></A>&nbsp;
</FONT>
</TD><TD align=center bgcolor="#000000">
<FONT COLOR=white>
Copyright&nbsp;&#169;&nbsp;2002&nbsp;Paul Sheer. <A HREF="copying.html"><FONT COLOR=white>Click here for copying permissions.</FONT></A>
</FONT>
</TD><TD align=right bgcolor="#000000">
<FONT COLOR=white>
&nbsp;<A HREF="http://www.icon.co.za/~psheer/rute-home.html"><FONT COLOR=white>Home</FONT></A>&nbsp;
</FONT>
</TD></TR>
<TR><TD colspan=2 align=left bgcolor="#ECEBF4">
<IMG SRC="va-btn-small-light-60.png">
</TD><TD align=right bgcolor="#ECEBF4">
<IMG SRC="sflogo2-steel-60.png">
</TD></TR>
</TABLE><BR>

<!--Navigation Panel-->
<A NAME="tex2html2863"
  HREF="node47.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2859"
  HREF="rute.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2853"
  HREF="node45.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2861"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2864"
  HREF="node47.html">44. UNIX Security</A>
<B> Up:</B> <A NAME="tex2html2860"
  HREF="rute.html">rute</A>
<B> Previous:</B> <A NAME="tex2html2854"
  HREF="node45.html">42. The LINUX Kernel</A>
 &nbsp <B>  <A NAME="tex2html2862"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html2865"
  HREF="#SECTION004610000000000000000">43.1 The X Protocol</A>
<LI><A NAME="tex2html2866"
  HREF="#SECTION004620000000000000000">43.2 Widget Libraries and Desktops</A>
<UL>
<LI><A NAME="tex2html2867"
  HREF="#SECTION004621000000000000000">43.2.1 Background</A>
<LI><A NAME="tex2html2868"
  HREF="#SECTION004622000000000000000">43.2.2 Qt</A>
<LI><A NAME="tex2html2869"
  HREF="#SECTION004623000000000000000">43.2.3 Gtk</A>
<LI><A NAME="tex2html2870"
  HREF="#SECTION004624000000000000000">43.2.4 GNUStep</A>
</UL>
<LI><A NAME="tex2html2871"
  HREF="#SECTION004630000000000000000">43.3 XFree86</A>
<UL>
<LI><A NAME="tex2html2872"
  HREF="#SECTION004631000000000000000">43.3.1 Running X and key conventions</A>
<LI><A NAME="tex2html2873"
  HREF="#SECTION004632000000000000000">43.3.2 Running X utilities</A>
<LI><A NAME="tex2html2874"
  HREF="#SECTION004633000000000000000">43.3.3 Running two X sessions</A>
<LI><A NAME="tex2html2875"
  HREF="#SECTION004634000000000000000">43.3.4 Running a window manager</A>
<LI><A NAME="tex2html2876"
  HREF="#SECTION004635000000000000000">43.3.5 X access control and remote display</A>
<LI><A NAME="tex2html2877"
  HREF="#SECTION004636000000000000000">43.3.6 X selections, cutting, and pasting</A>
</UL>
<LI><A NAME="tex2html2878"
  HREF="#SECTION004640000000000000000">43.4 The X Distribution</A>
<LI><A NAME="tex2html2879"
  HREF="#SECTION004650000000000000000">43.5 X Documentation</A>
<UL>
<LI><A NAME="tex2html2880"
  HREF="#SECTION004651000000000000000">43.5.1 Programming</A>
<LI><A NAME="tex2html2881"
  HREF="#SECTION004652000000000000000">43.5.2 Configuration documentation</A>
<LI><A NAME="tex2html2882"
  HREF="#SECTION004653000000000000000">43.5.3 XFree86 web site</A>
</UL>
<LI><A NAME="tex2html2883"
  HREF="#SECTION004660000000000000000">43.6 X Configuration</A>
<UL>
<LI><A NAME="tex2html2884"
  HREF="#SECTION004661000000000000000">43.6.1 Simple 16-color X server</A>
<LI><A NAME="tex2html2885"
  HREF="#SECTION004662000000000000000">43.6.2 Plug-and-Play operation</A>
<LI><A NAME="tex2html2886"
  HREF="#SECTION004663000000000000000">43.6.3 Proper X configuration</A>
</UL>
<LI><A NAME="tex2html2887"
  HREF="#SECTION004670000000000000000">43.7 Visuals</A>
<LI><A NAME="tex2html2888"
  HREF="#SECTION004680000000000000000">43.8 The <TT>
<FONT COLOR="#0000ff">startx</FONT></TT> and <TT>
<FONT COLOR="#0000ff">xinit</FONT></TT> Commands</A>
<LI><A NAME="tex2html2889"
  HREF="#SECTION004690000000000000000">43.9 Login Screen</A>
<LI><A NAME="tex2html2890"
  HREF="#SECTION0046100000000000000000">43.10 X Font Naming Conventions</A>
<LI><A NAME="tex2html2891"
  HREF="#SECTION0046110000000000000000">43.11 Font Configuration</A>
<LI><A NAME="tex2html2892"
  HREF="#SECTION0046120000000000000000">43.12 The Font Server</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION004600000000000000000">
43. The X Window System</A>
</H1>

<P>
<A NAME="chap:x"></A>
<P>
Before <I>The X Window System</I> (from now on called <B>X</B>), U<SMALL>NIX</SMALL> was terminal
based and had no proper graphical environment, sometimes called a
<I>GUI</I>. <FONT COLOR="#ffa500">[Graphical User Interface.]</FONT> <B>X</B> was designed to fulfill
that need and to incorporate into graphics all the
power of a networked computer.

<P>
&nbsp;<B>X</B> was developed in 1985 at the Massachusetts Institute of
Technology by the X Consortium and is now owned by the
Open Software Foundation (OSF). It comprises over 2 million
lines of <B>C</B> code that run on every variant of U<SMALL>NIX</SMALL>.

<P>
You might imagine that allowing an application
to put graphics on a screen involves nothing more than creating a user library
that can perform various graphical functions like line drawing, font drawing,
and so on. To understand why <B>X</B> is more than merely this, consider the example
of character terminal applications: these are programs that run on a <I>remote</I> machine while
displaying to a character terminal and receiving feedback (keystrokes)
from that character terminal. There are two distinct entities at work--the
application and the user's character terminal display;
these two are connected by some kind of serial or network link.
Now what if the character terminal could display windows
and other graphics (in addition to text), while giving feedback
to the application with a mouse (as well as a keyboard)? This is what <B>X</B> achieves.

<P>

<H1><A NAME="SECTION004610000000000000000">
43.1 The X Protocol</A>
</H1>

<P>
<A NAME="sec:thexprotp"></A>
<P>
&nbsp;<B>X</B> is a protocol of commands that are sent and received between an application and
a special graphical terminal called an <I>X Server</I> (from now on called the
<I>server</I>). <FONT COLOR="#ffa500">[The word ``server'' is
confusing, because there are lots of <B>X</B> servers for each client machine, and
the user sits on the server side. This is in the opposite sense to what we usually
mean by a server.]</FONT> How the server actually draws graphics on the hardware is irrelevant
to the developer; all the application needs to know is that if it sends a particular sequence
of bytes down the TCP/IP link, the server will interpret them to mean that a
line, circle, font, box, or other graphics entity should be drawn on its screen.
In the other direction, the application needs to know that particular sequences
of bytes mean that a keyboard key was pressed or that a mouse has moved.
This TCP communication is called the <I>X protocol</I>.

<P>
When you are using <B>X</B>, you will probably not be aware that this interaction is
happening. The server and the application might very well be on the same machine.
The real power of <B>X</B> is evident when they are <I>not</I> on the same machine.
Consider, for example, that 20 users can be logged in to a single machine and be
running different programs that are displayed on 20 different remote <B>X</B> servers.
It is as though a single machine was given multiple screens and keyboards. It is
for this reason that <B>X</B> is called a
<I>network transparent windowing system</I>.

<P>
The developer of a graphical application can then dispense with 
having to know anything about the graphics hardware itself
(consider DOS applications where each had to build in support
for many different graphics cards), and that developer can also dispense with
having to know what machine the graphics will be displayed on.

<P>
The precise program that performs this miracle is
<TT>
<FONT COLOR="#0000ff">/usr/X11/bin/X</FONT></TT>. A
typical sequence of events to get a graphical program to run is as follows. (This
is an illustration. In practice, numerous utilities perform these functions
in a more generalized and user-friendly way.)

<P>

<OL>
<LI>The program <TT>
<FONT COLOR="#0000ff">/usr/X11R6/bin/X</FONT></TT> is started and run in the background. <B>X</B>
will detect through configuration files
(<TT>
<FONT COLOR="#0000ff">/etc/XF86Config</FONT></TT> or
<TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT>
on L<SMALL>INUX</SMALL>), and possibly through hardware autodetection, what graphics hardware
(like a graphics add-on card) is available. It then initializes that hardware
into graphics mode.
</LI>
<LI>It then opens a socket connection to listen for incoming requests on a
specific port (usually TCP port 6000), being ready to
interpret any connection as a stream of graphics commands.
</LI>
<LI>An application is started on the local machine or on a remote machine.
<I>All</I> <B>X</B> programs have a configuration option by which you can specify (with
an IP address or host name) where you would like the program to connect, that is,
on which server you would like the resulting output to display.
</LI>
<LI>The application opens a socket connection
to the specified server over the network.
This is the most frequent source of errors. Applications fail to connect to
a server because the server is not running, because the server was specified
incorrectly, or because the server refuses a connection from an untrusted host.
</LI>
<LI>The application begins sending <B>X</B> protocol requests, waiting for them
to be processed, and then receiving and processing the resulting <B>X</B>
protocol responses.
From the user's point of view, the application now appears to be ``running''
on the server's display.
</LI>
</OL>

<P>
Communication between the application and the server is somewhat more complex
than the mere drawing of lines and rectangles and reporting of mouse and key
events. The server must be able to handle multiple applications connecting
from multiple machines, and these applications may interact with
each other (think of <I>cut</I> and <I>paste</I> operations between applications
that are actually running on different machines.) Some examples of the fundamental
<I>X Protocol</I> requests that an application can make to a server
are the following:

<P>
<DL>
<DT><STRONG>``Create&nbsp;Window''</STRONG></DT>
<DD>A window is a logical rectangle on the screen, owned by particular
application, into which graphics can be drawn.
</DD>
<DT><STRONG>``List&nbsp;Fonts''</STRONG></DT>
<DD>To list fonts available to the application.
</DD>
<DT><STRONG>``Allocate&nbsp;Color''</STRONG></DT>
<DD>Will define a color of the specified name or RGB value for
later use.
</DD>
<DT><STRONG>``Create&nbsp;Graphics&nbsp;Context''</STRONG></DT>
<DD>A Graphics Context
is a definition of how graphics
are to be drawn within a window--for example, the default background color, line style,
clipping, and font.
</DD>
<DT><STRONG>``Get&nbsp;Selection&nbsp;Owner''</STRONG></DT>
<DD>Find which window (possibly belonging to another application)
owns the selection (i.e., a ``cut'' of text).
</DD>
</DL>
In return, the server replies by sending <I>events</I> back to the application.
The application is required to constantly poll the server for these events.
Besides events detailing the user's mouse and keyboard input, there are other
events, for example, that indicate that a window has been <I>exposed</I> (a window
on top of another window was moved, thus exposing the window beneath
it. The application should then send the appropriate commands needed to
redraw the graphics within the window now on top). Another example is a notification
to request a <I>paste</I> from another application. The file
<TT>
<FONT COLOR="#0000ff">/usr/include/X11/Xproto.h</FONT></TT> contains the full list of <B>X</B> protocol requests
and events.

<P>
The programmer of an <B>X</B> application need not be directly
concerned with these requests. A high-level library handles the
details of the server interaction. This library is called the
<I>X Library</I>,
<TT>
<FONT COLOR="#0000ff">/usr/X11R6/lib/libX11.so.6</FONT></TT>.

<P>
One of the limitations of such a protocol is that developers are restricted to
the set of commands that have been defined. <B>X</B> overcame this problem by
making the protocol <I>extensible</I> <FONT COLOR="#ffa500">[Being able to add extensions and
enhancements without complicating or breaking compatibility.]</FONT> from the
start. These days there are extensions to <B>X</B> to allow, for example, the
display of 3D graphics on the server, the
interpretation of PostScript
commands, and many other capabilities that improve aesthetic
appeal and performance.
Each extension comes with a new group of <B>X</B> protocol requests and events,
as well as a programmers' library interface.

<P>
An example of a real <B>X</B> program follows. This is about the
simplest an <B>X</B> program is ever going to get. The program displays
a small XPM image file in a window and waits for a
key press or mouse click
before exiting. You can compile it with
<TT>
<FONT COLOR="#0000ff">gcc -o splash splash.c -lX11 -L/usr/X11R6/lib</FONT></TT>. (You can see
right away why there are few applications written directly in <B>X</B>.)
Notice that all <B>X</B> library functions
are prefixed by an <TT>
<FONT COLOR="#0000ff">X</FONT></TT>.

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>20</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>25</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>30</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>35</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>40</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>45</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>50</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>55</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>60</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>65</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>70</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>75</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>80</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>85</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>90</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>95</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>100</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>105</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>110</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>115</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>120</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>125</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>130</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>135</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>140</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>145</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>150</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>155</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>160</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>165</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>170</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>175</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>180</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>185</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>190</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>195</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>200</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>205</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>210</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>215</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>/*&nbsp;splash.c&nbsp;-&nbsp;display&nbsp;an&nbsp;image&nbsp;*/</code><br>
<code>&nbsp;</code><br>
<code>#include&nbsp;&#060;stdlib.h&#062;</code><br>
<code>#include&nbsp;&#060;stdio.h&#062;</code><br>
<code>#include&nbsp;&#060;string.h&#062;</code><br>
<code>&nbsp;</code><br>
<code>#include&nbsp;&#060;X11/Xlib.h&#062;</code><br>
<code>&nbsp;</code><br>
<code>/*&nbsp;XPM&nbsp;*/</code><br>
<code>static&nbsp;char&nbsp;*graham_splash[]&nbsp;=&nbsp;{</code><br>
<code>/*&nbsp;columns&nbsp;rows&nbsp;colors&nbsp;chars-per-pixel&nbsp;*/</code><br>
<code>"28&nbsp;32&nbsp;16&nbsp;1",</code><br>
<code>"&nbsp;&nbsp;c&nbsp;#34262e",&nbsp;".&nbsp;c&nbsp;#4c3236",&nbsp;"X&nbsp;c&nbsp;#673a39",&nbsp;"o&nbsp;c&nbsp;#543b44",</code><br>
<code>"O&nbsp;c&nbsp;#724e4e",&nbsp;"+&nbsp;c&nbsp;#6a5459",&nbsp;"@&nbsp;c&nbsp;#6c463c",&nbsp;"#&nbsp;c&nbsp;#92706c",</code><br>
<code>"$&nbsp;c&nbsp;#92685f",&nbsp;"%&nbsp;c&nbsp;#987e84",&nbsp;"&#038;&nbsp;c&nbsp;#aa857b",&nbsp;"n&nbsp;c&nbsp;#b2938f",</code><br>
<code>"=&nbsp;c&nbsp;#bca39b",&nbsp;"-&nbsp;c&nbsp;#a89391",&nbsp;"&#059;&nbsp;c&nbsp;#c4a49e",&nbsp;":&nbsp;c&nbsp;#c4a8a4",</code><br>
<code>/*&nbsp;pixels&nbsp;*/&nbsp;</code><br>
<code>"--%#%%nnnn#-nnnnnn=====&#059;&#059;=&#059;:",&nbsp;"--------n-nnnnnn=n==&#059;==&#059;=:&#059;:",</code><br>
<code>"----n--n--n-n-n-nn===:::::::",&nbsp;"-----&#038;------nn-n=n====::::::",</code><br>
<code>"----------------n===&#059;=::::::",&nbsp;"----%&#038;-%--%##%---n===:::::::",</code><br>
<code>"------%#%+++o+++----=:::::::",&nbsp;"--#-%%#+++oo.&nbsp;oo+#--=:::::::",</code><br>
<code>"-%%%%++++o..&nbsp;&nbsp;&nbsp;&nbsp;.++&#038;-==:::::",&nbsp;"---%#+#+++o.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oo+&#038;n=::::",</code><br>
<code>"--%###+$+++Oo.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o+#-:=::",&nbsp;"-&#038;%########++Oo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$-==:",</code><br>
<code>"####$$$+###$++OX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.O+&#038;==",&nbsp;"&#038;##$O+OXo+++$#+Oo.&nbsp;&nbsp;&nbsp;&nbsp;..O&#038;&#038;-",</code><br>
<code>"&#038;##+OX.....&nbsp;.oOO@@...&nbsp;&nbsp;o@+&#038;&#038;",&nbsp;"&#038;###$Oo.o++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..oX@oo@O$&#038;-",</code><br>
<code>"n###$$$$O$o&nbsp;...X..&nbsp;.XXX@$$$&#038;",&nbsp;"nnn##$$#$OO.&nbsp;.XX+@&nbsp;.XXX@$$#&#038;",</code><br>
<code>"nnn&#038;&#038;%####$OX.X$$@.&nbsp;&nbsp;XX$$$$&#038;",&nbsp;"nnnnn&#038;&#038;###$$$OX$$X..XXX@O$&#038;n",</code><br>
<code>"nnnnnn&#038;&#038;%###$$$$@XXXXX@O$&#038;&#038;n",&nbsp;"&#059;n=&#059;nnnn&#038;&#038;&#038;#$$$$$@@@@@@O$&#038;n&#059;",</code><br>
<code>"&#059;n&#059;=nn&#059;nnnn#&#038;$$$@X@O$@@$$&#038;n&#059;",&nbsp;"=n=&#059;&#059;&#059;n&#059;&#059;nn&#038;&#038;&#038;$$$$OO$$$$$&#038;&#059;&#059;",</code><br>
<code>"n&#059;=n&#059;&#059;=nn&#038;n&#038;&#038;&#038;&#038;&#038;&#038;$$$$$##&#038;&#038;n&#059;",&nbsp;"n&#059;=&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#038;&#038;&#038;n&#038;&#038;&#038;&#038;&#038;&#038;&#038;&#038;#&#038;n=&#059;",</code><br>
<code>"&#059;n&#059;n&#059;&#059;=n&#059;&#038;&#059;&#038;&#059;&#038;n&#038;&#038;&#038;&#038;&#038;&#038;&#038;#nn&#059;&#059;&#059;",&nbsp;"n&#059;=&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;n&#059;&#038;&#038;n&#038;&#038;&#038;n&#038;nnnn&#059;&#059;&#059;",</code><br>
<code>"n=&#059;&#059;:&#059;&#059;=&#059;&#059;nn&#059;&#038;n&#059;&#038;n&#038;nnnnnnn=&#059;",&nbsp;"nn&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;&#059;n&#038;nnnnnn===&#059;",</code><br>
<code>"=nn&#059;&#059;:&#059;n&#059;&#059;&#059;&#059;&#038;&#038;&#038;&#038;n&#038;&#038;nnnnnn&#059;=&#059;",&nbsp;"n====&#059;&#059;&#059;&#059;&#038;&#038;&#038;&#038;&#038;&#038;&#038;nnnnnnnnnn&#059;&#059;"</code><br>
<code>}&#059;</code><br>
<code>&nbsp;</code><br>
<code>int&nbsp;main&nbsp;(int&nbsp;argc,&nbsp;char&nbsp;**argv)</code><br>
<code>{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i,&nbsp;j,&nbsp;x,&nbsp;y,&nbsp;width,&nbsp;height,&nbsp;n_colors&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XSetWindowAttributes&nbsp;xswa&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XGCValues&nbsp;gcv&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Display&nbsp;*display&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;*display_name&nbsp;=&nbsp;0&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;depth&nbsp;=&nbsp;0&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Visual&nbsp;*visual&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Window&nbsp;window&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Pixmap&nbsp;pixmap&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XImage&nbsp;*image&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Colormap&nbsp;colormap&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;GC&nbsp;gc&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;bytes_per_pixel&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;colors[256]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;**p,&nbsp;*q&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;1&#059;&nbsp;i&nbsp;&#060;&nbsp;argc&nbsp;-&nbsp;1&#059;&nbsp;i++)</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(argv[i])</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!strcmp&nbsp;(argv[i],&nbsp;"-display"))</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_name&nbsp;=&nbsp;argv[i&nbsp;+&nbsp;1]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;display&nbsp;=&nbsp;XOpenDisplay&nbsp;(display_name)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!display)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;("splash:&nbsp;cannot&nbsp;open&nbsp;display\n")&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;(1)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;depth&nbsp;=&nbsp;DefaultDepth&nbsp;(display,&nbsp;DefaultScreen&nbsp;(display))&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;visual&nbsp;=&nbsp;DefaultVisual&nbsp;(display,&nbsp;DefaultScreen&nbsp;(display))&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;=&nbsp;(unsigned&nbsp;char&nbsp;**)&nbsp;graham_splash&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;=&nbsp;p[0]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;=&nbsp;atoi&nbsp;((const&nbsp;char&nbsp;*)&nbsp;q)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;=&nbsp;(unsigned&nbsp;char&nbsp;*)&nbsp;strchr&nbsp;(q,&nbsp;'&nbsp;')&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;=&nbsp;atoi&nbsp;((const&nbsp;char&nbsp;*)&nbsp;++q)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;=&nbsp;(unsigned&nbsp;char&nbsp;*)&nbsp;strchr&nbsp;(q,&nbsp;'&nbsp;')&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;n_colors&nbsp;=&nbsp;atoi&nbsp;((const&nbsp;char&nbsp;*)&nbsp;++q)&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;colormap&nbsp;=&nbsp;DefaultColormap&nbsp;(display,&nbsp;DefaultScreen&nbsp;(display))&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;pixmap&nbsp;=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XCreatePixmap&nbsp;(display,&nbsp;DefaultRootWindow&nbsp;(display),&nbsp;width,&nbsp;height,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;gc&nbsp;=&nbsp;XCreateGC&nbsp;(display,&nbsp;pixmap,&nbsp;0,&nbsp;&#038;gcv)&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XCreateImage&nbsp;(display,&nbsp;visual,&nbsp;depth,&nbsp;ZPixmap,&nbsp;0,&nbsp;0,&nbsp;width,&nbsp;height,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8,&nbsp;0)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;image-&#062;data&nbsp;=&nbsp;(char&nbsp;*)&nbsp;malloc&nbsp;(image-&#062;bytes_per_line&nbsp;*&nbsp;height&nbsp;+&nbsp;16)&#059;</code><br>
<code>&nbsp;</code><br>
<code>/*&nbsp;create&nbsp;color&nbsp;palette&nbsp;*/</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(p&nbsp;=&nbsp;p&nbsp;+&nbsp;1,&nbsp;i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;n_colors&#059;&nbsp;p++,&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XColor&nbsp;c,&nbsp;c1&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;*x&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;*p&nbsp;+&nbsp;4&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(*x&nbsp;==&nbsp;'#')&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;*h&nbsp;=&nbsp;(unsigned&nbsp;char&nbsp;*)&nbsp;"0123456789abcdef"&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.red&nbsp;=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((unsigned&nbsp;long)&nbsp;strchr&nbsp;(h,&nbsp;*x++)&nbsp;-</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned&nbsp;long)&nbsp;h)&nbsp;&#060;&#060;&nbsp;12&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.red&nbsp;|=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((unsigned&nbsp;long)&nbsp;strchr&nbsp;(h,&nbsp;*x++)&nbsp;-</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned&nbsp;long)&nbsp;h)&nbsp;&#060;&#060;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.green&nbsp;=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((unsigned&nbsp;long)&nbsp;strchr&nbsp;(h,&nbsp;*x++)&nbsp;-</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned&nbsp;long)&nbsp;h)&nbsp;&#060;&#060;&nbsp;12&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.green&nbsp;|=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((unsigned&nbsp;long)&nbsp;strchr&nbsp;(h,&nbsp;*x++)&nbsp;-</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned&nbsp;long)&nbsp;h)&nbsp;&#060;&#060;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.blue&nbsp;=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((unsigned&nbsp;long)&nbsp;strchr&nbsp;(h,&nbsp;*x++)&nbsp;-</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned&nbsp;long)&nbsp;h)&nbsp;&#060;&#060;&nbsp;12&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.blue&nbsp;|=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((unsigned&nbsp;long)&nbsp;strchr&nbsp;(h,&nbsp;*x++)&nbsp;-</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned&nbsp;long)&nbsp;h)&nbsp;&#060;&#060;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!XAllocColor&nbsp;(display,&nbsp;colormap,&nbsp;&#038;c))</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;("splash:&nbsp;could&nbsp;not&nbsp;allocate&nbsp;color&nbsp;cell\n")&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!XAllocNamedColor&nbsp;(display,&nbsp;colormap,&nbsp;(char&nbsp;*)&nbsp;x,&nbsp;&#038;c,&nbsp;&#038;c1))</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;("splash:&nbsp;could&nbsp;not&nbsp;allocate&nbsp;color&nbsp;cell\n")&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colors[(*p)[0]]&nbsp;=&nbsp;c.pixel&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;bytes_per_pixel&nbsp;=&nbsp;image-&#062;bytes_per_line&nbsp;/&nbsp;width&#059;</code><br>
<code>&nbsp;</code><br>
<code>/*&nbsp;cope&nbsp;with&nbsp;servers&nbsp;having&nbsp;different&nbsp;byte&nbsp;ordering&nbsp;and&nbsp;depths&nbsp;*/</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(j&nbsp;=&nbsp;0&#059;&nbsp;j&nbsp;&#060;&nbsp;height&#059;&nbsp;j++,&nbsp;p++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;char&nbsp;*r&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;=&nbsp;image-&#062;data&nbsp;+&nbsp;image-&#062;bytes_per_line&nbsp;*&nbsp;j&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r&nbsp;=&nbsp;*p&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(image-&#062;byte_order&nbsp;==&nbsp;MSBFirst)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(bytes_per_pixel)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;4:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;24&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;16&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;3:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;16&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;2:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;1:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(bytes_per_pixel)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;4:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;16&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;24&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;3:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;16&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;2:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;c&nbsp;&#062;&#062;&nbsp;8&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;1:</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(i&nbsp;=&nbsp;0&#059;&nbsp;i&nbsp;&#060;&nbsp;width&#059;&nbsp;i++)</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*q++&nbsp;=&nbsp;colors[*r++]&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XPutImage&nbsp;(display,&nbsp;pixmap,&nbsp;gc,&nbsp;image,&nbsp;0,&nbsp;0,&nbsp;0,&nbsp;0,&nbsp;width,&nbsp;height)&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;(DisplayWidth&nbsp;(display,&nbsp;DefaultScreen&nbsp;(display))&nbsp;-&nbsp;width)&nbsp;/&nbsp;2&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;(DisplayHeight&nbsp;(display,&nbsp;DefaultScreen&nbsp;(display))&nbsp;-&nbsp;height)&nbsp;/&nbsp;2&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;xswa.colormap&nbsp;=&nbsp;colormap&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;xswa.background_pixmap&nbsp;=&nbsp;pixmap&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;=</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XCreateWindow&nbsp;(display,&nbsp;DefaultRootWindow&nbsp;(display),&nbsp;x,&nbsp;y,&nbsp;width,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height,&nbsp;0,&nbsp;depth,&nbsp;InputOutput,&nbsp;visual,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CWColormap&nbsp;|&nbsp;CWBackPixmap,&nbsp;&#038;xswa)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XSelectInput&nbsp;(display,&nbsp;window,&nbsp;KeyPressMask&nbsp;|&nbsp;ButtonPressMask)&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XMapRaised&nbsp;(display,&nbsp;window)&#059;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(1)&nbsp;{</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XEvent&nbsp;event&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XNextEvent&nbsp;(display,&nbsp;&#038;event)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(event.xany.type&nbsp;==&nbsp;KeyPress&nbsp;||&nbsp;event.xany.type&nbsp;==&nbsp;ButtonPressMask)</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XUnmapWindow&nbsp;(display,&nbsp;window)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XCloseDisplay&nbsp;(display)&#059;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0&#059;</code><br>
<code>}</code><br>
</FONT></TD></TR></TABLE><P>

<P>
You can learn to program <B>X</B> from the documentation in the <B>X</B>
Window System sources--see below. The preceding program is said to be ``written
directly in X-lib'' because it links only with the lowest-level <B>X</B> library,
<TT>
<FONT COLOR="#0000ff">libX11.so</FONT></TT>. The advantage of developing
this way is that your program will
work across every variant of U<SMALL>NIX</SMALL> without any modifications. Notice also
that the program deals with any type of display device regardless of its
<I>resolution</I> (width&nbsp;<FONT face=helvetica>x</FONT>&nbsp;height or pixels-per-inch), color capacity,
or hardware design.

<P>

<H1><A NAME="SECTION004620000000000000000">
43.2 Widget Libraries and Desktops</A>
</H1>

<P>
To program in <B>X</B> is tedious. Therefore, most developers will use a
higher-level <I>widget library</I>. Most users of GUIs will be
familiar with <I>widgets</I>: buttons, menus, text input
boxes, and so on.
<B>X</B> programmers have to implement
these manually. The reason widgets were not built into the <B>X</B>
protocol is to allow different user interfaces to be built on top of
<B>X</B>. This flexibility makes <B>X</B> the enduring technology that it
is.

<P>

<H2><A NAME="SECTION004621000000000000000">
43.2.1 Background</A>
</H2>

<P>
The <I>X Toolkit</I> (<TT>
<FONT COLOR="#0000ff">libXt.so</FONT></TT>) is a
widget library that has
always come free with <B>X</B>. It is crude-looking by today's standards. It doesn't
feature 3D (shadowed) widgets, although it is comes free with <B>X</B>. <FONT COLOR="#ffa500">[The
excellent <TT>
<FONT COLOR="#0000ff">xfig</FONT></TT> application, an X Toolkit
application, was in
fact used to do the diagrams in this book.]</FONT><I>Motif</I> (<TT>
<FONT COLOR="#0000ff">libM.so</FONT></TT>) is a modern, full-featured widget library that had
become an industry standard. Motif is, however, bloated, slow, and
dependent on the <B>X</B> toolkit. It has always been an
expensive proprietary library.
<I>Tk</I> (tee-kay, <TT>
<FONT COLOR="#0000ff">libtk.so</FONT></TT>) is a library that is primarily used with
the <I>Tcl</I> scripting language. It was probably the first
platform-independent library (running on
Windows, all U<SMALL>NIX</SMALL>
variants, and the Apple Mac). It is, however, slow and has
limited features (this is progressively changing). Both Tcl
and Motif are not very elegant-looking.

<P>
Around 1996, we saw a lot of widget libraries
popping up with different licenses. <I>V</I>, <I>xforms</I>, and
<I>graphix</I> come to mind. (This was when I started to write
<I>coolwidgets</I>--my own widget library.) There was no
efficient, multipurpose, Free, and elegant-looking widget library
for U<SMALL>NIX</SMALL>. This was a situation that sucked and was retarding
Free software development.

<P>

<H2><A NAME="SECTION004622000000000000000">
43.2.2 Qt</A>
</H2>

<P>
At about that time, a new GUI library was released. It was called
<I>Qt</I> and was developed by <I>Troll Tech</I>.
It was not free, but
it was an outstanding technical accomplishment in that
it worked efficiently and cleanly on many different platforms. It was
shunned by some factions of the Free software community because it was
written in C++, <FONT COLOR="#ffa500">[Which is not considered to be
the standard development language by the Free Software Foundation
because it is not completely portable and possibly for other reasons.]</FONT>and was only free for noncommercial applications to link with.

<P>
Nevertheless, advocates of Qt went ahead and began producing the
outstanding KDE desktop project--a set of higher-level
development libraries, a window manager, and many core
applications that together make up the KDE Desktop. The licensing
issues with Qt have relaxed somewhat, and it is now available
under both the GPL and a proprietary license.

<P>

<H2><A NAME="SECTION004623000000000000000">
43.2.3 Gtk</A>
</H2>

<P>
At one point, before KDE was substantially complete, Qt
antagonists reasoned that since there were more lines of Qt
code than of KDE code, it would be better to develop a widget
library from scratch--but that is an aside. The Gtk widget library was written
especially for <TT>
<FONT COLOR="#0000ff">gimp</FONT></TT>
(<I>GNU Image Manipulation Program</I>), is GPL'd and
written entirely in <B>C</B> in low-level <B>X</B> calls (i.e., without the X Toolkit),
object oriented, fast, clean, extensible and
having a staggering array of features. It comprises
<I>Glib</I>, a library meant to extend standard <B>C</B>, providing
higher-level functions usually akin only to scripting languages,
like hash tables and lists; <I>Gdk</I>, a wrapper around raw <B>X</B>
Library to give GNU naming conventions to <B>X</B>, and to give a slightly
higher level interface to <B>X</B>; and the <I>Gtk</I> library itself.

<P>
Using Gtk, the <I>Gnome</I> project began, analogous to KDE,
but written entirely in <B>C</B>.

<P>

<H2><A NAME="SECTION004624000000000000000">
43.2.4 GNUStep</A>
</H2>

<P>
OpenStep (based on NeXTStep) was a GUI specification
published in 1994 by Sun Microsystems and NeXT Computers,
meant for building applications. It uses the
<I>Objective-C</I> language, which is an object-oriented
extension to <B>C</B>, that is arguably more suited to this
kind of development than is C++.

<P>
OpenStep requires a
<I>PostScript display engine</I> that is
analogous to the <B>X</B> protocol, but it is considered superior to <B>X</B>
because all graphics are independent of the pixel resolution of
the screen. In other words, high-resolution screens would
improve the picture quality without making the graphics smaller.

<P>
The GNUStep project has a working PostScript display engine
and is meant as a Free replacement to OpenStep.

<P>

<H1><A NAME="SECTION004630000000000000000">
43.3 XFree86</A>
</H1>

<P>
&nbsp;<B>X</B> was developed by the X Consortium as a standard as well as
a reference implementation of that standard. There are ports to
every platform that supports graphics. The current version of
the standard is 11 release 6 (hence the directory
<TT>
<FONT COLOR="#0000ff">/usr/X11R6/</FONT></TT>). There will probably never be another
version.

<P>
<EM>XFree86</EM> <I>&lt;<TT><A NAME="tex2html73"
  HREF="http://www.xfree86.org/">http://www.xfree86.org/</A></TT>&gt;</I> is a free port
of <B>X</B> that includes L<SMALL>INUX</SMALL> Intel machines among its supported
hardware. <B>X</B> has some peculiarities that are worth noting if you
are a Windows user, and XFree86 has some over those. XFree86 has
its own versioning system beneath the ``11R6'' as explained below.

<P>

<H2><A NAME="SECTION004631000000000000000">
43.3.1 Running X and key conventions</A>
</H2>

<P>

(See Section <A HREF="node46.html#sec:xsetup">43.6</A> for configuring <B>X</B>).

<P>
At a terminal prompt, you can type:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>X</code><br>
</FONT></TD></TR></TABLE><P>
to start <B>X</B> (provided <B>X</B> is not already running). If you have
configured <B>X</B> properly (including putting <TT>
<FONT COLOR="#0000ff">/usr/X11R6/bin</FONT></TT> in
your <TT>
<FONT COLOR="#0000ff">PATH</FONT></TT>), then this command will initiate the graphics hardware
and a black-and-white stippled background will appear with a single <B>X</B>
as the mouse cursor. Contrary to intuition, this means that <B>X</B> is
actually working properly.

<P>

<UL>
<LI><I>To kill the <B>X</B> server</I>, use the key combination
<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-ctrl.png" ALT="Ctrl">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-backspace.png" ALT="backspace">.
</LI>
<LI><I>To switch to the text console</I>, use
<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-ctrl.png" ALT="Ctrl">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-F1.png" ALT="F1"> ... <IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-ctrl.png" ALT="Ctrl">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-F6.png" ALT="F6">.
</LI>
<LI><I>To switch to the <B>X</B> console</I>, use
<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-F7.png" ALT="F7">. The seven common virtual consoles of
L<SMALL>INUX</SMALL> are 1-6 as text terminals, and 7 as an <B>X</B> terminal
(as explained in Section <A HREF="node5.html#sec:consoleswitching">2.7</A>).
</LI>
<LI><I>To zoom in or out of your <B>X</B> session</I>, use
<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-ctrl.png" ALT="Ctrl">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-plus.png" ALT="Plus"> and
<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-ctrl.png" ALT="Ctrl">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-minus.png" ALT="Minus">.
</LI>
</UL>

<P>

<H2><A NAME="SECTION004632000000000000000">
43.3.2 Running X utilities</A>
</H2>

<P>
<A NAME="sec:runningxutils"></A>
<P>

<TT>
<FONT COLOR="#0000ff">/usr/X11R6/bin/</FONT></TT> contains a large number of <B>X</B> utilities
that most other operating systems have based theirs on. Most of
these begin with an <TT>
<FONT COLOR="#0000ff">x</FONT></TT>. The basic XFree86 programs
are:
<IMG
 WIDTH="572" HEIGHT="300" ALIGN="BOTTOM" BORDER="0"
 SRC="img75.png"
 ALT="{\footnotesize\texttt{\protect\leavevmode{\color{blue}{
\begin{longtable}{l \ver...
...ninfo \\
fstobdf &amp; rstart &amp; xclock &amp; xgc &amp; xman &amp; xwud \\
\end{longtable}}}}}">
<BR>

<P>
To run an <B>X</B> program, you need to tell the program what remote
server to connect to. Most programs take the option <TT>
<FONT COLOR="#0000ff">-display</FONT></TT>
to specify the <B>X</B> server. With <B>X</B> running in your seventh
virtual console, type into your first virtual console:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xterm&nbsp;-display&nbsp;localhost:0.0</code><br>
</FONT></TD></TR></TABLE><P>
<TT>
<FONT COLOR="#0000ff">localhost</FONT></TT> refers to the machine on
which the <B>X</B> server is running--in this case, our own. The first
<TT>
<FONT COLOR="#0000ff">0</FONT></TT> means the screen we want to display on (<B>X</B>
supports multiple physical screens in its specification). The
second <TT>
<FONT COLOR="#0000ff">0</FONT></TT> refers to the <I>root window</I> we want
to display on. Consider a <I>multiheaded</I> <FONT COLOR="#ffa500">[For
example, two adjacent monitors that behave as one continuous
screen.]</FONT> display: we would like to specify which monitor the
application pops up on.

<P>
While <TT>
<FONT COLOR="#0000ff">xterm</FONT></TT> is running, switching to your <B>X</B> session
will reveal a character terminal where you can type commands.

<P>
A better way to specify the display is to use the <TT>
<FONT COLOR="#0000ff">DISPLAY</FONT></TT>
environment variable:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>DISPLAY=localhost:0.0</code><br>
<code>export&nbsp;DISPLAY</code><br>
</FONT></TD></TR></TABLE><P>
causes all subsequent <B>X</B> applications to display to
<TT>
<FONT COLOR="#0000ff">localhost:0.0</FONT></TT>, although a <TT>
<FONT COLOR="#0000ff">-display</FONT></TT> on the
command-line takes first priority.

<P>
The <B>X</B> utilities listed above are pretty ugly and unintuitive.
Try, for example, <TT>
<FONT COLOR="#0000ff">xclock</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">xcalc</FONT></TT>, and <TT>
<FONT COLOR="#0000ff">xedit</FONT></TT>.
For fun, try <TT>
<FONT COLOR="#0000ff">xbill</FONT></TT>. Also run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>rpm&nbsp;-qa&nbsp;|&nbsp;grep&nbsp;'^x'</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004633000000000000000">
43.3.3 Running two X sessions</A>
</H2>

<P>
You can start up a second <B>X</B> server on your machine. The command

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/X&nbsp;:1</code><br>
</FONT></TD></TR></TABLE><P>
starts up a second <B>X</B> session in the virtual console
8. You can switch to it by using <IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-ctrl.png" ALT="Ctrl">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-F8.png" ALT="F8"> or <IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-alt.png" ALT="Alt">-<IMG ALIGN=ABSMIDDLE BORDER=0 SRC="key-F8.png" ALT="F8">.

<P>
You can also start up a second <B>X</B> server <I>within</I> your
current <B>X</B> display:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/Xnest&nbsp;:1&nbsp;&#038;</code><br>
</FONT></TD></TR></TABLE><P>
A smaller <B>X</B> server that uses a subwindow as a display device
will be started. You can easily create a third <B>X</B> server within
that, <I>ad infinitum</I>.

<P>
To get an application to display to this second server, use,
as before,

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>DISPLAY=localhost:1.0</code><br>
<code>export&nbsp;DISPLAY</code><br>
<code>xterm</code><br>
</FONT></TD></TR></TABLE><P>
or

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xterm&nbsp;-display&nbsp;localhost:1.0</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004634000000000000000">
43.3.4 Running a window manager</A>
</H2>

<P>
<A NAME="sec:runwindowmanager"></A>
<P>
Manually starting <B>X</B> and then running an application is
<I>not</I> the way to use <B>X</B>. We want a window manager to run
applications properly. The best window manager available (sic) is
<TT>
<FONT COLOR="#0000ff">icewm</FONT></TT>, available from
<EM>icewm.cjb.net</EM> <I>&lt;<TT><A NAME="tex2html74"
  HREF="http://icewm.cjb.net/">http://icewm.cjb.net/</A></TT>&gt;</I>. Window managers
enclose each application inside a resizable bounding box and
give you the  <!-- MATH
 $\epsfbox{min.ps}$
 -->
<IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img76.png"
 ALT="\epsfbox{min.ps}">,
 <!-- MATH
 $\epsfbox{max.ps}$
 -->
<IMG
 WIDTH="18" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img77.png"
 ALT="\epsfbox{max.ps}">,
and  <!-- MATH
 $\epsfbox{close.ps}$
 -->
<IMG
 WIDTH="20" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img78.png"
 ALT="\epsfbox{close.ps}">
buttons, as well as possibly a
task bar and a <B><I>Start</I></B> button that you may be familiar with. A
window manager is just another <B>X</B> application that has the additional
task of managing the positions of basic <B>X</B> applications on your
desktop. Window managers executables are usually suffixed by a <TT>
<FONT COLOR="#0000ff">wm</FONT></TT>.
If you don't have <TT>
<FONT COLOR="#0000ff">icewm</FONT></TT>, the minimalist's <TT>
<FONT COLOR="#0000ff">twm</FONT></TT> window
manager will almost always be installed.

<P>

<UL>
<LI><I>Clicking on the background</I> is
common convention of <B>X</B> user interfaces.
Different mouse buttons may bring up a menu or a list of actions.
It is often analogous to a <B><I>Start</I></B> button.
</LI>
</UL>

<P>
An enormous amount of religious attention is given to
window managers. There are about 20 useful choices to date. Remember that any
beautiful graphics are going to irritate you after you sit in front of
the computer for a few hundred hours. You also don't want a window manager
that eats too much memory or uses too much space on the screen.

<P>

<H2><A NAME="SECTION004635000000000000000">
43.3.5 X access control and remote display</A>
</H2>

<P>
<A NAME="sec:xaccesscontr"></A>
<P>
The way we described an <B>X</B> server may leave you wondering if
anyone on the Internet can start an application on your display.
By default, <B>X</B> prohibits access from all machines except your
own. The <TT>
<FONT COLOR="#0000ff">xhost</FONT></TT> command enables access from particular machines.
For instance, you can run <TT>
<FONT COLOR="#0000ff">xhost&nbsp;+192.168.5.7</FONT></TT> to allow
that host to display to your machine. The command <TT>
<FONT COLOR="#0000ff">xhost&nbsp;+</FONT></TT>
completely disables access control. A typical procedure is the
running of an application on a remote machine to a local machine.
A sample session follows:

<P>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>[psheer@divinian]#&nbsp;<font color="navy"><B>xhost&nbsp;+192.168.3.2</B></font></code><br>
<code>192.168.3.2&nbsp;being&nbsp;added&nbsp;to&nbsp;access&nbsp;control&nbsp;list</code><br>
<code>[psheer@divinian]#&nbsp;<font color="navy"><B>ifconfig&nbsp;&#124;&nbsp;grep&nbsp;inet</B></font></code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet&nbsp;addr:192.168.3.1&nbsp;&nbsp;Bcast:192.168.3.255&nbsp;&nbsp;Mask:255.255.255.0</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet&nbsp;addr:127.0.0.1&nbsp;&nbsp;Mask:255.0.0.0</code><br>
<code>[psheer@divinian]#&nbsp;<font color="navy"><B>telnet&nbsp;192.168.3.2</B></font></code><br>
<code>Trying&nbsp;192.168.3.2...</code><br>
<code>Connected&nbsp;to&nbsp;192.168.3.2.</code><br>
<code>Escape&nbsp;character&nbsp;is&nbsp;'^]'.</code><br>
<code>Debian&nbsp;GNU/Linux&nbsp;2.2&nbsp;cericon</code><br>
<code>cericon&nbsp;login:&nbsp;<font color="navy"><B>psheer</B></font></code><br>
<code>Password:&nbsp;</code><br>
<code>Last&nbsp;login:&nbsp;Fri&nbsp;Jul&nbsp;13&nbsp;18:46:43&nbsp;2001&nbsp;from&nbsp;divinian&nbsp;on&nbsp;pts/1</code><br>
<code>[psheer@cericon]#&nbsp;<font color="navy"><B>export&nbsp;DISPLAY=192.168.3.1:0.0</B></font></code><br>
<code>[psheer@cericon]#&nbsp;<font color="navy"><B>nohup&nbsp;rxvt&nbsp;&#38;</B></font></code><br>
<code>[1]&nbsp;32573</code><br>
<code>nohup:&nbsp;appending&nbsp;output&nbsp;to&nbsp;'nohup.out'</code><br>
<code>[psheer@cericon]#&nbsp;<font color="navy"><B>exit</B></font></code><br>
<code>Connection&nbsp;closed&nbsp;by&nbsp;foreign&nbsp;host.</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION004636000000000000000">
43.3.6 X selections, cutting, and pasting</A>
</H2>

<P>
Start an <TT>
<FONT COLOR="#0000ff">xterm</FONT></TT> to demonstrate the following
mouse operations.

<P>
&nbsp;<B>X</B> predates the cut-and-paste conventions of Windows and the Mac.
<B>X</B> requires a three-button mouse,
although pushing the two outer
buttons simultaneously is equivalent to pushing the middle
button. <FONT COLOR="#ffa500">[That is, provided <B>X</B> has been configured for
this--see the <TT>
<FONT COLOR="#0000ff">Emulate3Buttons</FONT></TT>
option in the configuration file example below.]</FONT> Practice the following:

<P>

<UL>
<LI><I>Dragging the left mouse button</I> is the common way to <I>select</I>
text. This automatically places the highlighted text into a <I>cut buffer</I>,
also sometimes called the <I>clipboard</I>.

<P>
</LI>
<LI><I>Dragging the right mouse button</I> extends the selection, that is, enlarges
or reduces the selection.

<P>
</LI>
<LI><I>Clicking the middle mouse button</I> pastes the selection. Note that <B>X</B>
becomes virtually unusable without the capability of pasting in this way.
</LI>
</UL>

<P>
Modern Gtk and Qt applications have tried to retain compatibility
with these mouse conventions.

<P>

<H1><A NAME="SECTION004640000000000000000">
43.4 The X Distribution</A>
</H1>

<P>
The official <B>X</B> distribution comes as an enormous source
package available in <TT>
<FONT COLOR="#0000ff">tgz</FONT></TT> format at
<I><TT><A NAME="tex2html75"
  HREF="http://www.xfree86.org/">http://www.xfree86.org/</A></TT></I>. It is
traditionally packed as three <TT>
<FONT COLOR="#0000ff">tgz</FONT></TT> files to be unpacked
over each other--the total of the three is about 50 megabytes
compressed. This package has nothing really to do with the version
number <TT>
<FONT COLOR="#0000ff">X11R6</FONT></TT>--it is a subset of <TT>
<FONT COLOR="#0000ff">X11R6</FONT></TT>.

<P>
Downloading and installing the distribution is a major
undertaking, but you should do it if you are interested in <B>X</B>
development.

<P>
All U<SMALL>NIX</SMALL> distributions come with a compiled and (mostly)
configured <B>X</B> installation; hence, the official <B>X</B> distribution
should never be needed except by developers.

<P>

<H1><A NAME="SECTION004650000000000000000">
43.5 X Documentation</A>
</H1>

<P>
<A NAME="sec:xdoc"></A>The <B>X</B> Window System comes with tens of megabytes of documentation.

<P>

<H2><A NAME="SECTION004651000000000000000">
43.5.1 Programming</A>
</H2>

<P>
All the books describing all of the programming APIs
are included inside the <B>X</B> distribution. Most of these are of
specialized interest and will not be including in your distribution by
default--download the complete distribution if you want them. You
can then look inside <TT>
<FONT COLOR="#0000ff">xc/doc/specs</FONT></TT> (especially
<TT>
<FONT COLOR="#0000ff">xc/doc/specs/X11</FONT></TT>) to begin learning how to program
under <B>X</B>.

<P>
Debian also comes with the <TT>
<FONT COLOR="#0000ff">xbooks</FONT></TT> package, and RedHat with the
<TT>
<FONT COLOR="#0000ff">XFree86-doc</FONT></TT> packages.

<P>

<H2><A NAME="SECTION004652000000000000000">
43.5.2 Configuration documentation</A>
</H2>

<P>
Important to configuring <B>X</B> is the directory
<TT>
<FONT COLOR="#0000ff">/usr/X11R6/lib/X11/doc/</FONT></TT> or
<TT>
<FONT COLOR="#0000ff">/usr/share/doc/xserver-common/</FONT></TT>. It may
contain, for example,
<IMG
 WIDTH="585" HEIGHT="224" ALIGN="BOTTOM" BORDER="0"
 SRC="img79.png"
 ALT="{\footnotesize\texttt{\protect\leavevmode{\color{blue}{
\begin{longtable}{l \ver...
...\
README.Mach32.gz &amp; README.apm.gz &amp; README.mouse.gz &amp; \\
\end{longtable}}}}}">
<BR>
As you can see, there is documentation for each type of graphics card.
Learning how to configure <B>X</B> is a simple matter of reading the
<TT>
<FONT COLOR="#0000ff">QuickStart</FONT></TT> guide and then checking the specifics for your card.

<P>

<H2><A NAME="SECTION004653000000000000000">
43.5.3 XFree86 web site</A>
</H2>

<P>
Any missing documentation can be found on the
<EM>XFree86</EM> <I>&lt;<TT><A NAME="tex2html76"
  HREF="http://www.xfree86.org/">http://www.xfree86.org/</A></TT>&gt;</I> web site.

<P>
New graphics cards are coming out all the time.
<EM>XFree86</EM> <I>&lt;<TT><A NAME="tex2html77"
  HREF="http://www.xfree86.org/">http://www.xfree86.org/</A></TT>&gt;</I> contains FAQs about
cards and the latest binaries, should you not be able to get your card
working from the information below. Please always search the XFree86
web site for information on your card and for
newer <B>X</B> releases before reporting a problem.

<P>

<H1><A NAME="SECTION004660000000000000000">
43.6 X Configuration</A>
</H1>

<P>
<A NAME="sec:xsetup"></A>
<P>
Configuring <B>X</B> involves editing XFree86's configuration file
<TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT>. Such a file may have been produced at
installation time but will not always be correct. You will hence
frequently find yourself having to make manual changes to get <B>X</B>
running in full resolution.

<P>
Note that XFree86 has a slightly different configuration file format
for the new version 4. Differences are explained below.

<P>

<H2><A NAME="SECTION004661000000000000000">
43.6.1 Simple 16-color X server</A>
</H2>

<P>
The documentation discussed above is a lot to read. The simplest possible way to get
<B>X</B> working is to determine what mouse you have, and then create a file,
<TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT> (back up your original) containing the following.
Adjust the <TT>
<FONT COLOR="#0000ff">"Pointer"</FONT></TT> section for your correct <TT>
<FONT COLOR="#0000ff">Device</FONT></TT> and <TT>
<FONT COLOR="#0000ff">Protocol</FONT></TT>. If you
are running <B>X</B> version 3.3, you should also comment out the <TT>
<FONT COLOR="#0000ff">Driver&nbsp;"vga"</FONT></TT>
line. You may also have to switch the line containing <TT>
<FONT COLOR="#0000ff">25.175</FONT></TT> to <TT>
<FONT COLOR="#0000ff">28.32</FONT></TT>
for some laptop displays.

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>20</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>25</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>30</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>35</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>40</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>45</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>50</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"Files"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;RgbPath&nbsp;&nbsp;&nbsp;&nbsp;"/usr/X11R6/lib/X11/rgb"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;&nbsp;&nbsp;"/usr/X11R6/lib/X11/fonts/misc/"</code><br>
<code>EndSection</code><br>
<code>Section&nbsp;"ServerFlags"</code><br>
<code>EndSection</code><br>
<code>Section&nbsp;"Keyboard"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"Standard"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;AutoRepeat&nbsp;500&nbsp;5</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XkbDisable</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;XkbKeymap&nbsp;&nbsp;"xfree86(us)"</code><br>
<code>EndSection</code><br>
<code>Section&nbsp;"Pointer"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"Busmouse"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"IntelliMouse"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"Logitech"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"Microsoft"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"MMHitTab"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"MMSeries"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"MouseMan"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"MouseSystems"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Protocol&nbsp;&nbsp;&nbsp;"PS/2"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/dev/ttyS0"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/dev/psaux"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Emulate3Buttons</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Emulate3Timeout&nbsp;150</code><br>
<code>EndSection</code><br>
<code>Section&nbsp;"Monitor"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Identifier&nbsp;"My&nbsp;Monitor"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VendorName&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;ModelName&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;HorizSync&nbsp;&nbsp;31.5&nbsp;-&nbsp;57.0</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VertRefresh&nbsp;50-90</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Modeline&nbsp;"640x480"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28.32&nbsp;&nbsp;640&nbsp;&nbsp;664&nbsp;&nbsp;760&nbsp;&nbsp;800&nbsp;&nbsp;&nbsp;480&nbsp;&nbsp;491&nbsp;&nbsp;493&nbsp;&nbsp;525</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Modeline&nbsp;"640x480"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25.175&nbsp;640&nbsp;&nbsp;664&nbsp;&nbsp;760&nbsp;&nbsp;800&nbsp;&nbsp;&nbsp;480&nbsp;&nbsp;491&nbsp;&nbsp;493&nbsp;&nbsp;525</code><br>
<code>EndSection</code><br>
<code>Section&nbsp;"Device"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Identifier&nbsp;"Generic&nbsp;VGA"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VendorName&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;BoardName&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Chipset&nbsp;&nbsp;&nbsp;&nbsp;"generic"</code><br>
<code>#&nbsp;&nbsp;&nbsp;&nbsp;Driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"vga"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"vga"</code><br>
<code>EndSection</code><br>
<code>Section&nbsp;"Screen"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"vga16"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Generic&nbsp;VGA"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Monitor&nbsp;&nbsp;&nbsp;&nbsp;"My&nbsp;Monitor"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Subsection&nbsp;"Display"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Depth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Modes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"640x480"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Virtual&nbsp;&nbsp;&nbsp;640&nbsp;480</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;EndSubsection</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>

<P>
You can then start <B>X</B>. For XFree86 version 3.3, run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/XF86_VGA16&nbsp;-cc&nbsp;0</code><br>
</FONT></TD></TR></TABLE><P>
or for XFree86 version 4, run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/XFree86&nbsp;-cc&nbsp;0</code><br>
</FONT></TD></TR></TABLE><P>
Both of these will print out a status line containing
<TT>
<FONT COLOR="#0000ff">clocks:&nbsp;</FONT></TT>...<TT>
<FONT COLOR="#0000ff">&nbsp;&nbsp;</FONT></TT> confirming
whether your choice of <TT>
<FONT COLOR="#0000ff">25.175</FONT></TT>
was correct. <FONT COLOR="#ffa500">[This is the speed, in Megahertz, that pixels can come
from your card and is the only variable to configuring a 16-color display.]</FONT>
<P>
You should now have a working gray-level
display that is actually almost usable. It has the advantage that it <I>always</I> works.

<P>

<H2><A NAME="SECTION004662000000000000000">
43.6.2 Plug-and-Play operation</A>
</H2>

<P>
XFree86 version 4 has ``Plug-and-Play'' support. Simply run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/XFree86&nbsp;-configure</code><br>
</FONT></TD></TR></TABLE><P>
to produce a working <TT>
<FONT COLOR="#0000ff">XF86Config</FONT></TT> file.
You can copy this file to <TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT> and immediately
start running <B>X</B>. However, the file you get may be less than optimal.
Read on for detailed configuration.

<P>

<H2><A NAME="SECTION004663000000000000000">
43.6.3 Proper X configuration</A>
</H2>

<P>
<A NAME="sec:properxconfig"></A>
<P>
A simple and reliable way to get <B>X</B> working is given by the following steps
(if this fails, then you will have to read some of the documentation described
above). There is also a tool called <TT>
<FONT COLOR="#0000ff">Xconfigurator</FONT></TT>
which provides a user-friendly graphical front-end.
<DL COMPACT>
<DT>1.</DT>
<DD>Back up your <TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT> to <TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config.ORIG</FONT></TT>.
</DD>
<DT>2.</DT>
<DD>Run <TT>
<FONT COLOR="#0000ff">SuperProbe</FONT></TT> at the character console.
It will blank your screen and then
spit out what graphics card you have. Leave that information on your screen and switch
to a different virtual terminal. If <TT>
<FONT COLOR="#0000ff">SuperProbe</FONT></TT> fails to recognize your card,
it usually means that XFree86 will also fail.
</DD>
<DT>3.</DT>
<DD>Run <TT>
<FONT COLOR="#0000ff">xf86config</FONT></TT>. This is the official <B>X</B> configuration script.
Run through all the options, being very sure not to guess. You
can set your monitor to <TT>
<FONT COLOR="#0000ff">31.5, 35.15, 35.5; Super
VGA</FONT></TT>...<TT>
<FONT COLOR="#0000ff">&nbsp;</FONT></TT> if you have no other information to go on. Vertical
sync can be set to 50-90. Select your card from the
card database (check the <TT>
<FONT COLOR="#0000ff">SuperProbe</FONT></TT> output), and
check which <B>X</B> server the program recommends--this
will be one of <TT>
<FONT COLOR="#0000ff">XF86_SVGA</FONT></TT>, <TT>
<FONT COLOR="#0000ff">XF86_S3</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">XF86_S3V</FONT></TT>, etc.
Whether you ``set the symbolic link'' or not, or ``modify the /etc/X11/Xserver file''
is irrelevant. Note that you do not need a ``RAM&nbsp;DAC'' setting with
most modern PCI graphics cards. The same goes for the
``Clockchip setting.''
</DD>
<DT>4.</DT>
<DD>Do <I>not</I> run <B>X</B> at this point.
</DD>
<DT>5.</DT>
<DD>The <TT>
<FONT COLOR="#0000ff">xf86config</FONT></TT> command should have given you
an <I>example</I> <TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT> file to work with.
You need not run it again. You will notice that the file is divided into
sections, like
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"&#060;section-name&#062;"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&#060;config-line&#062;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&#060;config-line&#062;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&#060;config-line&#062;</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>Search for the <TT>
<FONT COLOR="#0000ff">"Monitor"</FONT></TT> section. A little further down
you will see lots of lines like:
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>#&nbsp;640x480&nbsp;@&nbsp;60&nbsp;Hz,&nbsp;31.5&nbsp;kHz&nbsp;hsync</code><br>
<code>Modeline&nbsp;"640x480"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25.175&nbsp;640&nbsp;&nbsp;664&nbsp;&nbsp;760&nbsp;&nbsp;800&nbsp;&nbsp;&nbsp;480&nbsp;&nbsp;491&nbsp;&nbsp;493&nbsp;&nbsp;525</code><br>
<code>#&nbsp;800x600&nbsp;@&nbsp;56&nbsp;Hz,&nbsp;35.15&nbsp;kHz&nbsp;hsync</code><br>
<code>ModeLine&nbsp;"800x600"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;800&nbsp;&nbsp;824&nbsp;&nbsp;896&nbsp;1024&nbsp;&nbsp;&nbsp;600&nbsp;&nbsp;601&nbsp;&nbsp;603&nbsp;&nbsp;625</code><br>
<code>#&nbsp;1024x768&nbsp;@&nbsp;87&nbsp;Hz&nbsp;interlaced,&nbsp;35.5&nbsp;kHz&nbsp;hsync</code><br>
<code>Modeline&nbsp;"1024x768"&nbsp;&nbsp;&nbsp;&nbsp;44.9&nbsp;&nbsp;1024&nbsp;1048&nbsp;1208&nbsp;1264&nbsp;&nbsp;&nbsp;768&nbsp;&nbsp;776&nbsp;&nbsp;784&nbsp;&nbsp;817&nbsp;Interlace</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>These are timing settings for different monitors and
screen resolutions. Choosing one that is too fast could blow an old
monitor but will usually give you a lot of garbled fuzz on your
screen. We are going to eliminate all but the three above; we do that
by commenting them out with <TT>
<FONT COLOR="#0000ff">#</FONT></TT> or deleting the lines
entirely. (You may want to back up the file first.) You could leave
it up to <B>X</B> to choose the correct <TT>
<FONT COLOR="#0000ff">Modeline</FONT></TT> to match the
capabilities of the monitor, but this doesn't always work. I always
like to explicitly choose a selection of <TT>
<FONT COLOR="#0000ff">Modeline</FONT></TT>s.

<P>
If you don't find modelines in your <TT>
<FONT COLOR="#0000ff">XF86Config</FONT></TT>
you can use this as your monitor section:
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-2"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>Section&nbsp;"Monitor"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Identifier&nbsp;&nbsp;"My&nbsp;Monitor"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VendorName&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;ModelName&nbsp;&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;HorizSync&nbsp;&nbsp;&nbsp;30-40</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VertRefresh&nbsp;50-90</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Modeline&nbsp;&nbsp;&nbsp;&nbsp;"320x200"&nbsp;&nbsp;&nbsp;12.588&nbsp;320&nbsp;&nbsp;336&nbsp;&nbsp;384&nbsp;&nbsp;400&nbsp;&nbsp;&nbsp;200&nbsp;&nbsp;204&nbsp;&nbsp;205&nbsp;&nbsp;225&nbsp;Doublescan</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;ModeLine&nbsp;&nbsp;&nbsp;&nbsp;"400x300"&nbsp;&nbsp;&nbsp;18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;400&nbsp;&nbsp;416&nbsp;&nbsp;448&nbsp;&nbsp;512&nbsp;&nbsp;&nbsp;300&nbsp;&nbsp;301&nbsp;&nbsp;302&nbsp;&nbsp;312&nbsp;Doublescan</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Modeline&nbsp;&nbsp;&nbsp;&nbsp;"512x384"&nbsp;&nbsp;&nbsp;20.160&nbsp;512&nbsp;&nbsp;528&nbsp;&nbsp;592&nbsp;&nbsp;640&nbsp;&nbsp;&nbsp;384&nbsp;&nbsp;385&nbsp;&nbsp;388&nbsp;&nbsp;404&nbsp;-HSync&nbsp;-VSync</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Modeline&nbsp;&nbsp;&nbsp;&nbsp;"640x480"&nbsp;&nbsp;&nbsp;25.175&nbsp;640&nbsp;&nbsp;664&nbsp;&nbsp;760&nbsp;&nbsp;800&nbsp;&nbsp;&nbsp;480&nbsp;&nbsp;491&nbsp;&nbsp;493&nbsp;&nbsp;525</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;ModeLine&nbsp;&nbsp;&nbsp;&nbsp;"800x600"&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;800&nbsp;&nbsp;824&nbsp;&nbsp;896&nbsp;1024&nbsp;&nbsp;&nbsp;600&nbsp;&nbsp;601&nbsp;&nbsp;603&nbsp;&nbsp;625</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Modeline&nbsp;&nbsp;&nbsp;&nbsp;"1024x768"&nbsp;&nbsp;44.9&nbsp;&nbsp;1024&nbsp;1048&nbsp;1208&nbsp;1264&nbsp;&nbsp;&nbsp;768&nbsp;&nbsp;776&nbsp;&nbsp;784&nbsp;&nbsp;817&nbsp;Interlace</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT>6.</DT>
<DD>Edit your <TT>
<FONT COLOR="#0000ff">"Device"</FONT></TT> section. You can make
it as follows for XFree86 version 3.3, and there should be only
one <TT>
<FONT COLOR="#0000ff">"Device"</FONT></TT> section.
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"Device"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Identifier&nbsp;&nbsp;"My&nbsp;Video&nbsp;Card"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VendorName&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;BoardName&nbsp;&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VideoRam&nbsp;&nbsp;&nbsp;&nbsp;4096</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>For XFree86 version 4, you must add the device
driver module. On my laptop, this is <TT>
<FONT COLOR="#0000ff">ati</FONT></TT>:
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"Device"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Identifier&nbsp;&nbsp;"My&nbsp;Video&nbsp;Card"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Driver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ati"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VendorName&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;BoardName&nbsp;&nbsp;&nbsp;"Unknown"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;VideoRam&nbsp;&nbsp;&nbsp;&nbsp;4096</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>Several options that can also be added to the
<TT>
<FONT COLOR="#0000ff">"Device"</FONT></TT> section to tune your card. Three possible lines are
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"no_accel"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sw_cursor"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"no_pixmap_cache"</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>which disable graphics hardware acceleration,
hardware cursor support, and video
memory pixmap caching, respectively. The last refers
to the use of the card's unused memory for intermediate operations. You
should try these options if there are glitches or artifacts in your
display.
</DD>
<DT>7.</DT>
<DD>Your <TT>
<FONT COLOR="#0000ff">"Screen"</FONT></TT> section should properly order the modes
specified in the <TT>
<FONT COLOR="#0000ff">"Monitor"</FONT></TT> section. It should use your single
<TT>
<FONT COLOR="#0000ff">"Device"</FONT></TT> section and single <TT>
<FONT COLOR="#0000ff">"Monitor"</FONT></TT> section, <TT>
<FONT COLOR="#0000ff">"My
Video Card"</FONT></TT> and <TT>
<FONT COLOR="#0000ff">"My Monitor"</FONT></TT>, respectively. Note that
XFree86 version 3.3 does not take a <TT>
<FONT COLOR="#0000ff">DefaultDepth</FONT></TT> option.
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>20</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>25</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"Screen"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Identifier&nbsp;&nbsp;"My&nbsp;Screen"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"My&nbsp;Video&nbsp;Card"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Monitor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"My&nbsp;Monitor"</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;DefaultDepth&nbsp;16</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Subsection&nbsp;"Display"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ViewPort&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Virtual&nbsp;1024&nbsp;768</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Depth&nbsp;&nbsp;&nbsp;16</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Modes&nbsp;&nbsp;&nbsp;"1024x768"&nbsp;"800x600"&nbsp;"640x480"&nbsp;"512x384"&nbsp;"400x300"&nbsp;"320x240"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;EndSubsection</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Subsection&nbsp;"Display"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ViewPort&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Virtual&nbsp;1024&nbsp;768</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Depth&nbsp;&nbsp;&nbsp;24</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Modes&nbsp;&nbsp;&nbsp;"1024x768"&nbsp;"800x600"&nbsp;"640x480"&nbsp;"512x384"&nbsp;"400x300"&nbsp;"320x240"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;EndSubsection</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Subsection&nbsp;"Display"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ViewPort&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Virtual&nbsp;1024&nbsp;768</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Depth&nbsp;&nbsp;&nbsp;8</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Modes&nbsp;&nbsp;&nbsp;"1024x768"&nbsp;"800x600"&nbsp;"640x480"&nbsp;"512x384"&nbsp;"400x300"&nbsp;"320x240"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;EndSubsection</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT>8.</DT>
<DD>At this point you need to run the <B>X</B> program itself. For 
XFree86 version 3.3, there will be a separate package for each
video card, as well as a separate binary with the appropriate
driver code statically compiled into it. These binaries are
of the form <TT>
<FONT COLOR="#0000ff">/usr/X11R6/bin/XF86_</FONT></TT><I>cardname</I>. The
relevant packages can be found with the command
<TT>
<FONT COLOR="#0000ff">dpkg&nbsp;-l&nbsp;'xserver-*'</FONT></TT> for Debian, and <TT>
<FONT COLOR="#0000ff">rpm&nbsp;-qa&nbsp;&#124;&nbsp;grep&nbsp;XFree86</FONT></TT>
for RedHat 6 (or <TT>
<FONT COLOR="#0000ff">RedHat/RPMS/XFree86-*</FONT></TT> on your CD-ROM).
You can then run
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/XFree86-&#060;card&#062;&nbsp;-bpp&nbsp;16</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>which also sets the display <I>depth</I> to 16, that is, the number of
<TT>
<FONT COLOR="#0000ff">b</FONT></TT>its <TT>
<FONT COLOR="#0000ff">p</FONT></TT>er <TT>
<FONT COLOR="#0000ff">p</FONT></TT>ixel, which translates to the number of colors.

<P>
For XFree86 version 4, card support is compiled as separate modules named
<TT>
<FONT COLOR="#0000ff">/usr/X11R6/lib/modules/drivers/</FONT></TT><I>cardname</I><TT>
<FONT COLOR="#0000ff">_drv.o</FONT></TT>.
A single binary executable <TT>
<FONT COLOR="#0000ff">/usr/X11R6/bin/XFree86</FONT></TT>
loads the appropriate module based on the
<TT>
<FONT COLOR="#0000ff">Driver&nbsp;"</FONT></TT><I>cardname</I><TT>
<FONT COLOR="#0000ff">"</FONT></TT> line in the <TT>
<FONT COLOR="#0000ff">"Device"</FONT></TT>
section. Having added this, you can run
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/usr/X11R6/bin/XFree86</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT></DT>
<DD>where the depth is set from the <TT>
<FONT COLOR="#0000ff">DefaultDepth&nbsp;16</FONT></TT>
line in the <TT>
<FONT COLOR="#0000ff">"Screen"</FONT></TT> section. You can find what driver to
use by <TT>
<FONT COLOR="#0000ff">grep</FONT></TT>ing the modules with the name of your
graphics card.
This is similar to what we did with kernel modules on page
<A HREF="node45.html#page:grepkernmodules"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A>.

<P>
</DD>
<DT>9.</DT>
<DD>A good idea is to now create a script, <TT>
<FONT COLOR="#0000ff">/etc/X11/X.sh</FONT></TT>,
containing your <TT>
<FONT COLOR="#0000ff">-bpp</FONT></TT> option with the server you would like to run.
For example,
</DD>
</DL>

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>#!/bin/sh</code><br>
<code>exec&nbsp;/usr/X11R6/bin/&#060;server&#062;&nbsp;-bpp&nbsp;16</code><br>
</FONT></TD></TR></TABLE><P>
<DL COMPACT>
<DT>10.</DT>
<DD>You can then symlink <TT>
<FONT COLOR="#0000ff">/usr/X11R6/bin/X</FONT></TT>
to this script. It is also worth symlinking <TT>
<FONT COLOR="#0000ff">/etc/X11/X</FONT></TT> to
this script since some configurations look for it there.
There should now be no chance that <B>X</B> could be started except
in the way you want. Double-check by running <TT>
<FONT COLOR="#0000ff">X</FONT></TT> on the
command-line by itself.
</DD>
</DL>

<P>

<H1><A NAME="SECTION004670000000000000000">
43.7 Visuals</A>
</H1>

<P>

&nbsp;<B>X</B> introduces the concept of a <I>visual</I>. A visual is
the hardware method used to represent colors on your screen.
There are two common and four specialized types:
<DL>
<DT><STRONG>TrueColor(4)</STRONG></DT>
<DD>The most obvious way of representing a color is to
use a byte for each of the red, green, and blue values that a pixel is
composed of. Your video buffer will hence have 3 bytes per pixel, or 24 bits.
You will need 800 <FONT face=helvetica>x</FONT> 600 <FONT face=helvetica>x</FONT> 3 = 1440000 bytes to represent a typical
800 by 600 display.

<P>
Another way is to use two bytes, with 5 bits for red, 6 for
green, and then 5 for blue. This gives you 32 shades of red and blue, and 64
shades of green (green should have more levels because it has the most influence
over the pixel's overall brightness).

<P>
Displays that use 4 bytes usually
discard the last byte, and are essentially 24-bit displays. Note also that
most displays using a full 8 bits per color discard the trailing bits,
so there is often no appreciable difference between a 16-bit display and a
32-bit display. If you have limited memory, 16 bits is preferable; it is also
faster.
</DD>
<DT><STRONG>PseudoColor(3)</STRONG></DT>
<DD>If you want to display each pixel with only one byte
and still get a wide range of colors, the best way is to make that pixel
index a dynamic table of 24-bit palette values: 256 of them exactly.
8-bit depths work this way. 
You will have just as many possible colors, but applications will have
to pick what colors they want to display at once and compete for entries in
the color palette.
</DD>
<DT><STRONG>StaticGray(0)</STRONG></DT>
<DD>These are
gray-level displays usually with 1 byte or 4 bits
per pixel, or monochrome displays with 1 byte per pixel, like the legacy
Hercules Graphics Card (HGC, or MDA--monochrome graphics adapter).
Legacy VGA cards can be set to 640 <FONT face=helvetica>x</FONT> 480 in 16-color ``black and white.''
<B>X</B> is almost usable in this mode and has the advantage that it
<I>always</I> works, regardless of what hardware you have.
</DD>
<DT><STRONG>StaticColor(2)</STRONG></DT>
<DD>This usually refers to 4-bit displays like the old
(and obsolete) CGA
and EGA displays having a small fixed number of colors.
</DD>
<DT><STRONG>DirectColor(5)</STRONG></DT>
<DD>This is rarely used and refers to displays that
have a separate palette for each of red, green, and blue.
</DD>
<DT><STRONG>GrayScale(1)</STRONG></DT>
<DD>These are like StaticGray, but the gray levels are
programmable like PseudoColor. This is also rarely used.
</DD>
</DL>

<P>
You can check the visuals that your display supports with the <TT>
<FONT COLOR="#0000ff">xdpyinfo</FONT></TT>
command. You will notice more than one visual listed, since <B>X</B> can
effectively support a simple StaticColor visual with PseudoColor, or
a DirectColor visual with TrueColor.
The default visual is listed first
and can be set with the <TT>
<FONT COLOR="#0000ff">-cc</FONT></TT> option as we did above for
the 16-color server. The argument to the <TT>
<FONT COLOR="#0000ff">-cc</FONT></TT> option is the
number code above in parentheses.

<P>
Note that good <B>X</B> applications check the list of available visuals
and choose an appropriate one. There are also those that require a
particular visual, and some that take a <TT>
<FONT COLOR="#0000ff">-visual</FONT></TT> option on the
command-line.

<P>

<H1><A NAME="SECTION004680000000000000000">
43.8 The <TT>
<FONT COLOR="#0000ff">startx</FONT></TT> and <TT>
<FONT COLOR="#0000ff">xinit</FONT></TT> Commands</A>
</H1>

<P>
The action of starting an <B>X</B> server, then a window manager
should obviously be automated. The classic way to start
<B>X</B> is to run the <TT>
<FONT COLOR="#0000ff">xinit</FONT></TT> command on its own. On L<SMALL>INUX</SMALL>
this has been superseded by

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>startx</code><br>
</FONT></TD></TR></TABLE><P>
which is a script that runs <TT>
<FONT COLOR="#0000ff">xinit</FONT></TT> after setting some
environment variables. These commands indirectly call a number of
configuration scripts in
<TT>
<FONT COLOR="#0000ff">/etc/X11/xinit/</FONT></TT> and your home directory, where you
can specify your window manager and startup applications. See <TT>
<FONT COLOR="#0000ff">xinit</FONT></TT>(1)
and <TT>
<FONT COLOR="#0000ff">startx</FONT></TT>(1) for more information.

<P>

<H1><A NAME="SECTION004690000000000000000">
43.9 Login Screen</A>
</H1>

<P>
<A NAME="sec:xloginscreen"></A>
<P>
<TT>
<FONT COLOR="#0000ff">init</FONT></TT> runs <TT>
<FONT COLOR="#0000ff">mgetty</FONT></TT>, which
displays a <TT>
<FONT COLOR="#0000ff">login:</FONT></TT> prompt on every attached
character terminal.
<TT>
<FONT COLOR="#0000ff">init</FONT></TT> can also run <TT>
<FONT COLOR="#0000ff">xdm</FONT></TT>, which displays a
graphical login box
on every <B>X</B> server. Usually, there will only
be one <B>X</B> server: the one on your own machine.

<P>
The interesting lines inside your <TT>
<FONT COLOR="#0000ff">inittab</FONT></TT> file are

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>id:5:initdefault:</code><br>
</FONT></TD></TR></TABLE><P>
and

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>x:5:respawn:/usr/X11R6/bin/xdm&nbsp;-nodaemon</code><br>
</FONT></TD></TR></TABLE><P>
which state that the default run level is <TT>
<FONT COLOR="#0000ff">5</FONT></TT> and
that <TT>
<FONT COLOR="#0000ff">xdm</FONT></TT> should be started at run level <TT>
<FONT COLOR="#0000ff">5</FONT></TT>. This
should only be attempted if you are sure that <B>X</B> works (by running
<TT>
<FONT COLOR="#0000ff">X</FONT></TT> on the command-line by itself). If it
doesn't, then <TT>
<FONT COLOR="#0000ff">xdm</FONT></TT> will keep trying to start <B>X</B>,
effectively disabling the console. On systems besides RedHat and
Debian, these may be run levels 2 versus 3, where run level 5 is
reserved for something else. In any event, there should be
comments in your <TT>
<FONT COLOR="#0000ff">/etc/inittab</FONT></TT> file to explain your
distribution's convention.

<P>

<H1><A NAME="SECTION0046100000000000000000">
43.10 X Font Naming Conventions</A>
</H1>

<P>
Most <B>X</B> applications take a <TT>
<FONT COLOR="#0000ff">-fn</FONT></TT> or <TT>
<FONT COLOR="#0000ff">-font</FONT></TT> option
to specify the font. In this section, I give a partial guide
to <B>X</B> font naming.

<P>
A font name is a list of words and numbers separated by hyphens. A typical font
name is <FONT SIZE="-1"><TT>
<FONT COLOR="#0000ff">-adobe-courier-medium-r-normal&#45;&#45;12-120-75-75-m-60-iso8859-1</FONT></TT></FONT>.
Use the <TT>
<FONT COLOR="#0000ff">xlsfonts</FONT></TT> command to obtain a complete list of fonts.

<P>
The font name fields have the following meanings:
<DL>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">adobe</FONT></TT></STRONG></DT>
<DD>The name of the font's maker. Others are 
<IMG
 WIDTH="557" HEIGHT="81" ALIGN="BOTTOM" BORDER="0"
 SRC="img80.png"
 ALT="{\scriptsize\texttt{\protect\leavevmode{\color{blue}{
\begin{longtable}{l \vert ...
...arabic &amp; cronyx &amp; dtp &amp; jis &amp; misc &amp; schumacher &amp; sun &amp; \\
\end{longtable}}}}}">
<BR>

</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">courier</FONT></TT></STRONG></DT>
<DD>The font family. This
is the real name of the font. Some others are
<IMG
 WIDTH="533" HEIGHT="247" ALIGN="BOTTOM" BORDER="0"
 SRC="img81.png"
 ALT="{\scriptsize\texttt{\protect\leavevmode{\color{blue}{
\begin{longtable}{l \vert ...
...ursor &amp; lucidux sans &amp; standard symbols &amp; zapf dingbats \\
\end{longtable}}}}}">
<BR>

</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">medium</FONT></TT></STRONG></DT>
<DD>The font weight: it can also be
<TT>
<FONT COLOR="#0000ff">bold</FONT></TT>, <TT>
<FONT COLOR="#0000ff">demibold</FONT></TT>, or <TT>
<FONT COLOR="#0000ff">regular</FONT></TT>.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">r</FONT></TT></STRONG></DT>
<DD>Indicate that the font is <TT>
<FONT COLOR="#0000ff">r</FONT></TT>oman; <TT>
<FONT COLOR="#0000ff">i</FONT></TT> is for italic
and <TT>
<FONT COLOR="#0000ff">o</FONT></TT> is for oblique.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">normal</FONT></TT></STRONG></DT>
<DD>Character width and intercharacter spacing. It can
also be <TT>
<FONT COLOR="#0000ff">condensed</FONT></TT>, <TT>
<FONT COLOR="#0000ff">semicondensed</FONT></TT>, <TT>
<FONT COLOR="#0000ff">narrow</FONT></TT>, or <TT>
<FONT COLOR="#0000ff">double</FONT></TT>.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">12</FONT></TT></STRONG></DT>
<DD>The pixel size. A zero means a scalable font that can be selected
at any pixel size. The largest fixed sized font is about 40 points.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">120</FONT></TT></STRONG></DT>
<DD>The size in tenths of a printers point.
This is usually 10 times the pixel size.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">75-75</FONT></TT></STRONG></DT>
<DD>Horizontal and vertical pixel resolution for which
the font was designed. Most monitors today are 75 pixels per inch. The
only other possible values are <TT>
<FONT COLOR="#0000ff">72-72</FONT></TT> or <TT>
<FONT COLOR="#0000ff">100-100</FONT></TT>.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">m</FONT></TT></STRONG></DT>
<DD>The font spacing. Other values are <TT>
<FONT COLOR="#0000ff">m</FONT></TT>onospaced, <TT>
<FONT COLOR="#0000ff">p</FONT></TT>roportional, or
<TT>
<FONT COLOR="#0000ff">c</FONT></TT>ondensed.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">60</FONT></TT></STRONG></DT>
<DD>The average width of all characters in the font in tenths of a pixel.
</DD>
<DT><STRONG><TT>
<FONT COLOR="#0000ff">iso8859-1</FONT></TT></STRONG></DT>
<DD>The ISO character set. In this case, the
<TT>
<FONT COLOR="#0000ff">1</FONT></TT> indicates <B>ISO Latin 1</B>, a superset of the ASCII
character set. This last bit is the locale setting,
which you would normally omit to allow <B>X</B> to determine it according to
your locale settings.
</DD>
</DL>

<P>
As an example, start <TT>
<FONT COLOR="#0000ff">cooledit</FONT></TT> with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>cooledit&nbsp;-font&nbsp;'-*-times-medium-r-*--20-*-*-*-p-*-iso8859-1'</code><br>
<code>cooledit&nbsp;-font&nbsp;'-*-times-medium-r-*--20-*-*-*-p-*'</code><br>
<code>cooledit&nbsp;-font&nbsp;'-*-helvetica-bold-r-*--14-*-*-*-p-*-iso8859-1'</code><br>
<code>cooledit&nbsp;-font&nbsp;'-*-helvetica-bold-r-*--14-*-*-*-p-*'</code><br>
</FONT></TD></TR></TABLE><P>
These invoke a newspaper font and an easy-reading font
respectively. A <TT>
<FONT COLOR="#0000ff">*</FONT></TT> means that the <B>X</B> server can place
default values into those fields. That way, you do not have to
specify a font exactly.

<P>
The <TT>
<FONT COLOR="#0000ff">xfontsel</FONT></TT> command is the traditional <B>X</B> utility for
displaying fonts and the <TT>
<FONT COLOR="#0000ff">showfont</FONT></TT> command dumps fonts as
ASCII text.

<P>

<H1><A NAME="SECTION0046110000000000000000">
43.11 Font Configuration</A>
</H1>

<P>
Fonts used by <B>X</B> are conventionally stored in
<TT>
<FONT COLOR="#0000ff">/usr/X11R6/lib/X11/fonts/</FONT></TT>. Each directory contains a
<TT>
<FONT COLOR="#0000ff">fonts.alias</FONT></TT> file that maps full font names to simpler names,
and a <TT>
<FONT COLOR="#0000ff">fonts.alias</FONT></TT> file which lists the fonts contained in that
directory. To create these files, you must <TT>
<FONT COLOR="#0000ff">cd</FONT></TT> to each directory
and run <TT>
<FONT COLOR="#0000ff">mkfontdir</FONT></TT> as follows:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>mkfontdir&nbsp;-e&nbsp;/usr/X11R6/lib/X11/fonts/encodings&nbsp;-e&nbsp;/usr/X11R6/lib/X11/fonts/encodings/large</code><br>
</FONT></TD></TR></TABLE><P>
You can rerun this command at any time for good measure.

<P>
To tell <B>X</B> to use these directories add the following lines to your
<TT>
<FONT COLOR="#0000ff">"Files"</FONT></TT> section. A typical configuration will contain

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"Files"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;RgbPath&nbsp;&nbsp;"/usr/X11R6/lib/X11/rgb"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/misc/:unscaled"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/75dpi/:unscaled"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/Speedo/"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/Type1/"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/misc/"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/75dpi/"</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Often you will add a directory without wanting to restart <B>X</B>.
The command to add a directory to the <B>X</B> <I>font path</I> is:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xset&nbsp;+fp&nbsp;/usr/X11R6/lib/X11/fonts/&#060;new-directory&#062;</code><br>
</FONT></TD></TR></TABLE><P>
and to remove a directory, use

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xset&nbsp;-fp&nbsp;/usr/X11R6/lib/X11/fonts/&#060;new-directory&#062;</code><br>
</FONT></TD></TR></TABLE><P>
To set the font path, use

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xset&nbsp;fp=&nbsp;/usr/X11R6/lib/X11/fonts/misc,/usr/X11R6/lib/X11/fonts/75dpi</code><br>
</FONT></TD></TR></TABLE><P>
and reset it with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xset&nbsp;fp&nbsp;default</code><br>
</FONT></TD></TR></TABLE><P>

<P>
If you change anything in your font directories, you should run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xset&nbsp;fp&nbsp;rehash</code><br>
</FONT></TD></TR></TABLE><P>
to cause <B>X</B> to reread the font directories.

<P>
The command <TT>
<FONT COLOR="#0000ff">chkfontpath</FONT></TT> prints out your current font
path setting.

<P>
Note that XFree86 version 4 has a TrueType engine. TrueType
(<TT>
<FONT COLOR="#0000ff">.ttf</FONT></TT>) fonts are common to Windows. They are high-quality,
scalable fonts designed for graphical displays. You can add your
TrueType directory alongside your other directories above, and run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red size="-1">
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue size="-1">
<code>ttmkfdir&nbsp;&#062;&nbsp;fonts.scale</code><br>
<code>mkfontdir&nbsp;-e&nbsp;/usr/X11R6/lib/X11/fonts/encodings&nbsp;-e&nbsp;/usr/X11R6/lib/X11/fonts/encodings/large</code><br>
</FONT></TD></TR></TABLE><P>
inside each one. Note that the <TT>
<FONT COLOR="#0000ff">ttmkfdir</FONT></TT> is needed to
catalog TrueType fonts as scalable fonts.

<P>

<H1><A NAME="SECTION0046120000000000000000">
43.12 The Font Server</A>
</H1>

<P>
<A NAME="sec:xfontserver"></A>
<P>
Having all fonts stored on all machines is expensive.
Ideally, you would like a large font database installed on
one machine and fonts to be read off this machine, over the
network and on demand. You may also have an <B>X</B> that does not
support a particular font type; if it can read the font from
the network, built-in support will not be necessary.
The daemon <TT>
<FONT COLOR="#0000ff">xfs</FONT></TT> (<B>X</B> <I>font server</I>)
facilitates all of this.

<P>
<TT>
<FONT COLOR="#0000ff">xfs</FONT></TT> reads its own simple configuration file from <TT>
<FONT COLOR="#0000ff">/etc/X11/fs/config</FONT></TT>
or <TT>
<FONT COLOR="#0000ff">/etc/X11/xfs/config</FONT></TT>. It might contain a similar list of
directories:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>client-limit&nbsp;=&nbsp;10</code><br>
<code>clone-self&nbsp;=&nbsp;on</code><br>
<code>catalogue&nbsp;=&nbsp;/usr/X11R6/lib/X11/fonts/misc:unscaled,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/X11R6/lib/X11/fonts/75dpi:unscaled,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/X11R6/lib/X11/fonts/ttf,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/X11R6/lib/X11/fonts/Speedo,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/X11R6/lib/X11/fonts/Type1,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/X11R6/lib/X11/fonts/misc,</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/X11R6/lib/X11/fonts/75dpi</code><br>
<code>default-point-size&nbsp;=&nbsp;120</code><br>
<code>default-resolutions&nbsp;=&nbsp;75,75,100,100</code><br>
<code>deferglyphs&nbsp;=&nbsp;16</code><br>
<code>use-syslog&nbsp;=&nbsp;on</code><br>
<code>no-listen&nbsp;=&nbsp;tcp</code><br>
</FONT></TD></TR></TABLE><P>

<P>
You can start the font server by using:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/etc/init.d/xfs&nbsp;start</code><br>
<code>(&nbsp;/etc/rc.d/init.d/xfs&nbsp;start&nbsp;)</code><br>
</FONT></TD></TR></TABLE><P>
and change your font paths in <TT>
<FONT COLOR="#0000ff">/etc/X11/XF86Config</FONT></TT> to
include only a minimal set of fonts:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Section&nbsp;"Files"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;RgbPath&nbsp;&nbsp;"/usr/X11R6/lib/X11/rgb"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"/usr/X11R6/lib/X11/fonts/misc/:unscaled"</code><br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"unix/:7100"</code><br>
<code>EndSection</code><br>
</FONT></TD></TR></TABLE><P>
Or otherwise use <TT>
<FONT COLOR="#0000ff">xset</FONT></TT>:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>xset&nbsp;+fp&nbsp;unix/:7100</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Note that no other machines can use your own font server
because of the <TT>
<FONT COLOR="#0000ff">no-listen&nbsp;=&nbsp;tcp</FONT></TT> option. Deleting this
line (and restarting <TT>
<FONT COLOR="#0000ff">xfs</FONT></TT>) allows you to instead use

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>&nbsp;&nbsp;&nbsp;&nbsp;FontPath&nbsp;"inet/127.0.0.1:7100"</code><br>
</FONT></TD></TR></TABLE><P>
which implies an open TCP connection to your
font server, along with all its security implications.
Remote machines can use the same setting after changing
<TT>
<FONT COLOR="#0000ff">127.0.0.1</FONT></TT> to your IP address.

<P>
Finally, note that for XFree86 version 3.3, which does not
have TrueType support, the font server name <TT>
<FONT COLOR="#0000ff">xfstt</FONT></TT> is
available on <EM>Fresh Meat</EM> <I>&lt;<TT><A NAME="tex2html78"
  HREF="http://freshmeat.net/">http://freshmeat.net/</A></TT>&gt;</I>.

<P>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2863"
  HREF="node47.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2859"
  HREF="rute.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2853"
  HREF="node45.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2861"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2864"
  HREF="node47.html">44. UNIX Security</A>
<B> Up:</B> <A NAME="tex2html2860"
  HREF="rute.html">rute</A>
<B> Previous:</B> <A NAME="tex2html2854"
  HREF="node45.html">42. The LINUX Kernel</A>
 &nbsp <B>  <A NAME="tex2html2862"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->

</BODY>
</HTML>
