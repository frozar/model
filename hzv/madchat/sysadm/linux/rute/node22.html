<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.2beta8 (1.46)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>19. Partitions, File Systems, Formatting, Mounting</TITLE>
<META NAME="description" CONTENT="19. Partitions, File Systems, Formatting, Mounting">
<META NAME="keywords" CONTENT="rute">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.2beta8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="rute.css">

<LINK REL="next" HREF="node23.html">
<LINK REL="previous" HREF="node21.html">
<LINK REL="up" HREF="rute.html">
<LINK REL="next" HREF="node23.html">
</HEAD>

<BODY BGCOLOR=#FFFFFF >
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TR><TD align=left bgcolor="#000000">
<FONT COLOR=white>
&nbsp;<A HREF="http://www.icon.co.za/~psheer/rute-purchase.html"><FONT COLOR=white>Purchase</FONT></A>&nbsp;
</FONT>
</TD><TD align=center bgcolor="#000000">
<FONT COLOR=white>
Copyright&nbsp;&#169;&nbsp;2002&nbsp;Paul Sheer. <A HREF="copying.html"><FONT COLOR=white>Click here for copying permissions.</FONT></A>
</FONT>
</TD><TD align=right bgcolor="#000000">
<FONT COLOR=white>
&nbsp;<A HREF="http://www.icon.co.za/~psheer/rute-home.html"><FONT COLOR=white>Home</FONT></A>&nbsp;
</FONT>
</TD></TR>
<TR><TD colspan=2 align=left bgcolor="#ECEBF4">
<IMG SRC="va-btn-small-light-60.png">
</TD><TD align=right bgcolor="#ECEBF4">
<IMG SRC="sflogo2-steel-60.png">
</TD></TR>
</TABLE><BR>

<!--Navigation Panel-->
<A NAME="tex2html2087"
  HREF="node23.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2083"
  HREF="rute.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2077"
  HREF="node21.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2085"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2088"
  HREF="node23.html">20. Advanced Shell Scripting</A>
<B> Up:</B> <A NAME="tex2html2084"
  HREF="rute.html">rute</A>
<B> Previous:</B> <A NAME="tex2html2078"
  HREF="node21.html">18. UNIX Devices</A>
 &nbsp <B>  <A NAME="tex2html2086"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html2089"
  HREF="#SECTION002210000000000000000">19.1 The Physical Disk Structure</A>
<UL>
<LI><A NAME="tex2html2090"
  HREF="#SECTION002211000000000000000">19.1.1 Cylinders, heads, and sectors</A>
<LI><A NAME="tex2html2091"
  HREF="#SECTION002212000000000000000">19.1.2 Large Block Addressing</A>
<LI><A NAME="tex2html2092"
  HREF="#SECTION002213000000000000000">19.1.3 Extended partitions</A>
</UL>
<LI><A NAME="tex2html2093"
  HREF="#SECTION002220000000000000000">19.2 Partitioning a New Disk</A>
<LI><A NAME="tex2html2094"
  HREF="#SECTION002230000000000000000">19.3 Formatting Devices</A>
<UL>
<LI><A NAME="tex2html2095"
  HREF="#SECTION002231000000000000000">19.3.1 File systems</A>
<LI><A NAME="tex2html2096"
  HREF="#SECTION002232000000000000000">19.3.2 <TT>
<FONT COLOR="#0000ff">mke2fs</FONT></TT></A>
<LI><A NAME="tex2html2097"
  HREF="#SECTION002233000000000000000">19.3.3 Formatting floppies and removable drives</A>
<LI><A NAME="tex2html2098"
  HREF="#SECTION002234000000000000000">19.3.4 Creating MS-DOS floppies</A>
<LI><A NAME="tex2html2099"
  HREF="#SECTION002235000000000000000">19.3.5 <TT>
<FONT COLOR="#0000ff">mkswap</FONT></TT>, <TT>
<FONT COLOR="#0000ff">swapon</FONT></TT>, and <TT>
<FONT COLOR="#0000ff">swapoff</FONT></TT></A>
</UL>
<LI><A NAME="tex2html2100"
  HREF="#SECTION002240000000000000000">19.4 Device Mounting</A>
<UL>
<LI><A NAME="tex2html2101"
  HREF="#SECTION002241000000000000000">19.4.1 Mounting CD-ROMs</A>
<LI><A NAME="tex2html2102"
  HREF="#SECTION002242000000000000000">19.4.2 Mounting floppy disks</A>
<LI><A NAME="tex2html2103"
  HREF="#SECTION002243000000000000000">19.4.3 Mounting Windows and NT partitions</A>
</UL>
<LI><A NAME="tex2html2104"
  HREF="#SECTION002250000000000000000">19.5 File System Repair: <TT>
<FONT COLOR="#0000ff">fsck</FONT></TT></A>
<LI><A NAME="tex2html2105"
  HREF="#SECTION002260000000000000000">19.6 File System Errors on Boot</A>
<LI><A NAME="tex2html2106"
  HREF="#SECTION002270000000000000000">19.7 Automatic Mounts: <TT>
<FONT COLOR="#0000ff">fstab</FONT></TT></A>
<LI><A NAME="tex2html2107"
  HREF="#SECTION002280000000000000000">19.8 Manually Mounting <TT>
<FONT COLOR="#0000ff">/proc</FONT></TT></A>
<LI><A NAME="tex2html2108"
  HREF="#SECTION002290000000000000000">19.9 RAM and Loopback Devices</A>
<UL>
<LI><A NAME="tex2html2109"
  HREF="#SECTION002291000000000000000">19.9.1 Formatting a floppy inside a file</A>
<LI><A NAME="tex2html2110"
  HREF="#SECTION002292000000000000000">19.9.2 CD-ROM files</A>
</UL>
<LI><A NAME="tex2html2111"
  HREF="#SECTION0022100000000000000000">19.10 Remounting</A>
<LI><A NAME="tex2html2112"
  HREF="#SECTION0022110000000000000000">19.11 Disk <TT>
<FONT COLOR="#0000ff">sync</FONT></TT></A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION002200000000000000000">
19. Partitions, File Systems, Formatting, Mounting</A>
</H1>

<P>
<A NAME="chap:partfilesys"></A>
<P>

<H1><A NAME="SECTION002210000000000000000">
19.1 The Physical Disk Structure</A>
</H1>

<P>
Physical disks are divided into partitions. <FONT COLOR="#ffa500">[See <B><TT>
<FONT COLOR="#0000ff">/dev/hd??</FONT></TT></B>
under Section <A HREF="node21.html#sec:miscdevices">18.4</A>.]</FONT> Information as to how the
disk is partitioned up is stored in a <I>partition table</I>,
which is a small area of the disk separate from the partitions
themselves.

<P>

<H2><A NAME="SECTION002211000000000000000">
19.1.1 Cylinders, heads, and sectors</A>
</H2>

<P>
The physical drive itself usually comprises several actual
disks of which both sides are used. The sides
are labelled 0, 1, 2, 3, and so on, and are also called <I>heads</I> because
one magnetic head per side does the actual reading and writing.
Each side/head has tracks, and each track is divided into
segments called <I>sectors</I>. Each sector typically holds 512
bytes. The total amount of space on the drive in bytes is therefore:
<BLOCKQUOTE>
512&nbsp;<FONT face=helvetica>x</FONT>&nbsp;(sectors-per-track)&nbsp;<FONT face=helvetica>x</FONT>&nbsp;(tracks-per-side)&nbsp;<FONT face=helvetica>x</FONT>&nbsp;(number-of-sides)

</BLOCKQUOTE>

<P>
A single track and all the tracks of the same diameter (on all the
sides) are called a <I>cylinder</I>. Disks are normally talked
about in terms of ``cylinders and sectors'' instead of ``sides,
tracks, and sectors.'' Partitions are (usually) divided along
cylinder boundaries. Hence, disks do not have arbitrarily sized
partitions; rather, the size of the partition is usually a multiple
of the amount of data held in a single cylinder. Partitions
therefore have a definite inner and outer diameter. Figure
<A HREF="node22.html#fig:hdplatters">19.1</A> illustrates the layout of a hard disk.

<P>

<P></P>
<DIV ALIGN="CENTER"><A NAME="fig:hdplatters"></A><A NAME="26126"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 19.1:</STRONG>
Hard drive platters and sector layout</CAPTION>
<TR><TD><IMG
 WIDTH="411" HEIGHT="282" BORDER="0"
 SRC="img23.png"
 ALT="\begin{figure}\begin{center}
\setlength{\unitlength}{0.00083333in}\begin{picture...
...8,3462){\makebox(0,0)[l]{\small Cylinder}}
\end{picture}\end{center}\end{figure}"></TD></TR>
</TABLE>
</DIV><P></P>

<P>

<H2><A NAME="SECTION002212000000000000000">
19.1.2 Large Block Addressing</A>
</H2>

<P>
The system above is quite straightforward except for the
curious limitation that partition tables have only 10 bits in which to
store the partition's cylinder offset. This means that no disk can have
more than 1024 cylinders. This limitation was overcome by multiplying up
the number of heads in software to reduce the number of
cylinders, <FONT COLOR="#ffa500">[Called <I>LBA</I> (Large Block Addressing) mode.]</FONT>hence portraying a disk of impossible proportions.
The user, however, need never be concerned that the physical disk
is completely otherwise.

<P>

<H2><A NAME="SECTION002213000000000000000">
19.1.3 Extended partitions</A>
</H2>

<P>
The partition table has room for only four partitions. For
more partitions, one of these four partitions can be divided
into many smaller partitions, called <I>logical</I> partitions.
The original four are then called <I>primary</I> partitions. If
a primary partition is subdivided in this way, it is known
as an <I>extended</I> <I>primary</I> or <I>extended</I>
partition. Typically, the first primary partition will be small
(<TT>
<FONT COLOR="#0000ff">/dev/hda1</FONT></TT>, say). The second primary partition will
fill the rest of the disk as an extended partition
(<TT>
<FONT COLOR="#0000ff">/dev/hda2</FONT></TT>, say). In this case, the entries in the partition table
of <TT>
<FONT COLOR="#0000ff">/dev/hda3</FONT></TT> and <TT>
<FONT COLOR="#0000ff">/dev/hda4</FONT></TT> will be blank.
The extended partition can be subdivided repeatedly to
give <TT>
<FONT COLOR="#0000ff">/dev/hda5</FONT></TT>, <TT>
<FONT COLOR="#0000ff">/dev/hda6</FONT></TT>, and so on.

<P>

<H1><A NAME="SECTION002220000000000000000">
19.2 Partitioning a New Disk</A>
</H1>

<P>
A new disk has no partition information. Typing <TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT>
will start an interactive partitioning utility. The command

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>fdisk&nbsp;/dev/hda</code><br>
</FONT></TD></TR></TABLE><P>
<TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT>s your primary master.

<P>
What follows is an example of the partitioning of a new hard
drive. Most distributions these days have a simpler graphical
system for creating partitions, so using <TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT> will
not be necessary at installation time. However, adding a new
drive or transferring/copying a L<SMALL>INUX</SMALL> system to new hardware
will require partitioning.

<P>
On U<SMALL>NIX</SMALL>, each partition has its own <I>directory</I>. <I>Files under
one directory might be stored on a different disk or a different
partition to files in another directory</I>. Typically, the
<TT>
<FONT COLOR="#0000ff">/var</FONT></TT> directory (and all subdirectories beneath it)
is stored on a different partition from the <TT>
<FONT COLOR="#0000ff">/usr</FONT></TT>
directory (and all subdirectories beneath it).

<P>
Table&nbsp;<A HREF="node22.html#table:partitions">19.2</A> offers a general guideline as to how
a server machine should be set up (with home computers, you can
be far more liberal--most home PCs can do with merely a swap and
<TT>
<FONT COLOR="#0000ff">/</FONT></TT> partition.). When you install a new server, your
distribution should allow you to customize your partitions to
match this table.

<P>
<A NAME="sec:partnewdisk"></A>
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="table:partitions"></A><A NAME="26183"></A>
<TABLE>
<CAPTION><STRONG>Table 19.1:</STRONG>
Which directories should have their own partitions, and their partitions' sizes</CAPTION>
<TR><TD><IMG
 WIDTH="556" HEIGHT="569" BORDER="0"
 SRC="img24.png"
 ALT="\begin{table}
% latex2html id marker 26182
{}{\scriptsize\begin{tabularx}{\textw...
...irst 500 megabytes
of your hard drive).
\\
\hline
\end{tabularx}}
\end{table}"></TD></TR>
</TABLE>
</DIV><P></P>
<BR>

<P>
If another operating system is already installed in the
first partition, you can type
<TT>
<FONT COLOR="#0000ff">p</FONT></TT> and might see:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>p</B></font></code><br>
<code>&nbsp;</code><br>
<code>Disk&nbsp;/dev/hda:&nbsp;255&nbsp;heads,&nbsp;63&nbsp;sectors,&nbsp;788&nbsp;cylinders</code><br>
<code>Units&nbsp;=&nbsp;cylinders&nbsp;of&nbsp;16065&nbsp;*&nbsp;512&nbsp;bytes</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;Device&nbsp;Boot&nbsp;&nbsp;&nbsp;&nbsp;Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End&nbsp;&nbsp;&nbsp;&nbsp;Blocks&nbsp;&nbsp;&nbsp;Id&nbsp;&nbsp;System</code><br>
<code>/dev/hda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;312&nbsp;&nbsp;&nbsp;2506108+&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;Win95&nbsp;FAT32&nbsp;(LBA)</code><br>
</FONT></TD></TR></TABLE><P>
In such a case, you can just start adding further partitions.

<P>
The exact same procedure applies in the case of SCSI drives. The
only difference is that <TT>
<FONT COLOR="#0000ff">/dev/hd</FONT></TT><I>?</I> changes to
<TT>
<FONT COLOR="#0000ff">/dev/sd</FONT></TT><I>?</I>. (See Chapter <A HREF="node45.html#chap:modules">42</A> for SCSI
device driver information.)

<P>
Here is a partitioning session with <TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT>:
<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>[root@cericon&nbsp;/root]#&nbsp;<font color="navy"><B>fdisk&nbsp;/dev/hda</B></font></code><br>
<code>Device&nbsp;contains&nbsp;neither&nbsp;a&nbsp;valid&nbsp;DOS&nbsp;partition&nbsp;table,&nbsp;nor&nbsp;Sun&nbsp;or&nbsp;SGI&nbsp;disklabel</code><br>
<code>Building&nbsp;a&nbsp;new&nbsp;DOS&nbsp;disklabel.&nbsp;Changes&nbsp;will&nbsp;remain&nbsp;in&nbsp;memory&nbsp;only,</code><br>
<code>until&nbsp;you&nbsp;decide&nbsp;to&nbsp;write&nbsp;them.&nbsp;After&nbsp;that,&nbsp;of&nbsp;course,&nbsp;the&nbsp;previous</code><br>
<code>content&nbsp;won't&nbsp;be&nbsp;recoverable.</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
First, we use the <TT>
<FONT COLOR="#0000ff">p</FONT></TT> option to print current partitions--

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>p</B></font></code><br>
<code>&nbsp;</code><br>
<code>Disk&nbsp;/dev/hda:&nbsp;255&nbsp;heads,&nbsp;63&nbsp;sectors,&nbsp;788&nbsp;cylinders</code><br>
<code>Units&nbsp;=&nbsp;cylinders&nbsp;of&nbsp;16065&nbsp;*&nbsp;512&nbsp;bytes</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;Device&nbsp;Boot&nbsp;&nbsp;&nbsp;&nbsp;Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End&nbsp;&nbsp;&nbsp;&nbsp;Blocks&nbsp;&nbsp;&nbsp;Id&nbsp;&nbsp;System</code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>
--of which there are clearly none. Now <TT>
<FONT COLOR="#0000ff">n</FONT></TT> lets us add a new partition:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;e&nbsp;&nbsp;&nbsp;extended</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>p</B></font></code><br>
</FONT></TD></TR></TABLE><P>

<P>
We want to define the first physical partition starting at the first cylinder:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Partition&nbsp;number&nbsp;(1-4):&nbsp;<font color="navy"><B>1</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(1-788,&nbsp;default&nbsp;1):&nbsp;<font color="navy"><B>1</B></font></code><br>
</FONT></TD></TR></TABLE><P>

<P>
We would like an 80-megabyte partition. <TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT> calculates the
last cylinder automatically with:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(1-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>+80M</B></font></code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Our next <TT>
<FONT COLOR="#0000ff">n</FONT></TT>ew partition will span the rest of the disk
and will be an <TT>
<FONT COLOR="#0000ff">e</FONT></TT>xtended partition:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;e&nbsp;&nbsp;&nbsp;extended</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>e</B></font></code><br>
<code>Partition&nbsp;number&nbsp;(1-4):&nbsp;<font color="navy"><B>2</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(12-788,&nbsp;default&nbsp;12):&nbsp;<font color="navy"><B>12</B></font></code><br>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(12-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>788</B></font></code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Our remaining <TT>
<FONT COLOR="#0000ff">l</FONT></TT>ogical partitions fit within
the extended partition:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>15</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>20</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>25</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>30</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>35</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>40</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;l&nbsp;&nbsp;&nbsp;logical&nbsp;(5&nbsp;or&nbsp;over)</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>l</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(12-788,&nbsp;default&nbsp;12):&nbsp;<font color="navy"><B>12</B></font></code><br>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(12-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>+64M</B></font></code><br>
<code>&nbsp;</code><br>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;l&nbsp;&nbsp;&nbsp;logical&nbsp;(5&nbsp;or&nbsp;over)</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>l</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(21-788,&nbsp;default&nbsp;21):&nbsp;<font color="navy"><B>21</B></font></code><br>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(21-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>+100M</B></font></code><br>
<code>&nbsp;</code><br>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;l&nbsp;&nbsp;&nbsp;logical&nbsp;(5&nbsp;or&nbsp;over)</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>l</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(34-788,&nbsp;default&nbsp;34):&nbsp;<font color="navy"><B>34</B></font></code><br>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(34-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>+200M</B></font></code><br>
<code>&nbsp;</code><br>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;l&nbsp;&nbsp;&nbsp;logical&nbsp;(5&nbsp;or&nbsp;over)</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>l</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(60-788,&nbsp;default&nbsp;60):&nbsp;<font color="navy"><B>60</B></font></code><br>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(60-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>+1500M</B></font></code><br>
<code>&nbsp;</code><br>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>n</B></font></code><br>
<code>Command&nbsp;action</code><br>
<code>&nbsp;&nbsp;&nbsp;l&nbsp;&nbsp;&nbsp;logical&nbsp;(5&nbsp;or&nbsp;over)</code><br>
<code>&nbsp;&nbsp;&nbsp;p&nbsp;&nbsp;&nbsp;primary&nbsp;partition&nbsp;(1-4)</code><br>
<code><font color="navy"><B>l</B></font></code><br>
<code>First&nbsp;cylinder&nbsp;(252-788,&nbsp;default&nbsp;252):&nbsp;<font color="navy"><B>252</B></font></code><br>
<code>Last&nbsp;cylinder&nbsp;or&nbsp;+size&nbsp;or&nbsp;+sizeM&nbsp;or&nbsp;+sizeK&nbsp;(252-788,&nbsp;default&nbsp;788):&nbsp;<font color="navy"><B>788</B></font></code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
The default <I>partition type</I> is a single byte that
the operating system will look at to determine what kind of file
system is stored there. Entering <TT>
<FONT COLOR="#0000ff">l</FONT></TT> lists all known types:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>l</B></font></code><br>
<code>&nbsp;</code><br>
<code>&nbsp;0&nbsp;&nbsp;Empty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;Hidden&nbsp;FAT16&nbsp;&nbsp;&nbsp;&nbsp;61&nbsp;&nbsp;SpeedStor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a6&nbsp;&nbsp;OpenBSD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br>
<code>&nbsp;&nbsp;[...]</code><br>
<code>&nbsp;8&nbsp;&nbsp;AIX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4d&nbsp;&nbsp;QNX4.x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;82&nbsp;&nbsp;Linux&nbsp;swap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;&nbsp;CP/M&nbsp;/&nbsp;CTOS&nbsp;/&nbsp;.</code><br>
<code>&nbsp;9&nbsp;&nbsp;AIX&nbsp;bootable&nbsp;&nbsp;&nbsp;&nbsp;4e&nbsp;&nbsp;QNX4.x&nbsp;2nd&nbsp;part&nbsp;83&nbsp;&nbsp;Linux&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1&nbsp;&nbsp;DOS&nbsp;access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br>
<code>&nbsp;&nbsp;[...]</code><br>
<code>12&nbsp;&nbsp;Compaq&nbsp;diagnost&nbsp;56&nbsp;&nbsp;Golden&nbsp;Bow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a5&nbsp;&nbsp;BSD/386&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ff&nbsp;&nbsp;BBT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br>
<code>14&nbsp;&nbsp;Hidden&nbsp;FAT16&nbsp;&#060;3&nbsp;5c&nbsp;&nbsp;Priam&nbsp;Edisk&nbsp;&nbsp;&nbsp;&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
<TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT> will set the type to <TT>
<FONT COLOR="#0000ff">Linux</FONT></TT> by default.
We only need to explicitly set the type of the swap partition:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>t</B></font></code><br>
<code>Partition&nbsp;number&nbsp;(1-9):&nbsp;<font color="navy"><B>5</B></font></code><br>
<code>Hex&nbsp;code&nbsp;(type&nbsp;L&nbsp;to&nbsp;list&nbsp;codes):&nbsp;<font color="navy"><B>82</B></font></code><br>
<code>Changed&nbsp;system&nbsp;type&nbsp;of&nbsp;partition&nbsp;5&nbsp;to&nbsp;82&nbsp;(Linux&nbsp;swap)</code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Now we need to set the boot<TT>
<FONT COLOR="#0000ff">a</FONT></TT>ble flag on the first partition,
since BIOS's will not boot a disk without at least one bootable partition:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>a</B></font></code><br>
<code>Partition&nbsp;number&nbsp;(1-10):&nbsp;<font color="navy"><B>1</B></font></code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Displaying our results gives:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>p</B></font></code><br>
<code>&nbsp;</code><br>
<code>Disk&nbsp;/dev/hda:&nbsp;255&nbsp;heads,&nbsp;63&nbsp;sectors,&nbsp;788&nbsp;cylinders</code><br>
<code>Units&nbsp;=&nbsp;cylinders&nbsp;of&nbsp;16065&nbsp;*&nbsp;512&nbsp;bytes</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;&nbsp;&nbsp;Device&nbsp;Boot&nbsp;&nbsp;&nbsp;&nbsp;Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End&nbsp;&nbsp;&nbsp;&nbsp;Blocks&nbsp;&nbsp;&nbsp;Id&nbsp;&nbsp;System</code><br>
<code>/dev/hda1&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88326&nbsp;&nbsp;&nbsp;83&nbsp;&nbsp;Linux</code><br>
<code>/dev/hda2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;788&nbsp;&nbsp;&nbsp;6241252+&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;Extended</code><br>
<code>/dev/hda5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;72261&nbsp;&nbsp;&nbsp;82&nbsp;&nbsp;Linux&nbsp;swap</code><br>
<code>/dev/hda6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;33&nbsp;&nbsp;&nbsp;&nbsp;104391&nbsp;&nbsp;&nbsp;83&nbsp;&nbsp;Linux</code><br>
<code>/dev/hda7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;59&nbsp;&nbsp;&nbsp;&nbsp;208813+&nbsp;&nbsp;83&nbsp;&nbsp;Linux</code><br>
<code>/dev/hda8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;251&nbsp;&nbsp;&nbsp;1542208+&nbsp;&nbsp;83&nbsp;&nbsp;Linux</code><br>
<code>/dev/hda9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;252&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;788&nbsp;&nbsp;&nbsp;4313421&nbsp;&nbsp;&nbsp;83&nbsp;&nbsp;Linux</code><br>
<code>&nbsp;</code><br>
</FONT></TD></TR></TABLE><P>

<P>
At this point, nothing has been committed to disk.
We <TT>
<FONT COLOR="#0000ff">w</FONT></TT>rite it as follows (<B>Note:</B> this step is irreversible):

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Command&nbsp;(m&nbsp;for&nbsp;help):&nbsp;<font color="navy"><B>w</B></font></code><br>
<code>The&nbsp;partition&nbsp;table&nbsp;has&nbsp;been&nbsp;altered!</code><br>
<code>&nbsp;</code><br>
<code>Calling&nbsp;ioctl()&nbsp;to&nbsp;re-read&nbsp;partition&nbsp;table.</code><br>
<code>Syncing&nbsp;disks.</code><br>
<code>&nbsp;</code><br>
<code>WARNING:&nbsp;If&nbsp;you&nbsp;have&nbsp;created&nbsp;or&nbsp;modified&nbsp;any&nbsp;DOS&nbsp;6.x</code><br>
<code>partitions,&nbsp;please&nbsp;see&nbsp;the&nbsp;fdisk&nbsp;manual&nbsp;page&nbsp;for&nbsp;additional</code><br>
<code>information.</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Even having <TT>
<FONT COLOR="#0000ff">w</FONT></TT>ritten the partition, <TT>
<FONT COLOR="#0000ff">fdisk</FONT></TT> may give a warning
that the kernel does not know about the new partitions. This happens if
the disk is already in use. In this case, you will need to reboot. For
the above partition, the kernel will give the following information at
boot time:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>Partition&nbsp;check:</code><br>
<code>&nbsp;hda:&nbsp;hda1&nbsp;hda2&nbsp;&#060;&nbsp;hda5&nbsp;hda6&nbsp;hda7&nbsp;hda8&nbsp;hda9&nbsp;&#062;</code><br>
</FONT></TD></TR></TABLE><P>
The <TT>
<FONT COLOR="#0000ff">&lt;</FONT></TT> ...<TT>
<FONT COLOR="#0000ff">&gt;</FONT></TT> shows that partition
<TT>
<FONT COLOR="#0000ff">hda2</FONT></TT> is extended and is subdivided into five smaller
partitions.

<P>

<H1><A NAME="SECTION002230000000000000000">
19.3 Formatting Devices</A>
</H1>

<P>

<H2><A NAME="SECTION002231000000000000000">
19.3.1 File systems</A>
</H2>

<P>
Disk drives are usually read in blocks of 1024 bytes (two
sectors). From the point of view of anyone accessing the device,
blocks are stored consecutively--there is no need to think
about cylinders or heads--so that any program can read the
disk as though it were a linear tape. Try

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>less&nbsp;/dev/hda1</code><br>
<code>less&nbsp;-f&nbsp;/dev/hda1</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Now a complex directory structure with many files of arbitrary size needs to be
stored in this contiguous partition. This poses the problem of
what to do with a file that gets deleted and leaves a data ``hole''
in the partition, or a file that has to be split into parts
because there is no single contiguous space big enough to hold
it. Files also have to be indexed in such a way that they can be
found quickly (consider that there can easily be 10,000 files on
a system). U<SMALL>NIX</SMALL>'s symbolic/hard links and devices files
also have to be stored.

<P>
To cope with this complexity, operating systems have a format
for storing files called the <I>file system</I> (<TT>
<FONT COLOR="#0000ff">fs</FONT></TT>).
Like MS-DOS with its FAT file system or Windows with its FAT32 file system,
L<SMALL>INUX</SMALL> has a file system called the <I>2nd extended file system</I>, or <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT>.

<P>
Whereas <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT> is the traditional native L<SMALL>INUX</SMALL> file system, three
other native file systems have recently become available: SGI's XFS file
system, the ext3fs file system, and the reiserfs file system. These three
support fast and reliable recovery in the event of a power failure,
using a feature called <I>journaling</I>. A journaling file system prewrites
disk alterations to a separate log to facilitate recovery if the
file system reaches an incoherent state. (See Section <A HREF="node22.html#sec:repfs">19.5</A>.)

<P>

<H2><A NAME="SECTION002232000000000000000">
19.3.2 <TT>
<FONT COLOR="#0000ff">mke2fs</FONT></TT></A>
</H2>

<P>
To create a file system on a blank partition, use the command
<TT>
<FONT COLOR="#0000ff">mkfs</FONT></TT> (or one of its variants). To create a
L<SMALL>INUX</SMALL> <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT> file system on the first partition of
the primary master run:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mkfs&nbsp;-t&nbsp;ext2&nbsp;-c&nbsp;/dev/hda1</code><br>
</FONT></TD></TR></TABLE><P>
or, alternatively

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mke2fs&nbsp;-c&nbsp;/dev/hda1</code><br>
</FONT></TD></TR></TABLE><P>
The <TT>
<FONT COLOR="#0000ff">-c</FONT></TT> option means to check for bad blocks by reading
through the entire disk first. This is a <I>read-only</I> check
and causes unreadable blocks to be flagged as such and not
be used. To do a full <I>read-write</I> check, use the
<TT>
<FONT COLOR="#0000ff">badblocks</FONT></TT> command. This command writes to and verifies every
bit in that partition. Although the <TT>
<FONT COLOR="#0000ff">-c</FONT></TT> option should
always be used on a new disk, doing a full read-write test is
probably pedantic. For the above partition, this test would be:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>badblocks&nbsp;-o&nbsp;blocks-list.txt&nbsp;-s&nbsp;-w&nbsp;/dev/hda1&nbsp;88326</code><br>
<code>mke2fs&nbsp;-l&nbsp;blocks-list.txt&nbsp;/dev/hda1</code><br>
</FONT></TD></TR></TABLE><P>

<P>
After running <TT>
<FONT COLOR="#0000ff">mke2fs</FONT></TT>, we will find that

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>dd&nbsp;if=/dev/hda1&nbsp;count=8&nbsp;bs=1024&nbsp;|&nbsp;file&nbsp;-</code><br>
</FONT></TD></TR></TABLE><P>
gives <TT>
<FONT COLOR="#0000ff">Linux/i386 ext2 filesystem</FONT></TT>.

<P>

<H2><A NAME="SECTION002233000000000000000">
19.3.3 Formatting floppies and removable drives</A>
</H2>

<P>
New kinds of removable devices are being released all the time.
Whatever the device, the same formatting procedure is used.
Most are IDE compatible, which means you can access them through
<TT>
<FONT COLOR="#0000ff">/dev/hd</FONT></TT><I>?</I>.

<P>
The following examples are a parallel port IDE disk drive, a
parallel port ATAPI CD-ROM drive, a parallel port ATAPI disk
drive, and your ``A:'' floppy drive, respectively:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mke2fs&nbsp;-c&nbsp;/dev/pda1</code><br>
<code>mke2fs&nbsp;-c&nbsp;/dev/pcd0</code><br>
<code>mke2fs&nbsp;-c&nbsp;/dev/pf0</code><br>
<code>mke2fs&nbsp;-c&nbsp;/dev/fd0</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Actually, using an <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT> file system on a floppy drive
wastes a lot of space. Rather, use an MS-DOS file system, which has
less overhead and can be read by anyone (see
Section&nbsp;<A HREF="node22.html#sec:floppyformat">19.3.4</A>).

<P>
You often will not want to be bothered with partitioning a
device that is only going to have one partition anyway. In this
case, you can use the whole disk as one partition. An example is
a removable IDE drive as a primary slave <FONT COLOR="#ffa500">[<I>LS120</I>
disks and <I>Jazz</I> drives as well as removable IDE brackets
are commercial examples.]</FONT>:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mke2fs&nbsp;-c&nbsp;/dev/hdb</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION002234000000000000000">
19.3.4 Creating MS-DOS floppies</A>
</H2>

<P>
Accessing files on MS-DOS/Windows floppies is explained in
Section&nbsp;<A HREF="node7.html#sec:mtools">4.16</A>. The command <TT>
<FONT COLOR="#0000ff">mformat A:</FONT></TT> will
format a floppy, but this command merely initializes the
file system; it does not check for bad blocks or do the low-level
formatting necessary to reformat floppies to odd storage
sizes.

<P>
<A NAME="sec:floppyformat"></A>
<P>
A command, called <TT>
<FONT COLOR="#0000ff">superformat</FONT></TT>, from the
<TT>
<FONT COLOR="#0000ff">fdutils</FONT></TT> package <FONT COLOR="#ffa500">[You may have to find this
package on the Internet. See Chapter <A HREF="node27.html#chap:packages">24</A> for how
to compile and install source packages.]</FONT> formats a floppy
in any way that you like. A more common (but less thorough) command
is <TT>
<FONT COLOR="#0000ff">fdformat</FONT></TT> from the <TT>
<FONT COLOR="#0000ff">util-linux</FONT></TT> package.
It verifies that each track is working
properly and compensates for variations between the mechanics of
different floppy drives. To format a 3.5-inch 1440-KB, 1680-KB, or
1920-KB floppy, respectively, run:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>cd&nbsp;/dev</code><br>
<code>./MAKEDEV&nbsp;-v&nbsp;fd0</code><br>
<code>superformat&nbsp;/dev/fd0H1440</code><br>
<code>superformat&nbsp;/dev/fd0H1690</code><br>
<code>superformat&nbsp;/dev/fd0H1920</code><br>
</FONT></TD></TR></TABLE><P>

<P>
Note that these are ``long file name'' floppies (VFAT), not old
13-character-filename MS-DOS floppies.

<P>
Most users would have only ever used a 3.5-inch floppy as a ``1.44 MB''
floppy. In fact, the disk media and magnetic head can write much
more densely than this specification, allowing 24 sectors per
track to be stored instead of the usual 18. This is why there is
more than one device file for the same drive. Some inferior
disks will, however, give errors when trying to format that
densely--<TT>
<FONT COLOR="#0000ff">superformat</FONT></TT> will show errors when this
happens.

<P>
See Table <A HREF="node21.html#tab:floppydevicenaming">18.1</A> on page <A HREF="node21.html#page:floppydevice"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A> for
the naming conventions of floppy devices, and their many respective formats.

<P>

<H2><A NAME="SECTION002235000000000000000">
19.3.5 <TT>
<FONT COLOR="#0000ff">mkswap</FONT></TT>, <TT>
<FONT COLOR="#0000ff">swapon</FONT></TT>, and <TT>
<FONT COLOR="#0000ff">swapoff</FONT></TT></A>
</H2>

<P>
The <TT>
<FONT COLOR="#0000ff">mkswap</FONT></TT> command formats a partition to be used as a
swap device. For our disk,

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mkswap&nbsp;-c&nbsp;/dev/hda5</code><br>
</FONT></TD></TR></TABLE><P>
<TT>
<FONT COLOR="#0000ff">-c</FONT></TT> has the same meaning as previously--to check for
bad blocks.

<P>
Once the partition is formatted, the kernel can be signalled to use that
partition as a swap partition with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>swapon&nbsp;/dev/hda5</code><br>
</FONT></TD></TR></TABLE><P>
and to stop usage,

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>swapoff&nbsp;/dev/hda5</code><br>
</FONT></TD></TR></TABLE><P>
Swap partitions cannot be larger than 128 MB, although you can
have as many of them as you like. You can <TT>
<FONT COLOR="#0000ff">swapon</FONT></TT> many
different partitions simultaneously.

<P>

<H1><A NAME="SECTION002240000000000000000">
19.4 Device Mounting</A>
</H1>

<P>
<A NAME="sec:mount"></A>
<P>
The question of how to access files on an arbitrary disk
(without <TT>
<FONT COLOR="#0000ff">C:</FONT></TT>, <TT>
<FONT COLOR="#0000ff">D:</FONT></TT>, etc., notation, of course)
is answered here.

<P>
In U<SMALL>NIX</SMALL>, there is only one root file system that spans many
disks. Different directories may actually exist on a different
physical disk.

<P>
<DIV ALIGN="CENTER">

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TR><TD bgcolor="#FFE0FF">
<I>To bind a directory to a physical
device (like a partition or a CD-ROM) so that the device's
file system can be read is called <I>mounting</I> the device.</I>

</TD></TR>
</TABLE>

</DIV>

<P>
The <TT>
<FONT COLOR="#0000ff">mount</FONT></TT> command is used as follows:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mount&nbsp;[-t&nbsp;&#060;fstype&#062;]&nbsp;[-o&nbsp;&#060;option&#062;]&nbsp;&#060;device&#062;&nbsp;&#060;directory&#062;</code><br>
<code>umount&nbsp;[-f]&nbsp;[&#060;device&#062;|&#060;directory&#062;]</code><br>
</FONT></TD></TR></TABLE><P>
The <TT>
<FONT COLOR="#0000ff">-t</FONT></TT> option specifies the kind of file system, and
can often be omitted since L<SMALL>INUX</SMALL> can autodetect most
file systems. <TT>
<FONT COLOR="#0000ff">&lt;fstype&gt;</FONT></TT> can be one of
<TT>
<FONT COLOR="#0000ff">adfs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">affs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">autofs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">coda</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">coherent</FONT></TT>, <TT>
<FONT COLOR="#0000ff">devpts</FONT></TT>, <TT>
<FONT COLOR="#0000ff">efs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">hfs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">hpfs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">iso9660</FONT></TT>, <TT>
<FONT COLOR="#0000ff">minix</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">msdos</FONT></TT>, <TT>
<FONT COLOR="#0000ff">ncpfs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">nfs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">ntfs</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">proc</FONT></TT>, <TT>
<FONT COLOR="#0000ff">qnx4</FONT></TT>, <TT>
<FONT COLOR="#0000ff">romfs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">smbfs</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">sysv</FONT></TT>, <TT>
<FONT COLOR="#0000ff">ufs</FONT></TT>, <TT>
<FONT COLOR="#0000ff">umsdos</FONT></TT>, <TT>
<FONT COLOR="#0000ff">vfat</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">xenix</FONT></TT>, or <TT>
<FONT COLOR="#0000ff">xiafs</FONT></TT>. The most common file systems are
discussed below. The <TT>
<FONT COLOR="#0000ff">-o</FONT></TT> option is not usually used. See
<TT>
<FONT COLOR="#0000ff">mount</FONT></TT>(8) for all possible options.

<P>

<H2><A NAME="SECTION002241000000000000000">
19.4.1 Mounting CD-ROMs</A>
</H2>

<P>
Put your distribution CD-ROM disk into your CD-ROM drive and mount
it with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>ls&nbsp;/mnt/cdrom</code><br>
<code>mount&nbsp;-t&nbsp;iso9660&nbsp;-o&nbsp;ro&nbsp;/dev/hdb&nbsp;/mnt/cdrom</code><br>
</FONT></TD></TR></TABLE><P>
(Your CD-ROM might be <TT>
<FONT COLOR="#0000ff">/dev/hdc</FONT></TT> or <TT>
<FONT COLOR="#0000ff">/dev/hdd</FONT></TT>,
however--in this case you should make a soft link
<TT>
<FONT COLOR="#0000ff">/dev/cdrom</FONT></TT> pointing to the correct device.
Your distribution may also prefer <TT>
<FONT COLOR="#0000ff">/cdrom</FONT></TT> over <TT>
<FONT COLOR="#0000ff">/mnt/cdrom</FONT></TT>.)
Now <TT>
<FONT COLOR="#0000ff">cd</FONT></TT> to your <TT>
<FONT COLOR="#0000ff">/mnt/cdrom</FONT></TT> directory. You will
notice that it is no longer empty, but ``contains'' the CD-ROM's
files. What is happening is that the kernel is redirecting all
lookups from the directory <TT>
<FONT COLOR="#0000ff">/mnt/cdrom</FONT></TT> to read from the
CD-ROM disk. You can browse around these files as though they
were already copied onto your hard drive. This is one of the
things that makes U<SMALL>NIX</SMALL> cool.

<P>
When you are finished with the CD-ROM <I>unmount</I> it with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>umount&nbsp;/dev/hdb</code><br>
<code>eject&nbsp;/dev/hdb</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION002242000000000000000">
19.4.2 Mounting floppy disks</A>
</H2>

<P>
Instead of using <TT>
<FONT COLOR="#0000ff">mtools</FONT></TT>, you could mount the floppy disk
with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mkdir&nbsp;/mnt/floppy</code><br>
<code>mount&nbsp;-t&nbsp;vfat&nbsp;/dev/fd0&nbsp;/mnt/floppy</code><br>
</FONT></TD></TR></TABLE><P>
or, for older MS-DOS floppies, use

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mkdir&nbsp;/mnt/floppy</code><br>
<code>mount&nbsp;-t&nbsp;msdos&nbsp;/dev/fd0&nbsp;/mnt/floppy</code><br>
</FONT></TD></TR></TABLE><P>
Before you eject the floppy, it is essential to run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>umount&nbsp;/dev/fd0</code><br>
</FONT></TD></TR></TABLE><P>
in order that cached data is committed to the disk. Failing to
<TT>
<FONT COLOR="#0000ff">umount</FONT></TT> a floppy before ejecting will probably corrupt
its file system.

<P>

<H2><A NAME="SECTION002243000000000000000">
19.4.3 Mounting Windows and NT partitions</A>
</H2>

<P>
Mounting a Windows partition can also be done with the
<TT>
<FONT COLOR="#0000ff">vfat</FONT></TT> file system, and NT partitions (read-only) with
the <TT>
<FONT COLOR="#0000ff">ntfs</FONT></TT> file system. VAT32 is also supported (and autodetected).
For example,

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mkdir&nbsp;/windows</code><br>
<code>mount&nbsp;-t&nbsp;vfat&nbsp;/dev/hda1&nbsp;/windows</code><br>
<code>mkdir&nbsp;/nt</code><br>
<code>mount&nbsp;-t&nbsp;ntfs&nbsp;/dev/hda2&nbsp;/nt</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H1><A NAME="SECTION002250000000000000000">
19.5 File System Repair: <TT>
<FONT COLOR="#0000ff">fsck</FONT></TT></A>
</H1>

<P>
<A NAME="sec:repfs"></A>
<P>
<TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> stands for <I>file system check</I>.
<TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> scans the file system, reporting and fixing
errors. Errors would normally occur only if the kernel halted
before the file system was <TT>
<FONT COLOR="#0000ff">umount</FONT></TT>ed.
In this case, it may have been in the middle of a write operation which left the
file system in an <I>incoherent</I> state. This usually happens
because of a power failure. The file system is then
said to be <I>unclean</I>.

<P>
<TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> is used as follows:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>fsck&nbsp;[-V]&nbsp;[-a]&nbsp;[-t&nbsp;&#060;fstype&#062;]&nbsp;&#060;device&#062;</code><br>
</FONT></TD></TR></TABLE><P>
<TT>
<FONT COLOR="#0000ff">-V</FONT></TT> means to produce verbose output. <TT>
<FONT COLOR="#0000ff">-a</FONT></TT> means to
check the file system noninteractively--meaning to not ask
the user before trying to make any repairs.

<P>
Here is what you would normally do with L<SMALL>INUX</SMALL> if you don't
know a whole lot about the <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT> file system:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>fsck&nbsp;-a&nbsp;-t&nbsp;ext2&nbsp;/dev/hda1</code><br>
</FONT></TD></TR></TABLE><P>
although you can omit the <TT>
<FONT COLOR="#0000ff">-t</FONT></TT> option because L<SMALL>INUX</SMALL>
autodetects the file system. Note that you should not run
<TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> on a mounted file system. In exceptional circumstances
it is permissible to run <TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> on a file system that has been
mounted read-only.

<P>
<TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> actually just runs a program specific to that
file system. In the case of <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT>, the command
<TT>
<FONT COLOR="#0000ff">e2fsck</FONT></TT> (also known as <TT>
<FONT COLOR="#0000ff">fsck.ext2</FONT></TT>) is run. See
<TT>
<FONT COLOR="#0000ff">e2fsck</FONT></TT>(8) for exhaustive details.

<P>
During an interactive check (without the <TT>
<FONT COLOR="#0000ff">-a</FONT></TT> option,
or with the <TT>
<FONT COLOR="#0000ff">-r</FONT></TT> option--the default), various questions
may be asked of you, as regards fixing and saving things.
It's best to save stuff if you aren't sure; it will be placed in
the <TT>
<FONT COLOR="#0000ff">lost+found</FONT></TT> directory below the root directory of the
particular device. In the example system further below, there would exist the directories
<TT>
<FONT COLOR="#0000ff">/lost+found</FONT></TT>, <TT>
<FONT COLOR="#0000ff">/home/lost+found</FONT></TT>, <TT>
<FONT COLOR="#0000ff">/var/lost+found</FONT></TT>,
<TT>
<FONT COLOR="#0000ff">/usr/lost+found</FONT></TT>, etc. After doing a check on, say, <TT>
<FONT COLOR="#0000ff">/dev/hda9</FONT></TT>,
list the <TT>
<FONT COLOR="#0000ff">/home/lost+found</FONT></TT> directory and delete what you
think you don't need. These will usually be temporary files and log
files (files that change often). It's rare to lose
important files because of an unclean shutdown.

<P>

<H1><A NAME="SECTION002260000000000000000">
19.6 File System Errors on Boot</A>
</H1>

<P>
Just read Section <A HREF="node22.html#sec:repfs">19.5</A> again and run <TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> on the
file system that reported the error.

<P>

<H1><A NAME="SECTION002270000000000000000">
19.7 Automatic Mounts: <TT>
<FONT COLOR="#0000ff">fstab</FONT></TT></A>
</H1>

<P>
Manual mounts are explained above for new and removable disks. It is,
of course necessary for file systems to be automatically mounted
at boot time. What gets mounted and how is specified in the
configuration file <TT>
<FONT COLOR="#0000ff">/etc/fstab</FONT></TT>.

<P>
<TT>
<FONT COLOR="#0000ff">/etc/fstab</FONT></TT> will usually look something like this for the disk we
partitioned above:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>10</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>/dev/hda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext2&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;1</code><br>
<code>/dev/hda6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/tmp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext2&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2</code><br>
<code>/dev/hda7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/var&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext2&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2</code><br>
<code>/dev/hda8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext2&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2</code><br>
<code>/dev/hda9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/home&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ext2&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2</code><br>
<code>/dev/hda5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;swap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;swap&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
<code>/dev/fd0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/mnt/floppy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;&nbsp;&nbsp;&nbsp;noauto,user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
<code>/dev/cdrom&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/mnt/cdrom&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iso9660&nbsp;noauto,ro,user&nbsp;&nbsp;0&nbsp;0</code><br>
<code>none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/proc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
<code>none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/dev/pts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;devpts&nbsp;&nbsp;mode=0622&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0</code><br>
</FONT></TD></TR></TABLE><P>

<P>
For the moment we are interested in the first six lines only.
The first three fields (columns) dictate the partition, the
directory where it is to be mounted, and the file system type,
respectively. The fourth field gives options (the
<TT>
<FONT COLOR="#0000ff">-o</FONT></TT> option to <TT>
<FONT COLOR="#0000ff">mount</FONT></TT>).

<P>
The fifth field tells whether the file system contains real
files. The field is used by the <TT>
<FONT COLOR="#0000ff">dump</FONT></TT> command to decide if it
should be backed up. This is not commonly used.

<P>
The last field tells the order in which an <TT>
<FONT COLOR="#0000ff">fsck</FONT></TT> should
be done on the partitions. The <TT>
<FONT COLOR="#0000ff">/</FONT></TT> partition should come
first with a <TT>
<FONT COLOR="#0000ff">1</FONT></TT>, and all other partitions should come
directly after. Placing <TT>
<FONT COLOR="#0000ff">2</FONT></TT>'s everywhere else
ensures that partitions on different disks can be checked in
parallel, which speeds things up slightly at boot time.

<P>
The <TT>
<FONT COLOR="#0000ff">floppy</FONT></TT> and <TT>
<FONT COLOR="#0000ff">cdrom</FONT></TT> entries enable you to use
an abbreviated form of the <TT>
<FONT COLOR="#0000ff">mount</FONT></TT> command.
<TT>
<FONT COLOR="#0000ff">mount</FONT></TT> will just look up the corresponding directory and
file system type from <TT>
<FONT COLOR="#0000ff">/etc/fstab</FONT></TT>. Try

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mount&nbsp;/dev/cdrom</code><br>
</FONT></TD></TR></TABLE><P>
These entries also have the <TT>
<FONT COLOR="#0000ff">user</FONT></TT> option, which
allows ordinary users to mount these devices. The <TT>
<FONT COLOR="#0000ff">ro</FONT></TT> option
once again tells to <TT>
<FONT COLOR="#0000ff">mount</FONT></TT> the CD-ROM read only, and the
<TT>
<FONT COLOR="#0000ff">noauto</FONT></TT> command tells <TT>
<FONT COLOR="#0000ff">mount</FONT></TT> <I>not</I> to mount
these file systems at boot time. (More comes further below.)

<P>
<TT>
<FONT COLOR="#0000ff">proc</FONT></TT> is a kernel information database that looks
like a file system. For example <TT>
<FONT COLOR="#0000ff">/proc/cpuinfo</FONT></TT> is not
any kind of file that actually exists on a disk somewhere. Try
<TT>
<FONT COLOR="#0000ff">cat /proc/cpuinfo</FONT></TT>.

<P>
Many programs use <TT>
<FONT COLOR="#0000ff">/proc</FONT></TT> to get dynamic information on the
status and configuration of your machine. More on this is
discussed in Section <A HREF="node45.html#sec:proc">42.4</A>.

<P>
The <TT>
<FONT COLOR="#0000ff">devpts</FONT></TT> file system is another pseudo file system
that generates terminal master/slave pairs for programs. This is
mostly of concern to developers.

<P>

<H1><A NAME="SECTION002280000000000000000">
19.8 Manually Mounting <TT>
<FONT COLOR="#0000ff">/proc</FONT></TT></A>
</H1>

<P>
<A NAME="page:mountproc"></A>
<P>
You can mount the <TT>
<FONT COLOR="#0000ff">proc</FONT></TT> file system with the command

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mount&nbsp;-t&nbsp;proc&nbsp;/proc&nbsp;/proc</code><br>
</FONT></TD></TR></TABLE><P>
This is an exception to the normal <TT>
<FONT COLOR="#0000ff">mount</FONT></TT> usage.
Note that all common L<SMALL>INUX</SMALL> installations require <TT>
<FONT COLOR="#0000ff">/proc</FONT></TT>
to be mounted at boot time. The only times you will need this
command are for manual startup or when doing a <TT>
<FONT COLOR="#0000ff">chroot</FONT></TT>.
(See page <A HREF="node23.html#page:useingchroot"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A>.)

<P>

<H1><A NAME="SECTION002290000000000000000">
19.9 RAM and Loopback Devices</A>
</H1>

<P>
<A NAME="sec:ramloop"></A>
<P>
A <I>RAM device</I> is a block device that can be used as a
disk but really points to a physical area of RAM.

<P>
A <I>loopback device</I> is a block device that can be used as a
disk but really points to an ordinary file somewhere.

<P>
If your imagination isn't already running wild, consider
creating a floppy disk with file system, files and all,
<I>without actually having a floppy disk</I>, and being able to dump this creation to floppy
at any time with <TT>
<FONT COLOR="#0000ff">dd</FONT></TT>. You can also have a whole
other L<SMALL>INUX</SMALL> system
inside a 500 MB file on a Windows partition <I>and</I> boot into it--thus
obviating having to repartition a Windows machine just to run L<SMALL>INUX</SMALL>.
All this can be done with loopback and RAM devices.

<P>

<H2><A NAME="SECTION002291000000000000000">
19.9.1 Formatting a floppy inside a file</A>
</H2>

<P>
The operations are quite trivial. To create an <TT>
<FONT COLOR="#0000ff">ext2</FONT></TT> floppy inside
a 1440 KB <I>file</I>, run:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>dd&nbsp;if=/dev/zero&nbsp;of=~/file-floppy&nbsp;count=1440&nbsp;bs=1024</code><br>
<code>losetup&nbsp;/dev/loop0&nbsp;~/file-floppy</code><br>
<code>mke2fs&nbsp;/dev/loop0</code><br>
<code>mkdir&nbsp;~/mnt</code><br>
<code>mount&nbsp;/dev/loop0&nbsp;~/mnt</code><br>
<code>ls&nbsp;-al&nbsp;~/mnt</code><br>
</FONT></TD></TR></TABLE><P>

<P>
When you are finished copying the files that you want into <TT>
<FONT COLOR="#0000ff">~/mnt</FONT></TT>, merely run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>umount&nbsp;~/mnt</code><br>
<code>losetup&nbsp;-d&nbsp;/dev/loop0</code><br>
</FONT></TD></TR></TABLE><P>

<P>
To dump the file system to a floppy, run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>dd&nbsp;if=~/file-floppy&nbsp;of=/dev/fd0&nbsp;count=1440&nbsp;bs=1024</code><br>
</FONT></TD></TR></TABLE><P>
A similar procedure for RAM devices is

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
<font size="-1"><code>5</code></font><code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>dd&nbsp;if=/dev/zero&nbsp;of=/dev/ram0&nbsp;count=1440&nbsp;bs=1024</code><br>
<code>mke2fs&nbsp;/dev/ram0</code><br>
<code>mkdir&nbsp;~/mnt</code><br>
<code>mount&nbsp;/dev/ram0&nbsp;~/mnt</code><br>
<code>ls&nbsp;-al&nbsp;~/mnt</code><br>
</FONT></TD></TR></TABLE><P>

<P>
When you are finished copying the files that you want into <TT>
<FONT COLOR="#0000ff">~/mnt</FONT></TT>, merely run

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>umount&nbsp;~/mnt</code><br>
</FONT></TD></TR></TABLE><P>
To dump the file system to a floppy or file, respectively, run:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>dd&nbsp;if=/dev/ram0&nbsp;of=/dev/fd0&nbsp;count=1440&nbsp;bs=1024</code><br>
<code>dd&nbsp;if=/dev/ram0&nbsp;of=~/file-floppy&nbsp;count=1440&nbsp;bs=1024</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H2><A NAME="SECTION002292000000000000000">
19.9.2 CD-ROM files</A>
</H2>

<P>
Another trick is to move your CD-ROM to a file for high-speed
access. Here, we use a shortcut instead of the <TT>
<FONT COLOR="#0000ff">losetup</FONT></TT> command:

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>dd&nbsp;if=/dev/cdrom&nbsp;of=some_name.iso</code><br>
<code>mount&nbsp;-t&nbsp;iso9660&nbsp;-o&nbsp;ro,loop=/dev/loop0&nbsp;some_name.iso&nbsp;/cdrom</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<H1><A NAME="SECTION0022100000000000000000">
19.10 Remounting from Read-Only to Read-Write</A>
</H1>

<P>
A file system that is already mounted as <TT>
<FONT COLOR="#0000ff">r</FONT></TT>ead-<TT>
<FONT COLOR="#0000ff">o</FONT></TT>nly can be
remounted as <TT>
<FONT COLOR="#0000ff">r</FONT></TT>ead-<TT>
<FONT COLOR="#0000ff">w</FONT></TT>rite, for example, with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>mount&nbsp;-o&nbsp;rw,remount&nbsp;/dev/hda1&nbsp;/</code><br>
</FONT></TD></TR></TABLE><P>
This command is useful when you log in in single-user mode
with no write access to your root partition.

<P>

<H1><A NAME="SECTION0022110000000000000000">
19.11 Disk <TT>
<FONT COLOR="#0000ff">sync</FONT></TT></A>
</H1>

<P>
The kernel caches write operations in memory for performance reasons.
These <I>flush</I> (physically commit to the magnetic media)
every so often, but you sometimes want to force a flush.
This is done simply with

<P><TABLE nowrap="1" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD valign="top" class="source" width="2%"><FONT color=red>
<code>&nbsp;</code><br>
</FONT></TD><TD valign="top" class="source" bgcolor="#FFE0C0"><FONT color=blue>
<code>sync</code><br>
</FONT></TD></TR></TABLE><P>

<P>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2087"
  HREF="node23.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html2083"
  HREF="rute.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html2077"
  HREF="node21.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html2085"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2088"
  HREF="node23.html">20. Advanced Shell Scripting</A>
<B> Up:</B> <A NAME="tex2html2084"
  HREF="rute.html">rute</A>
<B> Previous:</B> <A NAME="tex2html2078"
  HREF="node21.html">18. UNIX Devices</A>
 &nbsp <B>  <A NAME="tex2html2086"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->

</BODY>
</HTML>
