<!-- NAME: main.tpl -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
  <head>
    <title>L i n u x [inetdoc]: (Guides) </title>
    <meta HTTP-EQUIV="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="Content-Language" content="fr">
    <meta name="description" content="inet doc linux">
    <meta name="author" content="philippe.latu@linux-france.org">
    <meta name="copyright" content="(c)2000 Philippe Latu">
    <meta name="publisher" content="philippe.latu@linux-france.org">
    <meta name="keywords" content="documentation, ethernet, formation, guide, ieee, ifconfig, inet, interface, ip, iproute2, iptables, isdn, IUT, IUP, latu, linux, net, OSI, ping, reseau, RNIS, route, routage, TCP, TCP/IP, UDP">
    <meta name="audience" content="All, Tous">
    <meta name="robots" content="INDEX,FOLLOW">
    <link rel="STYLESHEET" type="text/css" href="/prj/inetdoc/style/docstyle.css">
    <script language="javascript" type="text/javascript">
      <!-- for javascript enabled browser's only
        if (top.location != location) top.location.href = location.href;
	
        function popup(form) {
          optionIndex = form.banner.SelectedIndex;
          if (optionIndex == 0) return;
          location.href = form.banner.options[form.banner.selectedIndex].value;
          }
      // end script hiding -->
    </script>
  </head>
<BODY BGCOLOR="#FFFFFF" TEXT="#990000" LINK="#990000" VLINK="#990000" ALINK="#990000" leftMargin="0" topMargin="0" marginheight="0" marginwidth="0">
<TABLE width=100% border=0 cellspacing=2 cellpadding=0 align=center>
  <TR>
    <TD width=25% bgcolor=#990000 align=center valign=top>
      <TABLE width=100% border=0 cellspacing=0 cellpadding=0 align=center>
        <TR align=right> 
	  <TD bgcolor=#FF9966><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=2 alt=""></TD>
	</TR>
	<TR align=right> 
	  <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	</TR>
	<TR align=right> 
	  <TD bgcolor=#990000><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
      	</TR>
	<TR>
	  <TD bgcolor=#990000 align=center>
	    <a class="nodecor" href="/prj/inetdoc">
              <IMG src="/prj/inetdoc/images/upleft.png" border=0 width=158 height=96 hspace=10 alt="logo">
      	    </a>
	  <TD>
	</TR>
      </TABLE>
    </TD>
    <TD width=75% bgcolor=#FFFFFF align=left valign=top>
      <!-- banner menu start -->
      <form>
        <TABLE width=100% border=0 cellspacing=0 cellpadding=0 align=center>
	  <!-- 1st row -->
	  <TR align=right> 
	    <TD bgcolor=#FF9966><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=2 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#990000><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
	  </TR>
	  <TR>
	    <TD bgcolor=#FF9966>
	      <TABLE width="100%" border="0" cellspacing="3" cellpadding="0" width="100%">
	        <TR>
		  <th align="left" valign="top" bgcolor="#FFCC99">
  <a class="reduced" href="/prj/inetdoc/i/net/">&nbsp;Accueil</a>
</th>
<th align="left" valign="top" bgcolor="#FFCC99">
  <a class="reduced" href="/prj/inetdoc/i/net/articles/">&nbsp;Articles</a>
</th>
<th align="left" valign="top" bgcolor="#FFCC99">
  <a class="reduced" href="/prj/inetdoc/i/net/courses/">&nbsp;Cours</a>
</th>
<th align="left" valign="top" bgcolor="white">
  <a class="reduced" href="/prj/inetdoc/i/net/guides/">&nbsp;Guides</a>
</th>
<th align="left" valign="top" bgcolor="#FFCC99">
  <a class="reduced" href="/prj/inetdoc/i/net/formation/">&nbsp;Formation</a>
</th>
<th align="left" valign="top" bgcolor="#FFCC99">
  <a class="reduced" href="/prj/inetdoc/i/net/download/">&nbsp;Téléchargement</a>
</th>
<th align="left" valign="top" bgcolor="#FFCC99">
  <a class="reduced" href="/prj/inetdoc/i/net/source/">&nbsp;Source</a>
</th>

		</TR>
	      </TABLE>
	    </TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#FFFFFF><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
	  </TR>
	  <!-- 2nd row -->
	  <TR align=right> 
	    <TD bgcolor=#FF9966><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=2 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#990000><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
	  </TR>
	  <TR>
	    <TD bgcolor=#FFCC66>
	      <FONT color=#990000 size=-1 face="Arial, 'Myriad Web', Syntax, sans-serif"><B>
	       <SELECT name="banner" onChange="popup(this.form)">
	         <OPTION value="/prj/inetdoc/i/net/../../download/packet-filtering-HOWTO.pdf">
  Téléchargement Linux 2.4 Packet Filtering HOWTO VF
</OPTION>
<OPTION value="/prj/inetdoc/i/net/guides/">
  Autres guides
</OPTION>

	       </SELECT>
	      </B></FONT>
	    </TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#FFFFFF><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
	  </TR>
	  <!-- 3rd row -->
	  <TR align=right> 
	    <TD bgcolor=#FF9966><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=2 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#990000><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
	  </TR>
	  <TR>
	    <TD bgcolor="#990000" align="left" valign="middle" width="100%" height="100%">
	      <div class="browse"><font size=1>&nbsp;&nbsp;Références : <a href="http://netfilter.kernelnotes.org/" class="browse"><font size=1>Netfilter Home</font></a>&nbsp;
</font></div>
	    </TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#990000><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=4 alt=""></TD>
	  </TR>
	  <TR align=right> 
	    <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	  </TR>
	</TABLE>
      </form>
      <!-- banner menu end -->
    </TD>
  </TR>
  <TR>
    <TD width=25% bgcolor=#330066 align=left valign=top>
      <TABLE width=100% border=0 cellspacing=0 cellpadding=0 align=center>
        <TR align=right> 
	  <TD bgcolor=#FF9966><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=2 alt=""></TD>
	</TR>
	<TR align=right> 
	  <TD bgcolor=#330066><IMG src="/prj/inetdoc/images/blank.gif" width=1 height=1 alt=""></TD>
	</TR>
	<TR>
	  <TD bgcolor=#330066 align=center>
	    &nbsp;<!-- no Toc section in guides/packet-filtering-HOWTO/packet-filtering-HOWTO.html -->
      	    <br>
      	    <TABLE width=100% border=0 cellpadding=0 cellspacing=4>
              <TR>
	  	<TD bgcolor=#000000 align=center>
	    	  <TABLE width=100% border=0 cellpadding=2 cellspacing=1>
              	    <TR>
	              <TH bgcolor=#FFCC66 align="center" valign="top" class="toc-title">
		        <a class="toc-title" href="mailto:philippe.latu@linux-france.org">
	        	  Contact<img src="/prj/inetdoc/images/envelope.gif" border=0 width=50 height=35 align="middle" alt="mail">
		  	</a>
		      </TH>
              	    </TR>
              	    <TR>
	              <TD bgcolor=#FFCC99 align=center valign=top class="toc-item">
		        &nbsp;<a class="toc-item" href="/prj/inetdoc/log/">Carnet de bord</a>
		      </TD>
              	    </TR>
              	    <TR>
	              <TD bgcolor=#FFCC99 align=center valign=top class="toc-item">
		  	&nbsp;<a class="toc-item" href="/prj/inetdoc/legal/">Notice légale</a>
		      </TD>
              	    </TR>
            	  </TABLE>
	  	</TD>
              </TR>
      	    </TABLE>
          </TD>
        </TR>
      </TABLE>
    </TD>
    <TD width=75% bgcolor=#FFFFFF align=left valign=top>
      <TABLE width=100% border=0 cellspacing=0 cellpadding=8 align=center>
        <TR>
	  <TD bgcolor=#FFFFFF align=left valign=top>
            <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta name="generator" content=
"HTML Tidy for Linux/x86 (vers 1st March 2002), see www.w3.org">
<meta name="GENERATOR" content="LinuxDoc-Tools 0.9.21">
<title>Linux 2.4 Packet Filtering HOWTO: Donc Qu'est ce Qu'un
Filtre à Paquets?</title>
<link href="packet-filtering-HOWTO-4.html" rel="next">
<link href="packet-filtering-HOWTO-2.html" rel="previous">
<link href="packet-filtering-HOWTO.html#toc3" rel="contents">
</head>
<body>
<a href="packet-filtering-HOWTO-4.html">Page suivante</a> <a href=
"packet-filtering-HOWTO-2.html">Page précédente</a> <a href=
"packet-filtering-HOWTO.html#toc3">Table des matières</a> 

<hr>
<h2><a name="s3">3.</a> <a href=
"packet-filtering-HOWTO.html#toc3">Donc Qu'est ce Qu'un Filtre à
Paquets?</a></h2>

<p>Un filtre à paquets est un programme qui regarde
l'<em>en-tète</em> des paquets qui passent, et décide du sort du
paquet entier. Il peut décider de <b>DROP</b>er le paquet (p.e.,
faire comme si il n'avait jamais été reçu), <b>ACCEPT</b> le paquet
(p.e. le laisser passer), ou quelque chose de plus compliqué.</p>

<p>Sous Linux, le filtrage de paquets est dans le noyau (comme un
module, ou directement dedans), et il y a un tas de trucs qu'on
peut faire avec les paquets, mais le principe de base qui est de
regarder les en-tètes et de décider du sort du paquet est toujours
la.</p>

<h2><a name="ss3.1">3.1</a> <a href=
"packet-filtering-HOWTO.html#toc3.1">Pourquoi Voudrais-je Filtrer
des Paquets?</a></h2>

<p>Controle. Securité. Prévention.</p>

<dl>
<dt><b>Controle:</b></dt>

<dd>
<p>quand tu utilises une machine linux pour connecter ton réseau
interne à un autre réseau (on va dire Internet), tu as la
possibilité de permettre certains types de traffic et de prohiber
d'autres. Par exemple, l'en-tète du paquet contient l'adresse de
destination du paquet, donc tu peux empecher les paquets d'aller
vers une certaine partie du réseau externe. Comme autre exemple,
j'utilise netscape pour accèder à l'archive de Dilbert. Il y a des
pubs de doubleclick.net sur la page, et netscape perds mon temps à
les télécharger. Dire au filtre de paquets de ne pas permettre de
paquets de et vers doubleclick.net résout ce problème (il y a de
meilleures façons de faire ça : voir Junkbuster).</p>
</dd>

<dt><b>Securité:</b></dt>

<dd>
<p>quand ta machine Linux est la seule chose entre le chaos
d'internet et ton beau réseau bien ordonné, c'est intéressant de
savoir que tu peux limiter ce qui frappe à ta porte. Par exemple,
tu peux permettre à tout de sortir de ton réseau, mais tu peux être
embèté par le bien connu `Ping of Death' venant d'étrangers
malicieux. Comme autre exemple tu ne voudrais pas qu'un étranger
telenette dans ta machine Linux, même si tout tes comptes ont un
mot de passe. Peut être que tu veux (comme la pluspart des gens)
être un observateur sur internet et pas un serveur (voulu ou pas).
Simplement ne laisses personne se connecter, en utilisant le
filtrage de paquets pour rejeter les paquets entrants qui utilisés
pour établir des connections.</p>
</dd>

<dt><b>Prévention:</b></dt>

<dd>
<p>Parfois une machine mal configurée sur le reseau local décidera
d'envoyer des paquets au monde extérieur. C'est intéressant de dire
au filtrage de paquets de te dire si quelque chose d'anormal se
produit; peut être veux tu y faire quelque chose ou peut être est
tu curieux par nature.</p>
</dd>
</dl>

<br>
<br>
 

<h2><a name="filter-linux"></a> <a name="ss3.2">3.2</a> <a href=
"packet-filtering-HOWTO.html#toc3.2">Comment est-ce que je Filtre
les Paquets Sous Linux?</a></h2>

<p>Les Noyaux Linux ont le filtrage de paquet depuis la série des
1.1. La première génération, basée sur ipfw de BSD, a été portée
par Alan Cox fin 1994. Ca a été amélioré par Jos Vos et d'autres
pour Linux 2.0; le logiciel `ipfwadm' controllait les régles de
filtrage du noyau. A la mi-1998, pour Linux 2.2, j'ai méchamment
retravaillé le noyau, avec l'aide de Michael Neuling, et ai
introduit un logiciel appelé `ipchains'. Finallement, le logiciel
de 4ème génération, `iptables', et une autre réécriture du kernel
sont arrivés a la mi-1999 pour Linux 2.4. C'est cet iptables sur
lequel se concentre ce HOWTO.</p>

<p>Tu as besoin d'un noyau qui a l'infrastructure netfilter en lui
: netfilter est une infrastructure générale dans le noyau sur
laquelle d'autres choses (comme le module iptables) viennent se
greffer. ça veut dire que tu as besoin de Linux 2.3.15 ou plus, et
de répondre `Y' à CONFIG_NETFILTER dans la configuration du
noyau.</p>

<p>L'outil <code>iptables</code> parle au noyau et lui dit quels
paquets filtrer. A moins que tu ne sois programmeur ou bien
vachement curieux c'est comme ça que tu vas controller les
paquets.</p>

<h3>iptables</h3>

<p>L'outil <code>iptables</code> insère et retire des règles de la
table de filtrage des paquets du noyau. Ca veut dire que quoi que
tu configures, ca sera perdu au reboot; vois <a href=
"#permanent">Faire des Règles Permanentes</a> pour comment être sûr
que tes règles seront restaurées au prochain démarrage.</p>

<p><code>iptables</code> est un remplacement <code>ipfwadm</code>
et <code>ipchains</code> : voir <a href=
"packet-filtering-HOWTO-8.html#oldstyle">Utiliser ipchains et
ipfwadm</a> pour comment éviter de peiner sur iptables si tu
utilises un des ces 2 derniers.</p>

<h3><a name="permanent"></a> Faire des Règles Permanentes</h3>

<p>Ta config de firewall courante est stockée dans le noyau, et
donc sera perdue au redémarrage. Ecrire iptables-save et
iptables-restore est dans ma liste de choses à faire. Quand ils
existeront ils seront cools, je le promets.</p>

<p>En attendant, mets les commandes de configuration nécessaires
dans un script d'initialisation. Sois sûr de faire quelque chose
d'intelligent si une des commandes venait à foirer (habituellement
`exec /sbin/sulogin').</p>

<hr>
<a href="packet-filtering-HOWTO-4.html">Page suivante</a> <a href=
"packet-filtering-HOWTO-2.html">Page précédente</a> <a href=
"packet-filtering-HOWTO.html#toc3">Table des matières</a>
</body>
</html>


	  </TD>
	</TR>
      </TABLE>
    </TD>
  </TR>
  <TR>
    <TD colspan=2 width=100% bgcolor=#990000 align=left>
      <TABLE width=100% border=0 cellpadding=0 cellspacing=4>
        <TR>
	  <TD bgcolor=#990000 align=right>
	    <div class="filemodtime">
	      <i>Dernière modification le : 9 May 2002 13:53</i>
	    </div>
      	    <a style="text-decoration:none" href="http://www.php.net">
              <img src="/prj/inetdoc/images/php-small-trans-dark.gif" border=0 width=88 height=31 alt="php logo">
      	    </a>
      	    &nbsp;&nbsp;
      	    <a style="text-decoration:none" href="http://www.debian.org">
              <img src="/prj/inetdoc/images/openlogo-25.jpg" border=0 width=25 height=30 alt="debian logo">
      	    </a>
      	    &nbsp;&nbsp;
	    <!-- stat_code_start
	    <a style="text-decoration:none" href="http://www.estat.com/getstats?serial=21701747824">
	      <img src="http://perso.estat.com/cgi-bin/perso/21701747824?page=marque_perso" border=0>
	    </a>
	     stat_code_end -->
	    <!-- eStat -->
	    <SCRIPT LANGUAGE="JavaScript">
	      <!--
	      var _UJS=0;
	      //-->
	    </SCRIPT>
	    <SCRIPT LANGUAGE="JavaScript" SRC="http://perso.estat.com/js/m.js">
	    </SCRIPT>
	    <SCRIPT LANGUAGE="JavaScript">
	      <!--
	      if(_UJS) _estat('21701747824','Page_D_Accueil','Accueil');
	      //-->
	    </SCRIPT>
	    <!-- /eStat -->
	  </TD>
	</TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
</body>
</html>
<!-- END: main.tpl -->
