<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML
><HEAD
><TITLE
>Livraison par qmail-local et utilisateur alias</TITLE
><META
NAME="CREATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.07"><META
NAME="form"
CONTENT="html"><META
NAME="Description"
CONTENT="Introduction to qmail in french"><META
NAME="Keywords"
CONTENT="qmail mta"><META
NAME="Robot"
CONTENT="index,follow"><META
NAME="Author"
CONTENT="Djalil Chafai"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Introduction à qmail</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c04.html"
>Précédent</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapitre 4. Configuration : la base</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c0403.html"
>Suivant</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"><H1
><A
NAME="LIVRAISON"
>Livraison par qmail-local et utilisateur alias</A
></H1
><P
>          
Dans le système <I
CLASS="PRODUCTNAME"
>qmail</I
>, un utilisateur nommé
<TT
CLASS="LITERAL"
>login</TT
> contrôle 
toutes les adresses courriel de la forme <TT
CLASS="LITERAL"
>login-*</TT
> où l'étoile
représente une chaîne quelconque formée de caractères valides pour une adresse.
Cette règle générale peut être altérée par la mise en place d'un fichier
d'alias, voir la <A
HREF="c05.html#ALIAS"
>la section <I
>Le fichier d'alias /var/qmail/users/assign</I
> du Chapitre 5</A
>.</P
><P
>Pour chaque adresse <TT
CLASS="LITERAL"
>login-chaine</TT
>, l'utilisateur peut
décider de créer le fichier <TT
CLASS="FILENAME"
>~login/.qmail-chaine</TT
> qui
contiendra les instructions à suivre par
<I
CLASS="APPLICATION"
>qmail-local</I
>, le livreur de courriel 
(MDA) de <I
CLASS="PRODUCTNAME"
>qmail</I
>.
Par convention, le fichier <TT
CLASS="FILENAME"
>~login/.qmail</TT
> correspond à
l'adresse <TT
CLASS="LITERAL"
>login</TT
> tout court. De plus, le fichier spécial
<TT
CLASS="FILENAME"
>~login/.qmail-default</TT
> lorsqu'il existe, joue le rôle de
fichier par défaut.</P
><P
>En l'abscence des fichiers
<TT
CLASS="FILENAME"
>~login/.qmail</TT
> et
<TT
CLASS="FILENAME"
>~login/.qmail-default</TT
>, 
<I
CLASS="APPLICATION"
>qmail-local</I
>
livrera le courriel à destination de <TT
CLASS="LITERAL"
>~login</TT
>
en suivant la règle de livraison par défaut spécifiée au lancement de
<I
CLASS="APPLICATION"
>qmail-send</I
>, voir la 
<A
HREF="c04.html#ALIASEMPTY"
>la section <I
>aliasempty</I
></A
>.
En général, cette livraison se fait dans la BAL au format mbox
<TT
CLASS="FILENAME"
>~login/Mailbox</TT
> mais celà relève du choix de 
l'administrateur.</P
><P
>Il en va tout autrement pour les courriels à
destination de <TT
CLASS="LITERAL"
>login-chaine</TT
>.
<I
CLASS="APPLICATION"
>qmail-local</I
> ne livrera pas un courriel à
destination de <TT
CLASS="LITERAL"
>login-chaine</TT
>
s'il ne trouve ni <TT
CLASS="FILENAME"
>~login/.qmail-chaine</TT
> ni
<TT
CLASS="FILENAME"
>~login/.qmail-default</TT
> au moment de livrer.
En fait, ce courriel sera intercepté par l'utilisateur spécial
<TT
CLASS="LITERAL"
>alias</TT
>
si son fichier <TT
CLASS="FILENAME"
>~alias/.qmail-default</TT
> existe et
retournera à l'expéditeur sinon.</P
><P
>Les fichiers <TT
CLASS="FILENAME"
>~login/.qmail-*</TT
> ont tous la même syntaxe.</P
><H2
><A
NAME="I(LIVRAISON)C(1,SECT2)"
>Remarques sur qmail-local</A
></H2
><P
>Je rappelle qu'il faut faire très attention aux droits d'accès aux
répertoires personnels des utilisateurs. En effet, le MDA
<I
CLASS="APPLICATION"
>qmail-local</I
>
refusera de livrer le courrier à un utilisateur dont le répertoire personnel
est autorisé en écriture pour le groupe ou pour tout le monde. Idem pour le
bit «sticky». La même remarque s'applique aux fichiers
<TT
CLASS="FILENAME"
>.qmail*</TT
>.
Voir la page de manuel <I
CLASS="APPLICATION"
>dot-qmail</I
>.</P
><P
>Il faut aussi signaler que <I
CLASS="APPLICATION"
>qmail-local</I
>
convertit toutes les majuscules en minuscules dans les noms de fichiers
<TT
CLASS="FILENAME"
>.qmail-*</TT
>. Il convertit aussi le caractère point en
caractère deux-points et réciproquement.
Ainsi, pour que le courriel à destination de 
<TT
CLASS="LITERAL"
>jojo.lapin</TT
> soit livré à l'utilisateur
<TT
CLASS="LITERAL"
>jojo</TT
>, il suffit que jojo possède un 
<TT
CLASS="FILENAME"
>.qmail-jojo:lapin</TT
> dans son répertoire
personnel <TT
CLASS="FILENAME"
>~jojo</TT
>.</P
><HR
ALIGN="LEFT"
WIDTH="515"><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c04.html"
>Précédent</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book01.html"
>Page principale</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c0403.html"
>Suivant</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Configuration : la base</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c04.html"
>Niveau précédent</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Syntaxe des .qmail*</TD
></TR
></TABLE
></BODY
></HTML
>