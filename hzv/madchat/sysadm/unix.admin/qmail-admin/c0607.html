<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML
><HEAD
><TITLE
>Serveur de courriel pour réseau local + liaison Internet intermittante</TITLE
><META
NAME="CREATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.07"><META
NAME="form"
CONTENT="html"><META
NAME="Description"
CONTENT="Introduction to qmail in french"><META
NAME="Keywords"
CONTENT="qmail mta"><META
NAME="Robot"
CONTENT="index,follow"><META
NAME="Author"
CONTENT="Djalil Chafai"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Introduction à qmail</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c0606.html"
>Précédent</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapitre 6. Quelques configurations type</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c0608.html"
>Suivant</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"><H1
><A
NAME="I(CONFIGS-TYPE)C(7,SECT1)"
>Serveur de courriel pour réseau local + liaison Internet intermittante</A
></H1
><P
>Vous devez mettre en place les services SMTP et POP3.
Reportez-vous au <A
HREF="c03.html"
>Chapitre 3</A
>.
Reportez-vous à <A
HREF="c0503.html"
>la section <I
>PPP et serialmail</I
> du Chapitre 5</A
> pour tout ce qui concerne
les connexions intermittantes à l'Internet.</P
><P
>Je suppose que le serveur a pour nom
<TT
CLASS="LITERAL"
>mail.mondomaine.amoi</TT
> et qu'il est MX pour
<TT
CLASS="LITERAL"
>mondomaine.amoi</TT
>,
<TT
CLASS="LITERAL"
>mail.mondomaine.amoi</TT
>,
<TT
CLASS="LITERAL"
>client1.mondomaine.amoi</TT
> et
<TT
CLASS="LITERAL"
>client2.mondomaine.amoi</TT
> dans le DNS du réseau local.</P
><P
>Le serveur n'accepte que le courriel en STMP à destination du domaine
<TT
CLASS="LITERAL"
>mondomaine.amoi</TT
>.</P
><P
>Le courriel dont la destination n'est pas
<TT
CLASS="LITERAL"
>mondomaine.amoi</TT
>,
<TT
CLASS="LITERAL"
>mail.mondomaine.amoi</TT
>,
<TT
CLASS="LITERAL"
>client1.mondomaine.amoi</TT
> ou
<TT
CLASS="LITERAL"
>client2.mondomaine.amoi</TT
> ne sera pas considéré comme
local, le serveur tentera donc de contacter la passèrelle SMTP
<TT
CLASS="LITERAL"
>mail.monfai.amoi</TT
>.</P
><P
></P
><UL
><LI
><P
><TT
CLASS="FILENAME"
>/var/qmail/control/me</TT
>
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>mail.mondomaine.amoi</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>/var/qmail/control/defaultdomain</TT
>
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>mondomaine.amoi</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>/var/qmail/control/defaulthost</TT
>
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>mondomaine.amoi</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>/var/qmail/control/rcpthosts</TT
>
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>mondomaine.amoi
.mondomaine.amoi</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>/var/qmail/control/locals</TT
>
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>mondomaine.amoi
mail
mail.mondomaine.amoi
client1
client1.mondomaine.amoi
client2
client2.mondomaine.amoi</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>/var/qmail/control/smtproutes</TT
>
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>:mail.monfai.amoi</PRE
></TD
></TR
></TABLE
></P
></LI
></UL
><P
>À l'établissement de la connexion à l'Internet, il
suffit de demander à <I
CLASS="PRODUCTNAME"
>qmail</I
> de 
tenter de vider sa queue par un :
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>root:bash$ kill -ALRM $(pidof qmail-send)</PRE
></TD
></TR
></TABLE
>
Bien sûr, tout celà peut parfaitement être automatisé, par exemple
dans un script <TT
CLASS="FILENAME"
>ip-up</TT
>.</P
><HR
ALIGN="LEFT"
WIDTH="515"><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c0606.html"
>Précédent</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book01.html"
>Page principale</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c0608.html"
>Suivant</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Serveur de courriel pour réseau local isolé</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c06.html"
>Niveau précédent</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Serveur de courriel sur l'Internet</TD
></TR
></TABLE
></BODY
></HTML
>