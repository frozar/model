<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML
><HEAD
><TITLE
>Réécriture d'adresse d'expéditeur</TITLE
><META
NAME="CREATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.07"><META
NAME="form"
CONTENT="html"><META
NAME="Description"
CONTENT="Introduction to qmail in french"><META
NAME="Keywords"
CONTENT="qmail mta"><META
NAME="Robot"
CONTENT="index,follow"><META
NAME="Author"
CONTENT="Djalil Chafai"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Introduction à qmail</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c0504.html"
>Précédent</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapitre 5. Configuration : pour aller plus loin</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c0506.html"
>Suivant</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"><H1
><A
NAME="R,C(5,CHAPTER)(5,SECT1)"
>Réécriture d'adresse d'expéditeur</A
></H1
><P
> 
Si vous désirez modifier votre identité apparente dans les courriels
que vous envoyez, il vous suffit d'utiliser les variables d'environnement
<TT
CLASS="LITERAL"
>QMAILHOST</TT
>,
<TT
CLASS="LITERAL"
>QMAILUSER</TT
> et
<TT
CLASS="LITERAL"
>QMAILNAME</TT
>.
Ces variables sont prises en considération par
<I
CLASS="APPLICATION"
>qmail-inject</I
>
lors de l'injection de vos courriels dans la queue (cf. la page de manuel).
Les champs <TT
CLASS="LITERAL"
>From:</TT
> et
<TT
CLASS="LITERAL"
>Return-Path:</TT
> de vos courriels sont
alors modifiés automatiquement. Celà s'avère très pratique lorsque votre
machine n'est pas en permanence sur l'Internet et ne s'y connecte que de façon
intermittante via une adresse IP dynamique.</P
><P
>On peut contrôler les modifications qu'apporte
<I
CLASS="APPLICATION"
>qmail-inject</I
>
aux entêtes en utilisant la variable d'environnement
<TT
CLASS="LITERAL"
>QMAILINJECT</TT
>.
Voir la page de manuel de
<I
CLASS="APPLICATION"
>qmail-inject</I
> pour les détails.</P
><P
>Voici par exemple ce que j'ai rajouté à mon fichier
<TT
CLASS="FILENAME"
>.bashrc</TT
> :

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>export QMAILHOST="mail.dotcom.fr"
export QMAILUSER="dchafai"
export QMAILNAME="Djalil Chafai"
export QMAILINJECT=f</PRE
></TD
></TR
></TABLE
>

Ainsi, les messages que j'envoie apparaissent comme provenant de 
<TT
CLASS="LITERAL"
>dchafai@mail.dotcom.fr (Djalil Chafai)</TT
>.
Cette solution est interressante car elle marche avec tous les MUA faisant
appel au wrapper <I
CLASS="PRODUCTNAME"
>sendmail</I
> de
<I
CLASS="PRODUCTNAME"
>qmail</I
>, lui même appelant
<I
CLASS="APPLICATION"
>qmail-inject</I
>.
De plus, cela permet de se débarrasser des problèmes de paranoïa des
passerelles de courriels de certains FAI.</P
><P
>En fait, pour déterminer le nom d'utilisateur,
<I
CLASS="APPLICATION"
>qmail-inject</I
> utilise 
les variables d'environnement suivantes par ordre décroissant de préférence :
<TT
CLASS="LITERAL"
>QMAILUSER</TT
>,
<TT
CLASS="LITERAL"
>MAILUSER</TT
>,
<TT
CLASS="LITERAL"
>USER</TT
> et
<TT
CLASS="LITERAL"
>LOGNAME</TT
>.
Pour le nom de machine,
<I
CLASS="APPLICATION"
>qmail-inject</I
> utilise la variable 
<I
CLASS="PRODUCTNAME"
>qmail</I
>
<TT
CLASS="FILENAME"
>defaulthost</TT
>. Elle peut être cependant forcée par les 
variables d'environnement
<TT
CLASS="LITERAL"
>QMAILHOST</TT
> et <TT
CLASS="LITERAL"
>MAILHOST</TT
>.
Le nom personnel est quant à lui donné par les variables d'environnement 
<TT
CLASS="LITERAL"
>QMAILNAME</TT
>, <TT
CLASS="LITERAL"
>MAILNAME</TT
> et
<TT
CLASS="LITERAL"
>NAME</TT
>.</P
><HR
ALIGN="LEFT"
WIDTH="515"><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c0504.html"
>Précédent</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book01.html"
>Page principale</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c0506.html"
>Suivant</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Fetchmail</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c05.html"
>Niveau précédent</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>UUCP</TD
></TR
></TABLE
></BODY
></HTML
>