<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML
><HEAD
><TITLE
>UCSPI-TCP et TCPcontrol</TITLE
><META
NAME="CREATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.07"><META
NAME="form"
CONTENT="html"><META
NAME="Description"
CONTENT="Introduction to qmail in french"><META
NAME="Keywords"
CONTENT="qmail mta"><META
NAME="Robot"
CONTENT="index,follow"><META
NAME="Author"
CONTENT="Djalil Chafai"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Introduction à qmail</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c0302.html"
>Précédent</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapitre 3. Mise en place de SMTP, POP3, UCSPI et QMTP</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c0304.html"
>Suivant</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"><H1
><A
NAME="I(SERVICES)C(3,SECT1)"
>UCSPI-TCP et TCPcontrol</A
></H1
><P
>UCSPI signifie Unix Client-Server Program Interface.
Un outil UCSPI est un programme qui sait communiquer avec un certain
medium de communication (par exple TCP). Il fournit de plus deux
descripteurs de fichiers, l'un pour lire et l'autre pour écrire sur le
medium.
On peut alors lui associer un programme qui lira et écrira sur ces
descripteurs sans se soucier du medium.
Celà permet de créer à partir d'un programme UNIX quelconque
une application client/serveur sur le medium en question.
L'avantage est que le programme ainsi enveloppé ne se soucie plus du
medium qu'il utilise, c'est désormais le problème de l'enveloppe UCSPI.</P
><P
>Les outils UCSPI sont de deux types : les clients et les serveurs

<P
></P
><UL
><LI
><P
>Un client UCSPI se connecte à un serveur à un certain port
et communique avec le programme qu'on lui spécifie via les
descripteurs 6 et 7. Le client n'établit aucune connexion
supplémentaire et meurt avec le programme.</P
></LI
><LI
><P
>Un serveur UCSPI attend les connexions des clients sur un
certain port et comunique avec le programme qu'on lui spécifie via les
descripteurs 0 et 1. Il permet d'avoir plusieurs connexions simultanées.</P
></LI
></UL
>&#13;</P
><P
>Je vous conseille fortement la lecture du texte
<A
HREF="http://pobox.com/~djb/proto/ucspi.txt"
>http://pobox.com/~djb/proto/ucspi.txt</A
>
de Dan Bernstein dont je me suis largement inspiré.</P
><P
>Un exemple est <I
CLASS="PRODUCTNAME"
>UCSPI-TCP</I
> écrit par Dan Bernstein
qui est constitué de <I
CLASS="APPLICATION"
>tcpclient</I
> et
<I
CLASS="APPLICATION"
>tcpserver</I
>.
En gros, on peut dire qu'ils permettent de faire pour un
port et un programme particulier ce que fait
<I
CLASS="APPLICATION"
>inetd</I
> à la différence
qu'ils sont très performants et paramétrables.
Voici l'URL de <I
CLASS="PRODUCTNAME"
>UCSPI-TCP</I
> :
<A
HREF="http://pobox.com/~djb/UCSPI-TCP.html"
>http://pobox.com/~djb/ucspi-tcp.html</A
>.</P
><P
><I
CLASS="PRODUCTNAME"
>UCSPI-TCP</I
> va se révéler très pratique dans le
système <I
CLASS="PRODUCTNAME"
>qmail</I
>.
Il permétra de transformer les programmes
<I
CLASS="APPLICATION"
>qmail-smtpd</I
>,
<I
CLASS="APPLICATION"
>qmail-qmtpd</I
> et
<I
CLASS="APPLICATION"
>qmail-pop3d</I
> qui ne connaissent rien à TCP en de
véritables serveurs sur certains ports TCP indépendament
d'<I
CLASS="APPLICATION"
>inetd</I
>.
On gagnera ainsi en configurabilité et surtout en performances pures.</P
><P
><I
CLASS="APPLICATION"
>TCPcontrol</I
> quand à lui est un contrôleur d'accès
écrit par Dan Bernstein destiné à être utilisé avec
<I
CLASS="PRODUCTNAME"
>UCSPI-TCP</I
>.
C'est ce que l'on appelle un «TCP wrapper». Voir
<A
HREF="http://pobox.com/~djb/tcpcontrol.html"
>http://pobox.com/~djb/tcpcontrol.html</A
>. Il est à
<I
CLASS="APPLICATION"
>tcpserver</I
> ce
que <I
CLASS="APPLICATION"
>tcpd</I
> est à <I
CLASS="APPLICATION"
>inetd</I
>.
Consultez sa documentation pour en savoir plus.
Je n'ai pas utilisé <I
CLASS="APPLICATION"
>TCPcontrol</I
> dans la suite.
Vous pouvez lire avec profit la FAQ de <I
CLASS="PRODUCTNAME"
>qmail</I
>
qui explique comment s'en servir pour le port SMTP.</P
><HR
ALIGN="LEFT"
WIDTH="515"><TABLE
WIDTH="515"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c0302.html"
>Précédent</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book01.html"
>Page principale</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c0304.html"
>Suivant</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>POP3 par qmail-pop3d via inetd</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c03.html"
>Niveau précédent</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>SMTP par qmail-smtpd via UCSPI-TCP</TD
></TR
></TABLE
></BODY
></HTML
>